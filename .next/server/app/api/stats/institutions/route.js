"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/stats/institutions/route";
exports.ids = ["app/api/stats/institutions/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstats%2Finstitutions%2Froute&page=%2Fapi%2Fstats%2Finstitutions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstats%2Finstitutions%2Froute.ts&appDir=C%3A%5C1%20Projects%5Csecular_forum%5Csecular_hub%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5C1%20Projects%5Csecular_forum%5Csecular_hub&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstats%2Finstitutions%2Froute&page=%2Fapi%2Fstats%2Finstitutions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstats%2Finstitutions%2Froute.ts&appDir=C%3A%5C1%20Projects%5Csecular_forum%5Csecular_hub%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5C1%20Projects%5Csecular_forum%5Csecular_hub&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_1_Projects_secular_forum_secular_hub_app_api_stats_institutions_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/stats/institutions/route.ts */ \"(rsc)/./app/api/stats/institutions/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/stats/institutions/route\",\n        pathname: \"/api/stats/institutions\",\n        filename: \"route\",\n        bundlePath: \"app/api/stats/institutions/route\"\n    },\n    resolvedPagePath: \"C:\\\\1 Projects\\\\secular_forum\\\\secular_hub\\\\app\\\\api\\\\stats\\\\institutions\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_1_Projects_secular_forum_secular_hub_app_api_stats_institutions_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/stats/institutions/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzdGF0cyUyRmluc3RpdHV0aW9ucyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGc3RhdHMlMkZpbnN0aXR1dGlvbnMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZzdGF0cyUyRmluc3RpdHV0aW9ucyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDMSUyMFByb2plY3RzJTVDc2VjdWxhcl9mb3J1bSU1Q3NlY3VsYXJfaHViJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDMSUyMFByb2plY3RzJTVDc2VjdWxhcl9mb3J1bSU1Q3NlY3VsYXJfaHViJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNtQztBQUNoSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3NlY3VsYXJfaHViLz85MDE2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXDEgUHJvamVjdHNcXFxcc2VjdWxhcl9mb3J1bVxcXFxzZWN1bGFyX2h1YlxcXFxhcHBcXFxcYXBpXFxcXHN0YXRzXFxcXGluc3RpdHV0aW9uc1xcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvc3RhdHMvaW5zdGl0dXRpb25zL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvc3RhdHMvaW5zdGl0dXRpb25zXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9zdGF0cy9pbnN0aXR1dGlvbnMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFwxIFByb2plY3RzXFxcXHNlY3VsYXJfZm9ydW1cXFxcc2VjdWxhcl9odWJcXFxcYXBwXFxcXGFwaVxcXFxzdGF0c1xcXFxpbnN0aXR1dGlvbnNcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3N0YXRzL2luc3RpdHV0aW9ucy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstats%2Finstitutions%2Froute&page=%2Fapi%2Fstats%2Finstitutions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstats%2Finstitutions%2Froute.ts&appDir=C%3A%5C1%20Projects%5Csecular_forum%5Csecular_hub%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5C1%20Projects%5Csecular_forum%5Csecular_hub&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/stats/institutions/route.ts":
/*!*********************************************!*\
  !*** ./app/api/stats/institutions/route.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_db_queries__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db/queries */ \"(rsc)/./lib/db/queries.ts\");\n\n\nasync function GET() {\n    const stats = await (0,_lib_db_queries__WEBPACK_IMPORTED_MODULE_1__.getStats)();\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(stats.institutions);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3N0YXRzL2luc3RpdHV0aW9ucy9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMkM7QUFDQztBQUVyQyxlQUFlRTtJQUNwQixNQUFNQyxRQUFRLE1BQU1GLHlEQUFRQTtJQUM1QixPQUFPRCxxREFBWUEsQ0FBQ0ksSUFBSSxDQUFDRCxNQUFNRSxZQUFZO0FBQzdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VjdWxhcl9odWIvLi9hcHAvYXBpL3N0YXRzL2luc3RpdHV0aW9ucy9yb3V0ZS50cz8wYmY1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcclxuaW1wb3J0IHsgZ2V0U3RhdHMgfSBmcm9tICdAL2xpYi9kYi9xdWVyaWVzJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQoKSB7XHJcbiAgY29uc3Qgc3RhdHMgPSBhd2FpdCBnZXRTdGF0cygpO1xyXG4gIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihzdGF0cy5pbnN0aXR1dGlvbnMpO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJnZXRTdGF0cyIsIkdFVCIsInN0YXRzIiwianNvbiIsImluc3RpdHV0aW9ucyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/stats/institutions/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db/client.ts":
/*!**************************!*\
  !*** ./lib/db/client.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = global;\nconst prisma = globalForPrisma.prisma || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log: [\n        \"query\"\n    ]\n});\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIvY2xpZW50LnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE4QztBQUU5QyxNQUFNQyxrQkFBa0JDO0FBRWpCLE1BQU1DLFNBQ1hGLGdCQUFnQkUsTUFBTSxJQUN0QixJQUFJSCx3REFBWUEsQ0FBQztJQUNmSSxLQUFLO1FBQUM7S0FBUTtBQUNoQixHQUFHO0FBRUwsSUFBSUMsSUFBeUIsRUFBY0osZ0JBQWdCRSxNQUFNLEdBQUdBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VjdWxhcl9odWIvLi9saWIvZGIvY2xpZW50LnRzP2ZkZWIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnO1xyXG5cclxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsIGFzIHVua25vd24gYXMgeyBwcmlzbWE6IFByaXNtYUNsaWVudCB9O1xyXG5cclxuZXhwb3J0IGNvbnN0IHByaXNtYSA9XHJcbiAgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSB8fFxyXG4gIG5ldyBQcmlzbWFDbGllbnQoe1xyXG4gICAgbG9nOiBbJ3F1ZXJ5J10sXHJcbiAgfSk7XHJcblxyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYTtcclxuIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsImdsb2JhbEZvclByaXNtYSIsImdsb2JhbCIsInByaXNtYSIsImxvZyIsInByb2Nlc3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/db/client.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db/queries.ts":
/*!***************************!*\
  !*** ./lib/db/queries.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCompareStats: () => (/* binding */ getCompareStats),\n/* harmony export */   getOutlookById: () => (/* binding */ getOutlookById),\n/* harmony export */   getOutlooks: () => (/* binding */ getOutlooks),\n/* harmony export */   getStats: () => (/* binding */ getStats)\n/* harmony export */ });\n/* harmony import */ var _client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./client */ \"(rsc)/./lib/db/client.ts\");\n\nasync function getOutlooks(filter) {\n    const { year, institution, theme, themeCategory, conviction, limit = 50, page = 1, search } = filter;\n    const skip = (page - 1) * limit;\n    const where = {};\n    if (year) where.year = year;\n    if (institution) where.institution = {\n        contains: institution\n    }; // Flexible search\n    if (theme) where.theme = {\n        contains: theme\n    };\n    if (themeCategory) where.themeCategory = themeCategory;\n    if (conviction) where.convictionTier = conviction;\n    if (search) {\n        where.OR = [\n            {\n                callText: {\n                    contains: search\n                }\n            },\n            {\n                theme: {\n                    contains: search\n                }\n            },\n            {\n                institution: {\n                    contains: search\n                }\n            }\n        ];\n    }\n    const [data, total] = await Promise.all([\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.outlookCall.findMany({\n            where,\n            take: limit,\n            skip,\n            orderBy: {\n                id: \"asc\"\n            }\n        }),\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.outlookCall.count({\n            where\n        })\n    ]);\n    return {\n        data,\n        total,\n        page,\n        limit\n    };\n}\nasync function getOutlookById(id) {\n    return _client__WEBPACK_IMPORTED_MODULE_0__.prisma.outlookCall.findUnique({\n        where: {\n            id\n        }\n    });\n}\nasync function getStats() {\n    const [total, years, themes, institutions] = await Promise.all([\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.outlookCall.count(),\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.outlookCall.groupBy({\n            by: [\n                \"year\"\n            ],\n            _count: {\n                year: true\n            },\n            orderBy: {\n                year: \"desc\"\n            }\n        }),\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.outlookCall.groupBy({\n            by: [\n                \"themeCategory\"\n            ],\n            _count: {\n                themeCategory: true\n            },\n            // @ts-ignore: Prisma orderBy syntax for aggregated groups can be tricky in TS\n            orderBy: {\n                _count: {\n                    themeCategory: \"desc\"\n                }\n            }\n        }),\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.outlookCall.groupBy({\n            by: [\n                \"institutionCanonical\"\n            ],\n            _count: {\n                institutionCanonical: true\n            },\n            // @ts-ignore\n            orderBy: {\n                _count: {\n                    institutionCanonical: \"desc\"\n                }\n            }\n        })\n    ]);\n    return {\n        total_records: Number(total),\n        // @ts-ignore: _count property existence\n        years: years.map((y)=>({\n                year: y.year,\n                count: Number(y._count?.year || 0)\n            })),\n        // @ts-ignore\n        themes: themes.map((t)=>({\n                theme: t.themeCategory,\n                count: Number(t._count?.themeCategory || 0)\n            })),\n        // @ts-ignore\n        institutions: institutions.map((i)=>({\n                institution: i.institutionCanonical,\n                count: Number(i._count?.institutionCanonical || 0)\n            }))\n    };\n}\nasync function getCompareStats(year1, year2) {\n    const [y1Themes, y2Themes, y1Inst, y2Inst] = await Promise.all([\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.outlookCall.groupBy({\n            by: [\n                \"themeCategory\"\n            ],\n            where: {\n                year: year1\n            },\n            _count: {\n                themeCategory: true\n            }\n        }),\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.outlookCall.groupBy({\n            by: [\n                \"themeCategory\"\n            ],\n            where: {\n                year: year2\n            },\n            _count: {\n                themeCategory: true\n            }\n        }),\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.outlookCall.groupBy({\n            by: [\n                \"institutionCanonical\",\n                \"themeCategory\"\n            ],\n            where: {\n                year: year1\n            }\n        }),\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.outlookCall.groupBy({\n            by: [\n                \"institutionCanonical\",\n                \"themeCategory\"\n            ],\n            where: {\n                year: year2\n            }\n        })\n    ]);\n    // Process Themes\n    // @ts-ignore\n    const themes1Map = new Map(y1Themes.map((t)=>[\n            t.themeCategory,\n            Number(t._count?.themeCategory || 0)\n        ]));\n    // @ts-ignore\n    const themes2Map = new Map(y2Themes.map((t)=>[\n            t.themeCategory,\n            Number(t._count?.themeCategory || 0)\n        ]));\n    // @ts-ignore: Set iteration downlevel handled by tsconfig\n    const allThemes = new Set([\n        ...themes1Map.keys(),\n        ...themes2Map.keys()\n    ]);\n    const themes_emerged = [];\n    const themes_extinct = [];\n    const themes_grew = [];\n    const themes_declined = [];\n    allThemes.forEach((theme)=>{\n        const c1 = themes1Map.get(theme) || 0;\n        const c2 = themes2Map.get(theme) || 0;\n        const delta = c2 - c1;\n        if (c1 === 0 && c2 > 0) themes_emerged.push(theme);\n        else if (c1 > 0 && c2 === 0) themes_extinct.push(theme);\n        else if (delta > 0) themes_grew.push({\n            theme,\n            delta\n        });\n        else if (delta < 0) themes_declined.push({\n            theme,\n            delta\n        });\n    });\n    // Process Institutions (Change in themes covered)\n    // This is complex, simplification:\n    // For each institution, list themes in Y1 vs Y2\n    const instMap1 = new Map();\n    y1Inst.forEach((i)=>{\n        const list = instMap1.get(i.institutionCanonical) || [];\n        list.push(i.themeCategory);\n        instMap1.set(i.institutionCanonical, list);\n    });\n    const instMap2 = new Map();\n    y2Inst.forEach((i)=>{\n        const list = instMap2.get(i.institutionCanonical) || [];\n        list.push(i.themeCategory);\n        instMap2.set(i.institutionCanonical, list);\n    });\n    const institutional_changes = [];\n    const allInst = new Set([\n        ...instMap1.keys(),\n        ...instMap2.keys()\n    ]);\n    for (const inst of allInst){\n        const t1 = instMap1.get(inst) || [];\n        const t2 = instMap2.get(inst) || [];\n        // Only include if there's a change or significant data\n        institutional_changes.push({\n            institution: inst,\n            year1_themes: t1,\n            year2_themes: t2\n        });\n    }\n    return {\n        year1,\n        year2,\n        themes_emerged,\n        themes_extinct,\n        themes_grew: themes_grew.sort((a, b)=>b.delta - a.delta),\n        themes_declined: themes_declined.sort((a, b)=>a.delta - b.delta),\n        institutional_changes: institutional_changes.slice(0, 50) // Limit to top 50 to avoid massive payload\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwcmlzbWEgfSBmcm9tICcuL2NsaWVudCc7XHJcbmltcG9ydCB7IE91dGxvb2tDYWxsLCBQcmlzbWEgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XHJcblxyXG5leHBvcnQgdHlwZSBPdXRsb29rRmlsdGVyID0ge1xyXG4gIHllYXI/OiBudW1iZXI7XHJcbiAgaW5zdGl0dXRpb24/OiBzdHJpbmc7XHJcbiAgdGhlbWU/OiBzdHJpbmc7XHJcbiAgdGhlbWVDYXRlZ29yeT86IHN0cmluZztcclxuICBjb252aWN0aW9uPzogc3RyaW5nO1xyXG4gIGxpbWl0PzogbnVtYmVyO1xyXG4gIHBhZ2U/OiBudW1iZXI7XHJcbiAgc2VhcmNoPzogc3RyaW5nO1xyXG59O1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE91dGxvb2tzKGZpbHRlcjogT3V0bG9va0ZpbHRlcikge1xyXG4gIGNvbnN0IHsgeWVhciwgaW5zdGl0dXRpb24sIHRoZW1lLCB0aGVtZUNhdGVnb3J5LCBjb252aWN0aW9uLCBsaW1pdCA9IDUwLCBwYWdlID0gMSwgc2VhcmNoIH0gPSBmaWx0ZXI7XHJcbiAgY29uc3Qgc2tpcCA9IChwYWdlIC0gMSkgKiBsaW1pdDtcclxuXHJcbiAgY29uc3Qgd2hlcmU6IFByaXNtYS5PdXRsb29rQ2FsbFdoZXJlSW5wdXQgPSB7fTtcclxuXHJcbiAgaWYgKHllYXIpIHdoZXJlLnllYXIgPSB5ZWFyO1xyXG4gIGlmIChpbnN0aXR1dGlvbikgd2hlcmUuaW5zdGl0dXRpb24gPSB7IGNvbnRhaW5zOiBpbnN0aXR1dGlvbiB9OyAvLyBGbGV4aWJsZSBzZWFyY2hcclxuICBpZiAodGhlbWUpIHdoZXJlLnRoZW1lID0geyBjb250YWluczogdGhlbWUgfTtcclxuICBpZiAodGhlbWVDYXRlZ29yeSkgd2hlcmUudGhlbWVDYXRlZ29yeSA9IHRoZW1lQ2F0ZWdvcnk7XHJcbiAgaWYgKGNvbnZpY3Rpb24pIHdoZXJlLmNvbnZpY3Rpb25UaWVyID0gY29udmljdGlvbjtcclxuICBpZiAoc2VhcmNoKSB7XHJcbiAgICB3aGVyZS5PUiA9IFtcclxuICAgICAgeyBjYWxsVGV4dDogeyBjb250YWluczogc2VhcmNoIH0gfSxcclxuICAgICAgeyB0aGVtZTogeyBjb250YWluczogc2VhcmNoIH0gfSxcclxuICAgICAgeyBpbnN0aXR1dGlvbjogeyBjb250YWluczogc2VhcmNoIH0gfSxcclxuICAgIF07XHJcbiAgfVxyXG5cclxuICBjb25zdCBbZGF0YSwgdG90YWxdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xyXG4gICAgcHJpc21hLm91dGxvb2tDYWxsLmZpbmRNYW55KHtcclxuICAgICAgd2hlcmUsXHJcbiAgICAgIHRha2U6IGxpbWl0LFxyXG4gICAgICBza2lwLFxyXG4gICAgICBvcmRlckJ5OiB7IGlkOiAnYXNjJyB9LCAvLyBTdGFibGUgb3JkZXJpbmdcclxuICAgIH0pLFxyXG4gICAgcHJpc21hLm91dGxvb2tDYWxsLmNvdW50KHsgd2hlcmUgfSksXHJcbiAgXSk7XHJcblxyXG4gIHJldHVybiB7IGRhdGEsIHRvdGFsLCBwYWdlLCBsaW1pdCB9O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0T3V0bG9va0J5SWQoaWQ6IHN0cmluZykge1xyXG4gIHJldHVybiBwcmlzbWEub3V0bG9va0NhbGwuZmluZFVuaXF1ZSh7XHJcbiAgICB3aGVyZTogeyBpZCB9LFxyXG4gIH0pO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U3RhdHMoKSB7XHJcbiAgY29uc3QgW3RvdGFsLCB5ZWFycywgdGhlbWVzLCBpbnN0aXR1dGlvbnNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xyXG4gICAgcHJpc21hLm91dGxvb2tDYWxsLmNvdW50KCksXHJcbiAgICBwcmlzbWEub3V0bG9va0NhbGwuZ3JvdXBCeSh7XHJcbiAgICAgIGJ5OiBbJ3llYXInXSxcclxuICAgICAgX2NvdW50OiB7IHllYXI6IHRydWUgfSxcclxuICAgICAgb3JkZXJCeTogeyB5ZWFyOiAnZGVzYycgfSxcclxuICAgIH0pLFxyXG4gICAgcHJpc21hLm91dGxvb2tDYWxsLmdyb3VwQnkoe1xyXG4gICAgICBieTogWyd0aGVtZUNhdGVnb3J5J10sXHJcbiAgICAgIF9jb3VudDogeyB0aGVtZUNhdGVnb3J5OiB0cnVlIH0sXHJcbiAgICAgIC8vIEB0cy1pZ25vcmU6IFByaXNtYSBvcmRlckJ5IHN5bnRheCBmb3IgYWdncmVnYXRlZCBncm91cHMgY2FuIGJlIHRyaWNreSBpbiBUU1xyXG4gICAgICBvcmRlckJ5OiB7IF9jb3VudDogeyB0aGVtZUNhdGVnb3J5OiAnZGVzYycgfSB9LFxyXG4gICAgfSksXHJcbiAgICBwcmlzbWEub3V0bG9va0NhbGwuZ3JvdXBCeSh7XHJcbiAgICAgIGJ5OiBbJ2luc3RpdHV0aW9uQ2Fub25pY2FsJ10sXHJcbiAgICAgIF9jb3VudDogeyBpbnN0aXR1dGlvbkNhbm9uaWNhbDogdHJ1ZSB9LFxyXG4gICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgIG9yZGVyQnk6IHsgX2NvdW50OiB7IGluc3RpdHV0aW9uQ2Fub25pY2FsOiAnZGVzYycgfSB9LFxyXG4gICAgfSksXHJcbiAgXSk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICB0b3RhbF9yZWNvcmRzOiBOdW1iZXIodG90YWwpLFxyXG4gICAgLy8gQHRzLWlnbm9yZTogX2NvdW50IHByb3BlcnR5IGV4aXN0ZW5jZVxyXG4gICAgeWVhcnM6IHllYXJzLm1hcCh5ID0+ICh7IHllYXI6IHkueWVhciwgY291bnQ6IE51bWJlcih5Ll9jb3VudD8ueWVhciB8fCAwKSB9KSksXHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICB0aGVtZXM6IHRoZW1lcy5tYXAodCA9PiAoeyB0aGVtZTogdC50aGVtZUNhdGVnb3J5LCBjb3VudDogTnVtYmVyKHQuX2NvdW50Py50aGVtZUNhdGVnb3J5IHx8IDApIH0pKSxcclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIGluc3RpdHV0aW9uczogaW5zdGl0dXRpb25zLm1hcChpID0+ICh7IGluc3RpdHV0aW9uOiBpLmluc3RpdHV0aW9uQ2Fub25pY2FsLCBjb3VudDogTnVtYmVyKGkuX2NvdW50Py5pbnN0aXR1dGlvbkNhbm9uaWNhbCB8fCAwKSB9KSksXHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENvbXBhcmVTdGF0cyh5ZWFyMTogbnVtYmVyLCB5ZWFyMjogbnVtYmVyKSB7XHJcbiAgY29uc3QgW3kxVGhlbWVzLCB5MlRoZW1lcywgeTFJbnN0LCB5Mkluc3RdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xyXG4gICAgIHByaXNtYS5vdXRsb29rQ2FsbC5ncm91cEJ5KHtcclxuICAgICAgIGJ5OiBbJ3RoZW1lQ2F0ZWdvcnknXSxcclxuICAgICAgIHdoZXJlOiB7IHllYXI6IHllYXIxIH0sXHJcbiAgICAgICBfY291bnQ6IHsgdGhlbWVDYXRlZ29yeTogdHJ1ZSB9LFxyXG4gICAgIH0pLFxyXG4gICAgIHByaXNtYS5vdXRsb29rQ2FsbC5ncm91cEJ5KHtcclxuICAgICAgIGJ5OiBbJ3RoZW1lQ2F0ZWdvcnknXSxcclxuICAgICAgIHdoZXJlOiB7IHllYXI6IHllYXIyIH0sXHJcbiAgICAgICBfY291bnQ6IHsgdGhlbWVDYXRlZ29yeTogdHJ1ZSB9LFxyXG4gICAgIH0pLFxyXG4gICAgIHByaXNtYS5vdXRsb29rQ2FsbC5ncm91cEJ5KHtcclxuICAgICAgIGJ5OiBbJ2luc3RpdHV0aW9uQ2Fub25pY2FsJywgJ3RoZW1lQ2F0ZWdvcnknXSxcclxuICAgICAgIHdoZXJlOiB7IHllYXI6IHllYXIxIH0sXHJcbiAgICAgfSksXHJcbiAgICAgcHJpc21hLm91dGxvb2tDYWxsLmdyb3VwQnkoe1xyXG4gICAgICAgYnk6IFsnaW5zdGl0dXRpb25DYW5vbmljYWwnLCAndGhlbWVDYXRlZ29yeSddLFxyXG4gICAgICAgd2hlcmU6IHsgeWVhcjogeWVhcjIgfSxcclxuICAgICB9KSxcclxuICBdKTtcclxuXHJcbiAgLy8gUHJvY2VzcyBUaGVtZXNcclxuICAvLyBAdHMtaWdub3JlXHJcbiAgY29uc3QgdGhlbWVzMU1hcCA9IG5ldyBNYXAoeTFUaGVtZXMubWFwKHQgPT4gW3QudGhlbWVDYXRlZ29yeSwgTnVtYmVyKHQuX2NvdW50Py50aGVtZUNhdGVnb3J5IHx8IDApXSkpO1xyXG4gIC8vIEB0cy1pZ25vcmVcclxuICBjb25zdCB0aGVtZXMyTWFwID0gbmV3IE1hcCh5MlRoZW1lcy5tYXAodCA9PiBbdC50aGVtZUNhdGVnb3J5LCBOdW1iZXIodC5fY291bnQ/LnRoZW1lQ2F0ZWdvcnkgfHwgMCldKSk7XHJcbiAgXHJcbiAgLy8gQHRzLWlnbm9yZTogU2V0IGl0ZXJhdGlvbiBkb3dubGV2ZWwgaGFuZGxlZCBieSB0c2NvbmZpZ1xyXG4gIGNvbnN0IGFsbFRoZW1lcyA9IG5ldyBTZXQoWy4uLnRoZW1lczFNYXAua2V5cygpLCAuLi50aGVtZXMyTWFwLmtleXMoKV0pO1xyXG4gIGNvbnN0IHRoZW1lc19lbWVyZ2VkOiBzdHJpbmdbXSA9IFtdO1xyXG4gIGNvbnN0IHRoZW1lc19leHRpbmN0OiBzdHJpbmdbXSA9IFtdO1xyXG4gIGNvbnN0IHRoZW1lc19ncmV3OiB7IHRoZW1lOiBzdHJpbmc7IGRlbHRhOiBudW1iZXIgfVtdID0gW107XHJcbiAgY29uc3QgdGhlbWVzX2RlY2xpbmVkOiB7IHRoZW1lOiBzdHJpbmc7IGRlbHRhOiBudW1iZXIgfVtdID0gW107XHJcblxyXG4gIGFsbFRoZW1lcy5mb3JFYWNoKHRoZW1lID0+IHtcclxuICAgIGNvbnN0IGMxID0gdGhlbWVzMU1hcC5nZXQodGhlbWUpIHx8IDA7XHJcbiAgICBjb25zdCBjMiA9IHRoZW1lczJNYXAuZ2V0KHRoZW1lKSB8fCAwO1xyXG4gICAgY29uc3QgZGVsdGEgPSBjMiAtIGMxO1xyXG5cclxuICAgIGlmIChjMSA9PT0gMCAmJiBjMiA+IDApIHRoZW1lc19lbWVyZ2VkLnB1c2godGhlbWUpO1xyXG4gICAgZWxzZSBpZiAoYzEgPiAwICYmIGMyID09PSAwKSB0aGVtZXNfZXh0aW5jdC5wdXNoKHRoZW1lKTtcclxuICAgIGVsc2UgaWYgKGRlbHRhID4gMCkgdGhlbWVzX2dyZXcucHVzaCh7IHRoZW1lLCBkZWx0YSB9KTtcclxuICAgIGVsc2UgaWYgKGRlbHRhIDwgMCkgdGhlbWVzX2RlY2xpbmVkLnB1c2goeyB0aGVtZSwgZGVsdGEgfSk7XHJcbiAgfSk7XHJcblxyXG4gIC8vIFByb2Nlc3MgSW5zdGl0dXRpb25zIChDaGFuZ2UgaW4gdGhlbWVzIGNvdmVyZWQpXHJcbiAgLy8gVGhpcyBpcyBjb21wbGV4LCBzaW1wbGlmaWNhdGlvbjpcclxuICAvLyBGb3IgZWFjaCBpbnN0aXR1dGlvbiwgbGlzdCB0aGVtZXMgaW4gWTEgdnMgWTJcclxuICBjb25zdCBpbnN0TWFwMSA9IG5ldyBNYXA8c3RyaW5nLCBzdHJpbmdbXT4oKTtcclxuICB5MUluc3QuZm9yRWFjaChpID0+IHtcclxuICAgIGNvbnN0IGxpc3QgPSBpbnN0TWFwMS5nZXQoaS5pbnN0aXR1dGlvbkNhbm9uaWNhbCkgfHwgW107XHJcbiAgICBsaXN0LnB1c2goaS50aGVtZUNhdGVnb3J5KTtcclxuICAgIGluc3RNYXAxLnNldChpLmluc3RpdHV0aW9uQ2Fub25pY2FsLCBsaXN0KTtcclxuICB9KTtcclxuICBcclxuICBjb25zdCBpbnN0TWFwMiA9IG5ldyBNYXA8c3RyaW5nLCBzdHJpbmdbXT4oKTtcclxuICB5Mkluc3QuZm9yRWFjaChpID0+IHtcclxuICAgIGNvbnN0IGxpc3QgPSBpbnN0TWFwMi5nZXQoaS5pbnN0aXR1dGlvbkNhbm9uaWNhbCkgfHwgW107XHJcbiAgICBsaXN0LnB1c2goaS50aGVtZUNhdGVnb3J5KTtcclxuICAgIGluc3RNYXAyLnNldChpLmluc3RpdHV0aW9uQ2Fub25pY2FsLCBsaXN0KTtcclxuICB9KTtcclxuXHJcbiAgY29uc3QgaW5zdGl0dXRpb25hbF9jaGFuZ2VzID0gW107XHJcbiAgY29uc3QgYWxsSW5zdCA9IG5ldyBTZXQoWy4uLmluc3RNYXAxLmtleXMoKSwgLi4uaW5zdE1hcDIua2V5cygpXSk7XHJcbiAgXHJcbiAgZm9yIChjb25zdCBpbnN0IG9mIGFsbEluc3QpIHtcclxuICAgIGNvbnN0IHQxID0gaW5zdE1hcDEuZ2V0KGluc3QpIHx8IFtdO1xyXG4gICAgY29uc3QgdDIgPSBpbnN0TWFwMi5nZXQoaW5zdCkgfHwgW107XHJcbiAgICAvLyBPbmx5IGluY2x1ZGUgaWYgdGhlcmUncyBhIGNoYW5nZSBvciBzaWduaWZpY2FudCBkYXRhXHJcbiAgICBpbnN0aXR1dGlvbmFsX2NoYW5nZXMucHVzaCh7XHJcbiAgICAgIGluc3RpdHV0aW9uOiBpbnN0LFxyXG4gICAgICB5ZWFyMV90aGVtZXM6IHQxLFxyXG4gICAgICB5ZWFyMl90aGVtZXM6IHQyLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgeWVhcjEsXHJcbiAgICB5ZWFyMixcclxuICAgIHRoZW1lc19lbWVyZ2VkLFxyXG4gICAgdGhlbWVzX2V4dGluY3QsXHJcbiAgICB0aGVtZXNfZ3JldzogdGhlbWVzX2dyZXcuc29ydCgoYSxiKSA9PiBiLmRlbHRhIC0gYS5kZWx0YSksXHJcbiAgICB0aGVtZXNfZGVjbGluZWQ6IHRoZW1lc19kZWNsaW5lZC5zb3J0KChhLGIpID0+IGEuZGVsdGEgLSBiLmRlbHRhKSxcclxuICAgIGluc3RpdHV0aW9uYWxfY2hhbmdlczogaW5zdGl0dXRpb25hbF9jaGFuZ2VzLnNsaWNlKDAsIDUwKSAvLyBMaW1pdCB0byB0b3AgNTAgdG8gYXZvaWQgbWFzc2l2ZSBwYXlsb2FkXHJcbiAgfTtcclxufVxyXG4iXSwibmFtZXMiOlsicHJpc21hIiwiZ2V0T3V0bG9va3MiLCJmaWx0ZXIiLCJ5ZWFyIiwiaW5zdGl0dXRpb24iLCJ0aGVtZSIsInRoZW1lQ2F0ZWdvcnkiLCJjb252aWN0aW9uIiwibGltaXQiLCJwYWdlIiwic2VhcmNoIiwic2tpcCIsIndoZXJlIiwiY29udGFpbnMiLCJjb252aWN0aW9uVGllciIsIk9SIiwiY2FsbFRleHQiLCJkYXRhIiwidG90YWwiLCJQcm9taXNlIiwiYWxsIiwib3V0bG9va0NhbGwiLCJmaW5kTWFueSIsInRha2UiLCJvcmRlckJ5IiwiaWQiLCJjb3VudCIsImdldE91dGxvb2tCeUlkIiwiZmluZFVuaXF1ZSIsImdldFN0YXRzIiwieWVhcnMiLCJ0aGVtZXMiLCJpbnN0aXR1dGlvbnMiLCJncm91cEJ5IiwiYnkiLCJfY291bnQiLCJpbnN0aXR1dGlvbkNhbm9uaWNhbCIsInRvdGFsX3JlY29yZHMiLCJOdW1iZXIiLCJtYXAiLCJ5IiwidCIsImkiLCJnZXRDb21wYXJlU3RhdHMiLCJ5ZWFyMSIsInllYXIyIiwieTFUaGVtZXMiLCJ5MlRoZW1lcyIsInkxSW5zdCIsInkySW5zdCIsInRoZW1lczFNYXAiLCJNYXAiLCJ0aGVtZXMyTWFwIiwiYWxsVGhlbWVzIiwiU2V0Iiwia2V5cyIsInRoZW1lc19lbWVyZ2VkIiwidGhlbWVzX2V4dGluY3QiLCJ0aGVtZXNfZ3JldyIsInRoZW1lc19kZWNsaW5lZCIsImZvckVhY2giLCJjMSIsImdldCIsImMyIiwiZGVsdGEiLCJwdXNoIiwiaW5zdE1hcDEiLCJsaXN0Iiwic2V0IiwiaW5zdE1hcDIiLCJpbnN0aXR1dGlvbmFsX2NoYW5nZXMiLCJhbGxJbnN0IiwiaW5zdCIsInQxIiwidDIiLCJ5ZWFyMV90aGVtZXMiLCJ5ZWFyMl90aGVtZXMiLCJzb3J0IiwiYSIsImIiLCJzbGljZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/db/queries.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstats%2Finstitutions%2Froute&page=%2Fapi%2Fstats%2Finstitutions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstats%2Finstitutions%2Froute.ts&appDir=C%3A%5C1%20Projects%5Csecular_forum%5Csecular_hub%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5C1%20Projects%5Csecular_forum%5Csecular_hub&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();