"use strict";exports.id=870,exports.ids=[870],exports.modules={138:(e,t,n)=>{n.d(t,{z:()=>f});let i="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,s=new Set,r="object"==typeof process&&process?process:{},o=(e,t,n,i)=>{"function"==typeof r.emitWarning?r.emitWarning(e,t,n,i):console.error(`[${n}] ${t}: ${e}`)},a=globalThis.AbortController,l=globalThis.AbortSignal;if(void 0===a){l=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(e,t){this._onabort.push(t)}},a=class{constructor(){t()}signal=new l;abort(e){if(!this.signal.aborted){for(let t of(this.signal.reason=e,this.signal.aborted=!0,this.signal._onabort))t(e);this.signal.onabort?.(e)}}};let e=r.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",t=()=>{e&&(e=!1,o("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}let u=e=>!s.has(e);Symbol("type");let c=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),h=e=>c(e)?e<=256?Uint8Array:e<=65536?Uint16Array:e<=4294967296?Uint32Array:e<=Number.MAX_SAFE_INTEGER?d:null:null;class d extends Array{constructor(e){super(e),this.fill(0)}}class p{heap;length;static #e=!1;static create(e){let t=h(e);if(!t)return[];p.#e=!0;let n=new p(e,t);return p.#e=!1,n}constructor(e,t){if(!p.#e)throw TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}}class f{#t;#n;#i;#s;#r;#o;#a;#l;get perf(){return this.#l}ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#u;#c;#h;#d;#p;#f;#m;#g;#y;#_;#v;#b;#w;#z;#S;#k;#x;#$;#A;static unsafeExposeInternals(e){return{starts:e.#w,ttls:e.#z,autopurgeTimers:e.#S,sizes:e.#b,keyMap:e.#h,keyList:e.#d,valList:e.#p,next:e.#f,prev:e.#m,get head(){return e.#g},get tail(){return e.#y},free:e.#_,isBackgroundFetch:t=>e.#O(t),backgroundFetch:(t,n,i,s)=>e.#I(t,n,i,s),moveToTail:t=>e.#T(t),indexes:t=>e.#E(t),rindexes:t=>e.#N(t),isStale:t=>e.#P(t)}}get max(){return this.#t}get maxSize(){return this.#n}get calculatedSize(){return this.#c}get size(){return this.#u}get fetchMethod(){return this.#o}get memoMethod(){return this.#a}get dispose(){return this.#i}get onInsert(){return this.#s}get disposeAfter(){return this.#r}constructor(e){let{max:t=0,ttl:n,ttlResolution:r=1,ttlAutopurge:a,updateAgeOnGet:l,updateAgeOnHas:d,allowStale:m,dispose:g,onInsert:y,disposeAfter:_,noDisposeOnSet:v,noUpdateTTL:b,maxSize:w=0,maxEntrySize:z=0,sizeCalculation:S,fetchMethod:k,memoMethod:x,noDeleteOnFetchRejection:$,noDeleteOnStaleGet:A,allowStaleOnFetchRejection:O,allowStaleOnFetchAbort:I,ignoreFetchAbort:T,perf:E}=e;if(void 0!==E&&"function"!=typeof E?.now)throw TypeError("perf option must have a now() method if specified");if(this.#l=E??i,0!==t&&!c(t))throw TypeError("max option must be a nonnegative integer");let N=t?h(t):Array;if(!N)throw Error("invalid max value: "+t);if(this.#t=t,this.#n=w,this.maxEntrySize=z||this.#n,this.sizeCalculation=S,this.sizeCalculation){if(!this.#n&&!this.maxEntrySize)throw TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw TypeError("sizeCalculation set to non-function")}if(void 0!==x&&"function"!=typeof x)throw TypeError("memoMethod must be a function if defined");if(this.#a=x,void 0!==k&&"function"!=typeof k)throw TypeError("fetchMethod must be a function if specified");if(this.#o=k,this.#x=!!k,this.#h=new Map,this.#d=Array(t).fill(void 0),this.#p=Array(t).fill(void 0),this.#f=new N(t),this.#m=new N(t),this.#g=0,this.#y=0,this.#_=p.create(t),this.#u=0,this.#c=0,"function"==typeof g&&(this.#i=g),"function"==typeof y&&(this.#s=y),"function"==typeof _?(this.#r=_,this.#v=[]):(this.#r=void 0,this.#v=void 0),this.#k=!!this.#i,this.#A=!!this.#s,this.#$=!!this.#r,this.noDisposeOnSet=!!v,this.noUpdateTTL=!!b,this.noDeleteOnFetchRejection=!!$,this.allowStaleOnFetchRejection=!!O,this.allowStaleOnFetchAbort=!!I,this.ignoreFetchAbort=!!T,0!==this.maxEntrySize){if(0!==this.#n&&!c(this.#n))throw TypeError("maxSize must be a positive integer if specified");if(!c(this.maxEntrySize))throw TypeError("maxEntrySize must be a positive integer if specified");this.#Z()}if(this.allowStale=!!m,this.noDeleteOnStaleGet=!!A,this.updateAgeOnGet=!!l,this.updateAgeOnHas=!!d,this.ttlResolution=c(r)||0===r?r:1,this.ttlAutopurge=!!a,this.ttl=n||0,this.ttl){if(!c(this.ttl))throw TypeError("ttl must be a positive integer if specified");this.#R()}if(0===this.#t&&0===this.ttl&&0===this.#n)throw TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#t&&!this.#n){let e="LRU_CACHE_UNBOUNDED";u(e)&&(s.add(e),o("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",e,f))}}getRemainingTTL(e){return this.#h.has(e)?1/0:0}#R(){let e=new d(this.#t),t=new d(this.#t);this.#z=e,this.#w=t;let n=this.ttlAutopurge?Array(this.#t):void 0;this.#S=n,this.#j=(i,s,r=this.#l.now())=>{if(t[i]=0!==s?r:0,e[i]=s,n?.[i]&&(clearTimeout(n[i]),n[i]=void 0),0!==s&&n){let e=setTimeout(()=>{this.#P(i)&&this.#C(this.#d[i],"expire")},s+1);e.unref&&e.unref(),n[i]=e}},this.#L=n=>{t[n]=0!==e[n]?this.#l.now():0},this.#F=(n,r)=>{if(e[r]){let o=e[r],a=t[r];if(!o||!a)return;n.ttl=o,n.start=a,n.now=i||s();let l=n.now-a;n.remainingTTL=o-l}};let i=0,s=()=>{let e=this.#l.now();if(this.ttlResolution>0){i=e;let t=setTimeout(()=>i=0,this.ttlResolution);t.unref&&t.unref()}return e};this.getRemainingTTL=n=>{let r=this.#h.get(n);if(void 0===r)return 0;let o=e[r],a=t[r];return o&&a?o-((i||s())-a):1/0},this.#P=n=>{let r=t[n],o=e[n];return!!o&&!!r&&(i||s())-r>o}}#L=()=>{};#F=()=>{};#j=()=>{};#P=()=>!1;#Z(){let e=new d(this.#t);this.#c=0,this.#b=e,this.#M=t=>{this.#c-=e[t],e[t]=0},this.#D=(e,t,n,i)=>{if(this.#O(t))return 0;if(!c(n)){if(i){if("function"!=typeof i)throw TypeError("sizeCalculation must be a function");if(!c(n=i(t,e)))throw TypeError("sizeCalculation return invalid (expect positive integer)")}else throw TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.")}return n},this.#U=(t,n,i)=>{if(e[t]=n,this.#n){let n=this.#n-e[t];for(;this.#c>n;)this.#B(!0)}this.#c+=e[t],i&&(i.entrySize=n,i.totalCalculatedSize=this.#c)}}#M=e=>{};#U=(e,t,n)=>{};#D=(e,t,n,i)=>{if(n||i)throw TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#E({allowStale:e=this.allowStale}={}){if(this.#u)for(let t=this.#y;this.#W(t)&&((e||!this.#P(t))&&(yield t),t!==this.#g);)t=this.#m[t]}*#N({allowStale:e=this.allowStale}={}){if(this.#u)for(let t=this.#g;this.#W(t)&&((e||!this.#P(t))&&(yield t),t!==this.#y);)t=this.#f[t]}#W(e){return void 0!==e&&this.#h.get(this.#d[e])===e}*entries(){for(let e of this.#E())void 0===this.#p[e]||void 0===this.#d[e]||this.#O(this.#p[e])||(yield[this.#d[e],this.#p[e]])}*rentries(){for(let e of this.#N())void 0===this.#p[e]||void 0===this.#d[e]||this.#O(this.#p[e])||(yield[this.#d[e],this.#p[e]])}*keys(){for(let e of this.#E()){let t=this.#d[e];void 0===t||this.#O(this.#p[e])||(yield t)}}*rkeys(){for(let e of this.#N()){let t=this.#d[e];void 0===t||this.#O(this.#p[e])||(yield t)}}*values(){for(let e of this.#E())void 0===this.#p[e]||this.#O(this.#p[e])||(yield this.#p[e])}*rvalues(){for(let e of this.#N())void 0===this.#p[e]||this.#O(this.#p[e])||(yield this.#p[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(let n of this.#E()){let i=this.#p[n],s=this.#O(i)?i.__staleWhileFetching:i;if(void 0!==s&&e(s,this.#d[n],this))return this.get(this.#d[n],t)}}forEach(e,t=this){for(let n of this.#E()){let i=this.#p[n],s=this.#O(i)?i.__staleWhileFetching:i;void 0!==s&&e.call(t,s,this.#d[n],this)}}rforEach(e,t=this){for(let n of this.#N()){let i=this.#p[n],s=this.#O(i)?i.__staleWhileFetching:i;void 0!==s&&e.call(t,s,this.#d[n],this)}}purgeStale(){let e=!1;for(let t of this.#N({allowStale:!0}))this.#P(t)&&(this.#C(this.#d[t],"expire"),e=!0);return e}info(e){let t=this.#h.get(e);if(void 0===t)return;let n=this.#p[t],i=this.#O(n)?n.__staleWhileFetching:n;if(void 0===i)return;let s={value:i};if(this.#z&&this.#w){let e=this.#z[t],n=this.#w[t];if(e&&n){let t=e-(this.#l.now()-n);s.ttl=t,s.start=Date.now()}}return this.#b&&(s.size=this.#b[t]),s}dump(){let e=[];for(let t of this.#E({allowStale:!0})){let n=this.#d[t],i=this.#p[t],s=this.#O(i)?i.__staleWhileFetching:i;if(void 0===s||void 0===n)continue;let r={value:s};if(this.#z&&this.#w){r.ttl=this.#z[t];let e=this.#l.now()-this.#w[t];r.start=Math.floor(Date.now()-e)}this.#b&&(r.size=this.#b[t]),e.unshift([n,r])}return e}load(e){for(let[t,n]of(this.clear(),e)){if(n.start){let e=Date.now()-n.start;n.start=this.#l.now()-e}this.set(t,n.value,n)}}set(e,t,n={}){if(void 0===t)return this.delete(e),this;let{ttl:i=this.ttl,start:s,noDisposeOnSet:r=this.noDisposeOnSet,sizeCalculation:o=this.sizeCalculation,status:a}=n,{noUpdateTTL:l=this.noUpdateTTL}=n,u=this.#D(e,t,n.size||0,o);if(this.maxEntrySize&&u>this.maxEntrySize)return a&&(a.set="miss",a.maxEntrySizeExceeded=!0),this.#C(e,"set"),this;let c=0===this.#u?void 0:this.#h.get(e);if(void 0===c)c=0===this.#u?this.#y:0!==this.#_.length?this.#_.pop():this.#u===this.#t?this.#B(!1):this.#u,this.#d[c]=e,this.#p[c]=t,this.#h.set(e,c),this.#f[this.#y]=c,this.#m[c]=this.#y,this.#y=c,this.#u++,this.#U(c,u,a),a&&(a.set="add"),l=!1,this.#A&&this.#s?.(t,e,"add");else{this.#T(c);let n=this.#p[c];if(t!==n){if(this.#x&&this.#O(n)){n.__abortController.abort(Error("replaced"));let{__staleWhileFetching:t}=n;void 0!==t&&!r&&(this.#k&&this.#i?.(t,e,"set"),this.#$&&this.#v?.push([t,e,"set"]))}else!r&&(this.#k&&this.#i?.(n,e,"set"),this.#$&&this.#v?.push([n,e,"set"]));if(this.#M(c),this.#U(c,u,a),this.#p[c]=t,a){a.set="replace";let e=n&&this.#O(n)?n.__staleWhileFetching:n;void 0!==e&&(a.oldValue=e)}}else a&&(a.set="update");this.#A&&this.onInsert?.(t,e,t===n?"update":"replace")}if(0===i||this.#z||this.#R(),this.#z&&(l||this.#j(c,i,s),a&&this.#F(a,c)),!r&&this.#$&&this.#v){let e;let t=this.#v;for(;e=t?.shift();)this.#r?.(...e)}return this}pop(){try{for(;this.#u;){let e=this.#p[this.#g];if(this.#B(!0),this.#O(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(void 0!==e)return e}}finally{if(this.#$&&this.#v){let e;let t=this.#v;for(;e=t?.shift();)this.#r?.(...e)}}}#B(e){let t=this.#g,n=this.#d[t],i=this.#p[t];return this.#x&&this.#O(i)?i.__abortController.abort(Error("evicted")):(this.#k||this.#$)&&(this.#k&&this.#i?.(i,n,"evict"),this.#$&&this.#v?.push([i,n,"evict"])),this.#M(t),this.#S?.[t]&&(clearTimeout(this.#S[t]),this.#S[t]=void 0),e&&(this.#d[t]=void 0,this.#p[t]=void 0,this.#_.push(t)),1===this.#u?(this.#g=this.#y=0,this.#_.length=0):this.#g=this.#f[t],this.#h.delete(n),this.#u--,t}has(e,t={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=t,s=this.#h.get(e);if(void 0!==s){let e=this.#p[s];if(this.#O(e)&&void 0===e.__staleWhileFetching)return!1;if(!this.#P(s))return n&&this.#L(s),i&&(i.has="hit",this.#F(i,s)),!0;i&&(i.has="stale",this.#F(i,s))}else i&&(i.has="miss");return!1}peek(e,t={}){let{allowStale:n=this.allowStale}=t,i=this.#h.get(e);if(void 0===i||!n&&this.#P(i))return;let s=this.#p[i];return this.#O(s)?s.__staleWhileFetching:s}#I(e,t,n,i){let s=void 0===t?void 0:this.#p[t];if(this.#O(s))return s;let r=new a,{signal:o}=n;o?.addEventListener("abort",()=>r.abort(o.reason),{signal:r.signal});let l={signal:r.signal,options:n,context:i},u=(i,s=!1)=>{let{aborted:o}=r.signal,a=n.ignoreFetchAbort&&void 0!==i;if(n.status&&(o&&!s?(n.status.fetchAborted=!0,n.status.fetchError=r.signal.reason,a&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),o&&!a&&!s)return c(r.signal.reason);let u=this.#p[t];return(u===h||a&&s&&void 0===u)&&(void 0===i?void 0!==h.__staleWhileFetching?this.#p[t]=h.__staleWhileFetching:this.#C(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,i,l.options))),i},c=i=>{let{aborted:s}=r.signal,o=s&&n.allowStaleOnFetchAbort,a=o||n.allowStaleOnFetchRejection,l=a||n.noDeleteOnFetchRejection;if(this.#p[t]!==h||(l&&void 0!==h.__staleWhileFetching?o||(this.#p[t]=h.__staleWhileFetching):this.#C(e,"fetch")),a)return n.status&&void 0!==h.__staleWhileFetching&&(n.status.returnedStale=!0),h.__staleWhileFetching;if(h.__returned===h)throw i};n.status&&(n.status.fetchDispatched=!0);let h=new Promise((t,i)=>{let o=this.#o?.(e,s,l);o&&o instanceof Promise&&o.then(e=>t(void 0===e?void 0:e),i),r.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(t(void 0),n.allowStaleOnFetchAbort&&(t=e=>u(e,!0)))})}).then(u,e=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=e),c(e))),d=Object.assign(h,{__abortController:r,__staleWhileFetching:s,__returned:void 0});return void 0===t?(this.set(e,d,{...l.options,status:void 0}),t=this.#h.get(e)):this.#p[t]=d,d}#O(e){return!!this.#x&&!!e&&e instanceof Promise&&e.hasOwnProperty("__staleWhileFetching")&&e.__abortController instanceof a}async fetch(e,t={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:r=this.ttl,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:c=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:h=this.allowStaleOnFetchRejection,ignoreFetchAbort:d=this.ignoreFetchAbort,allowStaleOnFetchAbort:p=this.allowStaleOnFetchAbort,context:f,forceRefresh:m=!1,status:g,signal:y}=t;if(!this.#x)return g&&(g.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:s,status:g});let _={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:s,ttl:r,noDisposeOnSet:o,size:a,sizeCalculation:l,noUpdateTTL:u,noDeleteOnFetchRejection:c,allowStaleOnFetchRejection:h,allowStaleOnFetchAbort:p,ignoreFetchAbort:d,status:g,signal:y},v=this.#h.get(e);if(void 0===v){g&&(g.fetch="miss");let t=this.#I(e,v,_,f);return t.__returned=t}{let t=this.#p[v];if(this.#O(t)){let e=n&&void 0!==t.__staleWhileFetching;return g&&(g.fetch="inflight",e&&(g.returnedStale=!0)),e?t.__staleWhileFetching:t.__returned=t}let s=this.#P(v);if(!m&&!s)return g&&(g.fetch="hit"),this.#T(v),i&&this.#L(v),g&&this.#F(g,v),t;let r=this.#I(e,v,_,f),o=void 0!==r.__staleWhileFetching&&n;return g&&(g.fetch=s?"stale":"refresh",o&&s&&(g.returnedStale=!0)),o?r.__staleWhileFetching:r.__returned=r}}async forceFetch(e,t={}){let n=await this.fetch(e,t);if(void 0===n)throw Error("fetch() returned undefined");return n}memo(e,t={}){let n=this.#a;if(!n)throw Error("no memoMethod provided to constructor");let{context:i,forceRefresh:s,...r}=t,o=this.get(e,r);if(!s&&void 0!==o)return o;let a=n(e,o,{options:r,context:i});return this.set(e,a,r),a}get(e,t={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:r}=t,o=this.#h.get(e);if(void 0!==o){let t=this.#p[o],a=this.#O(t);return(r&&this.#F(r,o),this.#P(o))?(r&&(r.get="stale"),a)?(r&&n&&void 0!==t.__staleWhileFetching&&(r.returnedStale=!0),n?t.__staleWhileFetching:void 0):(s||this.#C(e,"expire"),r&&n&&(r.returnedStale=!0),n?t:void 0):(r&&(r.get="hit"),a)?t.__staleWhileFetching:(this.#T(o),i&&this.#L(o),t)}r&&(r.get="miss")}#J(e,t){this.#m[t]=e,this.#f[e]=t}#T(e){e!==this.#y&&(e===this.#g?this.#g=this.#f[e]:this.#J(this.#m[e],this.#f[e]),this.#J(this.#y,e),this.#y=e)}delete(e){return this.#C(e,"delete")}#C(e,t){let n=!1;if(0!==this.#u){let i=this.#h.get(e);if(void 0!==i){if(this.#S?.[i]&&(clearTimeout(this.#S?.[i]),this.#S[i]=void 0),n=!0,1===this.#u)this.#V(t);else{this.#M(i);let n=this.#p[i];if(this.#O(n)?n.__abortController.abort(Error("deleted")):(this.#k||this.#$)&&(this.#k&&this.#i?.(n,e,t),this.#$&&this.#v?.push([n,e,t])),this.#h.delete(e),this.#d[i]=void 0,this.#p[i]=void 0,i===this.#y)this.#y=this.#m[i];else if(i===this.#g)this.#g=this.#f[i];else{let e=this.#m[i];this.#f[e]=this.#f[i];let t=this.#f[i];this.#m[t]=this.#m[i]}this.#u--,this.#_.push(i)}}}if(this.#$&&this.#v?.length){let e;let t=this.#v;for(;e=t?.shift();)this.#r?.(...e)}return n}clear(){return this.#V("delete")}#V(e){for(let t of this.#N({allowStale:!0})){let n=this.#p[t];if(this.#O(n))n.__abortController.abort(Error("deleted"));else{let i=this.#d[t];this.#k&&this.#i?.(n,i,e),this.#$&&this.#v?.push([n,i,e])}}if(this.#h.clear(),this.#p.fill(void 0),this.#d.fill(void 0),this.#z&&this.#w){for(let e of(this.#z.fill(0),this.#w.fill(0),this.#S??[]))void 0!==e&&clearTimeout(e);this.#S?.fill(void 0)}if(this.#b&&this.#b.fill(0),this.#g=0,this.#y=0,this.#_.length=0,this.#c=0,this.#u=0,this.#$&&this.#v){let e;let t=this.#v;for(;e=t?.shift();)this.#r?.(...e)}}}},1088:(e,t,n)=>{var i,s,r,o,a,l,u,c,h,d,p,f,m,g,y,_,v,b,w,z,S,k,x,$,A,O,I,T,E,N,P,Z,R,j,C,L,F,M,D,U,B,W,J,V,q,X,H,K,G,Y,Q,ee,et,en,ei,es,er,eo,ea,el,eu,ec,eh,ed,ep,ef,em,eg,ey,e_,ev,eb,ew,ez,eS,ek;let ex,e$,eA,eO;function eI(e,t,n,i,s){if("m"===i)throw TypeError("Private method is not writable");if("a"===i&&!s)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?s.call(e,n):s?s.value=n:t.set(e,n),n}function eT(e,t,n,i){if("a"===n&&!i)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)}n.d(t,{r3:()=>ib,ZP:()=>iv});let eE=function(){let{crypto:e}=globalThis;if(e?.randomUUID)return eE=e.randomUUID.bind(e),e.randomUUID();let t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>255*Math.random()&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(+e^n()&15>>+e/4).toString(16))};function eN(e){return"object"==typeof e&&null!==e&&("name"in e&&"AbortError"===e.name||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}let eP=e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e){try{if("[object Error]"===Object.prototype.toString.call(e)){let t=Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return Error(JSON.stringify(e))}catch{}}return Error(e)};class eZ extends Error{}class eR extends eZ{constructor(e,t,n,i){super(`${eR.makeMessage(e,t,n)}`),this.status=e,this.headers=i,this.requestID=i?.get("x-request-id"),this.error=t,this.code=t?.code,this.param=t?.param,this.type=t?.type}static makeMessage(e,t,n){let i=t?.message?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,t,n,i){if(!e||!i)return new eC({message:n,cause:eP(t)});let s=t?.error;return 400===e?new eF(e,s,n,i):401===e?new eM(e,s,n,i):403===e?new eD(e,s,n,i):404===e?new eU(e,s,n,i):409===e?new eB(e,s,n,i):422===e?new eW(e,s,n,i):429===e?new eJ(e,s,n,i):e>=500?new eV(e,s,n,i):new eR(e,s,n,i)}}class ej extends eR{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class eC extends eR{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class eL extends eC{constructor({message:e}={}){super({message:e??"Request timed out."})}}class eF extends eR{}class eM extends eR{}class eD extends eR{}class eU extends eR{}class eB extends eR{}class eW extends eR{}class eJ extends eR{}class eV extends eR{}class eq extends eZ{constructor(){super("Could not parse response content as the length limit was reached")}}class eX extends eZ{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class eH extends Error{constructor(e){super(e)}}let eK=/^[a-z][a-z0-9+.-]*:/i,eG=e=>eK.test(e),eY=e=>(eY=Array.isArray)(e),eQ=eY;function e0(e){return"object"!=typeof e?{}:e??{}}function e1(e){return null!=e&&"object"==typeof e&&!Array.isArray(e)}let e2=(e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw new eZ(`${e} must be an integer`);if(t<0)throw new eZ(`${e} must be a positive integer`);return t},e4=e=>{try{return JSON.parse(e)}catch(e){return}},e6=e=>new Promise(t=>setTimeout(t,e)),e9="6.15.0",e3=()=>"undefined"!=typeof window&&void 0!==window.document&&"undefined"!=typeof navigator,e8=()=>{let e="undefined"!=typeof Deno&&null!=Deno.build?"deno":"undefined"!=typeof EdgeRuntime?"edge":"[object process]"===Object.prototype.toString.call(void 0!==globalThis.process?globalThis.process:0)?"node":"unknown";if("deno"===e)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e9,"X-Stainless-OS":e7(Deno.build.os),"X-Stainless-Arch":e5(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e9,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if("node"===e)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e9,"X-Stainless-OS":e7(globalThis.process.platform??"unknown"),"X-Stainless-Arch":e5(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};let t=function(){if("undefined"==typeof navigator||!navigator)return null;for(let{key:e,pattern:t}of[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}]){let n=t.exec(navigator.userAgent);if(n){let t=n[1]||0,i=n[2]||0,s=n[3]||0;return{browser:e,version:`${t}.${i}.${s}`}}}return null}();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e9,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e9,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}},e5=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",e7=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown",te=()=>ex??(ex=e8());function tt(...e){let t=globalThis.ReadableStream;if(void 0===t)throw Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function tn(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return tt({start(){},async pull(e){let{done:n,value:i}=await t.next();n?e.close():e.enqueue(i)},async cancel(){await t.return?.()}})}function ti(e){if(e[Symbol.asyncIterator])return e;let t=e.getReader();return{async next(){try{let e=await t.read();return e?.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){let e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function ts(e){if(null===e||"object"!=typeof e)return;if(e[Symbol.asyncIterator]){await e[Symbol.asyncIterator]().return?.();return}let t=e.getReader(),n=t.cancel();t.releaseLock(),await n}let tr=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)}),to="RFC3986",ta=e=>String(e),tl={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:ta},tu=(e,t)=>(tu=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty))(e,t),tc=(()=>{let e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})();function th(e,t){if(eY(e)){let n=[];for(let i=0;i<e.length;i+=1)n.push(t(e[i]));return n}return t(e)}let td={brackets:e=>String(e)+"[]",comma:"comma",indices:(e,t)=>String(e)+"["+t+"]",repeat:e=>String(e)},tp=function(e,t){Array.prototype.push.apply(e,eY(t)?t:[t])},tf={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:(e,t,n,i,s)=>{if(0===e.length)return e;let r=e;if("symbol"==typeof e?r=Symbol.prototype.toString.call(e):"string"!=typeof e&&(r=String(e)),"iso-8859-1"===n)return escape(r).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});let o="";for(let e=0;e<r.length;e+=1024){let t=r.length>=1024?r.slice(e,e+1024):r,n=[];for(let e=0;e<t.length;++e){let i=t.charCodeAt(e);if(45===i||46===i||95===i||126===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122||"RFC1738"===s&&(40===i||41===i)){n[n.length]=t.charAt(e);continue}if(i<128){n[n.length]=tc[i];continue}if(i<2048){n[n.length]=tc[192|i>>6]+tc[128|63&i];continue}if(i<55296||i>=57344){n[n.length]=tc[224|i>>12]+tc[128|i>>6&63]+tc[128|63&i];continue}e+=1,i=65536+((1023&i)<<10|1023&t.charCodeAt(e)),n[n.length]=tc[240|i>>18]+tc[128|i>>12&63]+tc[128|i>>6&63]+tc[128|63&i]}o+=n.join("")}return o},encodeValuesOnly:!1,format:to,formatter:ta,indices:!1,serializeDate:e=>(e$??(e$=Function.prototype.call.bind(Date.prototype.toISOString)))(e),skipNulls:!1,strictNullHandling:!1},tm={};function tg(e){let t;return(eA??(eA=(t=new globalThis.TextEncoder).encode.bind(t)))(e)}function ty(e){let t;return(eO??(eO=(t=new globalThis.TextDecoder).decode.bind(t)))(e)}class t_{constructor(){i.set(this,void 0),s.set(this,void 0),eI(this,i,new Uint8Array,"f"),eI(this,s,null,"f")}decode(e){let t;if(null==e)return[];let n=e instanceof ArrayBuffer?new Uint8Array(e):"string"==typeof e?tg(e):e;eI(this,i,function(e){let t=0;for(let n of e)t+=n.length;let n=new Uint8Array(t),i=0;for(let t of e)n.set(t,i),i+=t.length;return n}([eT(this,i,"f"),n]),"f");let r=[];for(;null!=(t=function(e,t){for(let n=t??0;n<e.length;n++){if(10===e[n])return{preceding:n,index:n+1,carriage:!1};if(13===e[n])return{preceding:n,index:n+1,carriage:!0}}return null}(eT(this,i,"f"),eT(this,s,"f")));){if(t.carriage&&null==eT(this,s,"f")){eI(this,s,t.index,"f");continue}if(null!=eT(this,s,"f")&&(t.index!==eT(this,s,"f")+1||t.carriage)){r.push(ty(eT(this,i,"f").subarray(0,eT(this,s,"f")-1))),eI(this,i,eT(this,i,"f").subarray(eT(this,s,"f")),"f"),eI(this,s,null,"f");continue}let e=null!==eT(this,s,"f")?t.preceding-1:t.preceding,n=ty(eT(this,i,"f").subarray(0,e));r.push(n),eI(this,i,eT(this,i,"f").subarray(t.index),"f"),eI(this,s,null,"f")}return r}flush(){return eT(this,i,"f").length?this.decode("\n"):[]}}i=new WeakMap,s=new WeakMap,t_.NEWLINE_CHARS=new Set(["\n","\r"]),t_.NEWLINE_REGEXP=/\r\n|[\n\r]/g;let tv={off:0,error:200,warn:300,info:400,debug:500},tb=(e,t,n)=>{if(e){if(Object.prototype.hasOwnProperty.call(tv,e))return e;tx(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(tv))}`)}};function tw(){}function tz(e,t,n){return!t||tv[e]>tv[n]?tw:t[e].bind(t)}let tS={error:tw,warn:tw,info:tw,debug:tw},tk=new WeakMap;function tx(e){let t=e.logger,n=e.logLevel??"off";if(!t)return tS;let i=tk.get(t);if(i&&i[0]===n)return i[1];let s={error:tz("error",t,n),warn:tz("warn",t,n),info:tz("info",t,n),debug:tz("debug",t,n)};return tk.set(t,[n,s]),s}let t$=e=>(e.options&&(e.options={...e.options},delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([e,t])=>[e,"authorization"===e.toLowerCase()||"cookie"===e.toLowerCase()||"set-cookie"===e.toLowerCase()?"***":t]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);class tA{constructor(e,t,n){this.iterator=e,r.set(this,void 0),this.controller=t,eI(this,r,n,"f")}static fromSSEResponse(e,t,n){let i=!1,s=n?tx(n):console;return new tA(async function*(){if(i)throw new eZ("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let n=!1;try{for await(let i of tO(e,t))if(!n){if(i.data.startsWith("[DONE]")){n=!0;continue}if(null!==i.event&&i.event.startsWith("thread.")){let e;try{e=JSON.parse(i.data)}catch(e){throw console.error("Could not parse message into JSON:",i.data),console.error("From chunk:",i.raw),e}if("error"==i.event)throw new eR(void 0,e.error,e.message,void 0);yield{event:i.event,data:e}}else{let t;try{t=JSON.parse(i.data)}catch(e){throw s.error("Could not parse message into JSON:",i.data),s.error("From chunk:",i.raw),e}if(t&&t.error)throw new eR(void 0,t.error,void 0,e.headers);yield t}}n=!0}catch(e){if(eN(e))return;throw e}finally{n||t.abort()}},t,n)}static fromReadableStream(e,t,n){let i=!1;async function*s(){let t=new t_;for await(let n of ti(e))for(let e of t.decode(n))yield e;for(let e of t.flush())yield e}return new tA(async function*(){if(i)throw new eZ("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let e=!1;try{for await(let t of s())!e&&t&&(yield JSON.parse(t));e=!0}catch(e){if(eN(e))return;throw e}finally{e||t.abort()}},t,n)}[(r=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){let e=[],t=[],n=this.iterator(),i=i=>({next:()=>{if(0===i.length){let i=n.next();e.push(i),t.push(i)}return i.shift()}});return[new tA(()=>i(e),this.controller,eT(this,r,"f")),new tA(()=>i(t),this.controller,eT(this,r,"f"))]}toReadableStream(){let e;let t=this;return tt({async start(){e=t[Symbol.asyncIterator]()},async pull(t){try{let{value:n,done:i}=await e.next();if(i)return t.close();let s=tg(JSON.stringify(n)+"\n");t.enqueue(s)}catch(e){t.error(e)}},async cancel(){await e.return?.()}})}}async function*tO(e,t){if(!e.body){if(t.abort(),void 0!==globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new eZ("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new eZ("Attempted to iterate over a response with no body")}let n=new tT,i=new t_;for await(let t of tI(ti(e.body)))for(let e of i.decode(t)){let t=n.decode(e);t&&(yield t)}for(let e of i.flush()){let t=n.decode(e);t&&(yield t)}}async function*tI(e){let t=new Uint8Array;for await(let n of e){let e;if(null==n)continue;let i=n instanceof ArrayBuffer?new Uint8Array(n):"string"==typeof n?tg(n):n,s=new Uint8Array(t.length+i.length);for(s.set(t),s.set(i,t.length),t=s;-1!==(e=function(e){for(let t=0;t<e.length-1;t++){if(10===e[t]&&10===e[t+1]||13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return -1}(t));)yield t.slice(0,e),t=t.slice(e)}t.length>0&&(yield t)}class tT{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,n,i]=function(e,t){let n=e.indexOf(":");return -1!==n?[e.substring(0,n),":",e.substring(n+t.length)]:[e,"",""]}(e,":");return i.startsWith(" ")&&(i=i.substring(1)),"event"===t?this.event=i:"data"===t&&this.data.push(i),null}}async function tE(e,t){let{response:n,requestLogID:i,retryOfRequestLogID:s,startTime:r}=t,o=await (async()=>{if(t.options.stream)return(tx(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass)?t.options.__streamClass.fromSSEResponse(n,t.controller,e):tA.fromSSEResponse(n,t.controller,e);if(204===n.status)return null;if(t.options.__binaryResponse)return n;let i=n.headers.get("content-type"),s=i?.split(";")[0]?.trim();return s?.includes("application/json")||s?.endsWith("+json")?tN(await n.json(),n):await n.text()})();return tx(e).debug(`[${i}] response parsed`,t$({retryOfRequestLogID:s,url:n.url,status:n.status,body:o,durationMs:Date.now()-r})),o}function tN(e,t){return!e||"object"!=typeof e||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}class tP extends Promise{constructor(e,t,n=tE){super(e=>{e(null)}),this.responsePromise=t,this.parseResponse=n,o.set(this,void 0),eI(this,o,e,"f")}_thenUnwrap(e){return new tP(eT(this,o,"f"),this.responsePromise,async(t,n)=>tN(e(await this.parseResponse(t,n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(eT(this,o,"f"),e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}o=new WeakMap;class tZ{constructor(e,t,n,i){a.set(this,void 0),eI(this,a,e,"f"),this.options=i,this.response=t,this.body=n}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageRequestOptions()}async getNextPage(){let e=this.nextPageRequestOptions();if(!e)throw new eZ("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await eT(this,a,"f").requestAPIList(this.constructor,e)}async *iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async *[(a=new WeakMap,Symbol.asyncIterator)](){for await(let e of this.iterPages())for(let t of e.getPaginatedItems())yield t}}class tR extends tP{constructor(e,t,n){super(e,t,async(e,t)=>new n(e,t.response,await tE(e,t),t.options))}async *[Symbol.asyncIterator](){for await(let e of(await this))yield e}}class tj extends tZ{constructor(e,t,n,i){super(e,t,n,i),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class tC extends tZ{constructor(e,t,n,i){super(e,t,n,i),this.data=n.data||[],this.has_more=n.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageRequestOptions(){let e=this.getPaginatedItems(),t=e[e.length-1]?.id;return t?{...this.options,query:{...e0(this.options.query),after:t}}:null}}class tL extends tZ{constructor(e,t,n,i){super(e,t,n,i),this.data=n.data||[],this.has_more=n.has_more||!1,this.last_id=n.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageRequestOptions(){let e=this.last_id;return e?{...this.options,query:{...e0(this.options.query),after:e}}:null}}let tF=()=>{if("undefined"==typeof File){let{process:e}=globalThis;throw Error("`File` is not defined as a global, which is required for file uploads."+("string"==typeof e?.versions?.node&&20>parseInt(e.versions.node.split("."))?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function tM(e,t,n){return tF(),new File(e,t??"unknown_file",n)}function tD(e){return("object"==typeof e&&null!==e&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}let tU=e=>null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator],tB=async(e,t)=>tH(e.body)?{...e,body:await tV(e.body,t)}:e,tW=async(e,t)=>({...e,body:await tV(e.body,t)}),tJ=new WeakMap,tV=async(e,t)=>{if(!await function(e){let t="function"==typeof e?e:e.fetch,n=tJ.get(t);if(n)return n;let i=(async()=>{try{let e="Response"in t?t.Response:(await t("data:,")).constructor,n=new FormData;if(n.toString()===await new e(n).text())return!1;return!0}catch{return!0}})();return tJ.set(t,i),i}(t))throw TypeError("The provided fetch function does not support file uploads with the current global FormData class.");let n=new FormData;return await Promise.all(Object.entries(e||{}).map(([e,t])=>tK(n,e,t))),n},tq=e=>e instanceof Blob&&"name"in e,tX=e=>"object"==typeof e&&null!==e&&(e instanceof Response||tU(e)||tq(e)),tH=e=>{if(tX(e))return!0;if(Array.isArray(e))return e.some(tH);if(e&&"object"==typeof e){for(let t in e)if(tH(e[t]))return!0}return!1},tK=async(e,t,n)=>{if(void 0!==n){if(null==n)throw TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if("string"==typeof n||"number"==typeof n||"boolean"==typeof n)e.append(t,String(n));else if(n instanceof Response)e.append(t,tM([await n.blob()],tD(n)));else if(tU(n))e.append(t,tM([await new Response(tn(n)).blob()],tD(n)));else if(tq(n))e.append(t,n,tD(n));else if(Array.isArray(n))await Promise.all(n.map(n=>tK(e,t+"[]",n)));else if("object"==typeof n)await Promise.all(Object.entries(n).map(([n,i])=>tK(e,`${t}[${n}]`,i)));else throw TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},tG=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer,tY=e=>null!=e&&"object"==typeof e&&"string"==typeof e.name&&"number"==typeof e.lastModified&&tG(e),tQ=e=>null!=e&&"object"==typeof e&&"string"==typeof e.url&&"function"==typeof e.blob;async function t0(e,t,n){if(tF(),tY(e=await e))return e instanceof File?e:tM([await e.arrayBuffer()],e.name);if(tQ(e)){let i=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),tM(await t1(i),t,n)}let i=await t1(e);if(t||(t=tD(e)),!n?.type){let e=i.find(e=>"object"==typeof e&&"type"in e&&e.type);"string"==typeof e&&(n={...n,type:e})}return tM(i,t,n)}async function t1(e){let t=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(tG(e))t.push(e instanceof Blob?e:await e.arrayBuffer());else if(tU(e))for await(let n of e)t.push(...await t1(n));else{let t=e?.constructor?.name;throw Error(`Unexpected data type: ${typeof e}${t?`; constructor: ${t}`:""}${function(e){if("object"!=typeof e||null===e)return"";let t=Object.getOwnPropertyNames(e);return`; props: [${t.map(e=>`"${e}"`).join(", ")}]`}(e)}`)}return t}class t2{constructor(e){this._client=e}}function t4(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}let t6=Object.freeze(Object.create(null)),t9=((e=t4)=>function(t,...n){let i;if(1===t.length)return t[0];let s=!1,r=[],o=t.reduce((t,i,o)=>{/[?#]/.test(i)&&(s=!0);let a=n[o],l=(s?encodeURIComponent:e)(""+a);return o!==n.length&&(null==a||"object"==typeof a&&a.toString===Object.getPrototypeOf(Object.getPrototypeOf(a.hasOwnProperty??t6)??t6)?.toString)&&(l=a+"",r.push({start:t.length+i.length,length:l.length,error:`Value of type ${Object.prototype.toString.call(a).slice(8,-1)} is not a valid path parameter`})),t+i+(o===n.length?"":l)},""),a=o.split(/[?#]/,1)[0],l=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;for(;null!==(i=l.exec(a));)r.push({start:i.index,length:i[0].length,error:`Value "${i[0]}" can't be safely passed as a path parameter`});if(r.sort((e,t)=>e.start-t.start),r.length>0){let e=0,t=r.reduce((t,n)=>{let i=" ".repeat(n.start-e),s="^".repeat(n.length);return e=n.start+n.length,t+i+s},"");throw new eZ(`Path parameters result in path with invalid segments:
${r.map(e=>e.error).join("\n")}
${o}
${t}`)}return o})(t4);class t3 extends t2{list(e,t={},n){return this._client.getAPIList(t9`/chat/completions/${e}/messages`,tC,{query:t,...n})}}function t8(e){return void 0!==e&&"function"in e&&void 0!==e.function}function t5(e){return e?.$brand==="auto-parseable-response-format"}function t7(e){return e?.$brand==="auto-parseable-tool"}function ne(e,t){let n=e.choices.map(e=>{var n;if("length"===e.finish_reason)throw new eq;if("content_filter"===e.finish_reason)throw new eX;return nn(e.message.tool_calls),{...e,message:{...e.message,...e.message.tool_calls?{tool_calls:e.message.tool_calls?.map(e=>(function(e,t){let n=e.tools?.find(e=>t8(e)&&e.function?.name===t.function.name);return{...t,function:{...t.function,parsed_arguments:t7(n)?n.$parseRaw(t.function.arguments):n?.function.strict?JSON.parse(t.function.arguments):null}}})(t,e))??void 0}:void 0,parsed:e.message.content&&!e.message.refusal?(n=e.message.content,t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(n):JSON.parse(n):null):null}}});return{...e,choices:n}}function nt(e){return!!t5(e.response_format)||(e.tools?.some(e=>t7(e)||"function"===e.type&&!0===e.function.strict)??!1)}function nn(e){for(let t of e||[])if("function"!==t.type)throw new eZ(`Currently only \`function\` tool calls are supported; Received \`${t.type}\``)}let ni=e=>e?.role==="assistant",ns=e=>e?.role==="tool";class nr{constructor(){l.add(this),this.controller=new AbortController,u.set(this,void 0),c.set(this,()=>{}),h.set(this,()=>{}),d.set(this,void 0),p.set(this,()=>{}),f.set(this,()=>{}),m.set(this,{}),g.set(this,!1),y.set(this,!1),_.set(this,!1),v.set(this,!1),eI(this,u,new Promise((e,t)=>{eI(this,c,e,"f"),eI(this,h,t,"f")}),"f"),eI(this,d,new Promise((e,t)=>{eI(this,p,e,"f"),eI(this,f,t,"f")}),"f"),eT(this,u,"f").catch(()=>{}),eT(this,d,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},eT(this,l,"m",b).bind(this))},0)}_connected(){this.ended||(eT(this,c,"f").call(this),this._emit("connect"))}get ended(){return eT(this,g,"f")}get errored(){return eT(this,y,"f")}get aborted(){return eT(this,_,"f")}abort(){this.controller.abort()}on(e,t){return(eT(this,m,"f")[e]||(eT(this,m,"f")[e]=[])).push({listener:t}),this}off(e,t){let n=eT(this,m,"f")[e];if(!n)return this;let i=n.findIndex(e=>e.listener===t);return i>=0&&n.splice(i,1),this}once(e,t){return(eT(this,m,"f")[e]||(eT(this,m,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,n)=>{eI(this,v,!0,"f"),"error"!==e&&this.once("error",n),this.once(e,t)})}async done(){eI(this,v,!0,"f"),await eT(this,d,"f")}_emit(e,...t){if(eT(this,g,"f"))return;"end"===e&&(eI(this,g,!0,"f"),eT(this,p,"f").call(this));let n=eT(this,m,"f")[e];if(n&&(eT(this,m,"f")[e]=n.filter(e=>!e.once),n.forEach(({listener:e})=>e(...t))),"abort"===e){let e=t[0];eT(this,v,"f")||n?.length||Promise.reject(e),eT(this,h,"f").call(this,e),eT(this,f,"f").call(this,e),this._emit("end");return}if("error"===e){let e=t[0];eT(this,v,"f")||n?.length||Promise.reject(e),eT(this,h,"f").call(this,e),eT(this,f,"f").call(this,e),this._emit("end")}}_emitFinal(){}}u=new WeakMap,c=new WeakMap,h=new WeakMap,d=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap,g=new WeakMap,y=new WeakMap,_=new WeakMap,v=new WeakMap,l=new WeakSet,b=function(e){if(eI(this,y,!0,"f"),e instanceof Error&&"AbortError"===e.name&&(e=new ej),e instanceof ej)return eI(this,_,!0,"f"),this._emit("abort",e);if(e instanceof eZ)return this._emit("error",e);if(e instanceof Error){let t=new eZ(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new eZ(String(e)))};class no extends nr{constructor(){super(...arguments),w.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);let t=e.choices[0]?.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),ns(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(ni(e)&&e.tool_calls)for(let t of e.tool_calls)"function"===t.type&&this._emit("functionToolCall",t.function)}}async finalChatCompletion(){await this.done();let e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new eZ("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),eT(this,w,"m",z).call(this)}async finalMessage(){return await this.done(),eT(this,w,"m",S).call(this)}async finalFunctionToolCall(){return await this.done(),eT(this,w,"m",k).call(this)}async finalFunctionToolCallResult(){return await this.done(),eT(this,w,"m",x).call(this)}async totalUsage(){return await this.done(),eT(this,w,"m",$).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){let e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);let t=eT(this,w,"m",S).call(this);t&&this._emit("finalMessage",t);let n=eT(this,w,"m",z).call(this);n&&this._emit("finalContent",n);let i=eT(this,w,"m",k).call(this);i&&this._emit("finalFunctionToolCall",i);let s=eT(this,w,"m",x).call(this);null!=s&&this._emit("finalFunctionToolCallResult",s),this._chatCompletions.some(e=>e.usage)&&this._emit("totalUsage",eT(this,w,"m",$).call(this))}async _createChatCompletion(e,t,n){let i=n?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),eT(this,w,"m",A).call(this,t);let s=await e.chat.completions.create({...t,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(ne(s,t))}async _runChatCompletion(e,t,n){for(let e of t.messages)this._addMessage(e,!1);return await this._createChatCompletion(e,t,n)}async _runTools(e,t,n){let i="tool",{tool_choice:s="auto",stream:r,...o}=t,a="string"!=typeof s&&"function"===s.type&&s?.function?.name,{maxChatCompletions:l=10}=n||{},u=t.tools.map(e=>{if(t7(e)){if(!e.$callback)throw new eZ("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:e.$callback,name:e.function.name,description:e.function.description||"",parameters:e.function.parameters,parse:e.$parseRaw,strict:!0}}}return e}),c={};for(let e of u)"function"===e.type&&(c[e.function.name||e.function.function.name]=e.function);let h="tools"in t?u.map(e=>"function"===e.type?{type:"function",function:{name:e.function.name||e.function.function.name,parameters:e.function.parameters,description:e.function.description,strict:e.function.strict}}:e):void 0;for(let e of t.messages)this._addMessage(e,!1);for(let t=0;t<l;++t){let t=await this._createChatCompletion(e,{...o,tool_choice:s,tools:h,messages:[...this.messages]},n),r=t.choices[0]?.message;if(!r)throw new eZ("missing message in ChatCompletion response");if(!r.tool_calls?.length)break;for(let e of r.tool_calls){let t;if("function"!==e.type)continue;let n=e.id,{name:s,arguments:r}=e.function,o=c[s];if(o){if(a&&a!==s){let e=`Invalid tool_call: ${JSON.stringify(s)}. ${JSON.stringify(a)} requested. Please try again`;this._addMessage({role:i,tool_call_id:n,content:e});continue}}else{let e=`Invalid tool_call: ${JSON.stringify(s)}. Available options are: ${Object.keys(c).map(e=>JSON.stringify(e)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:n,content:e});continue}try{t="function"==typeof o.parse?await o.parse(r):r}catch(t){let e=t instanceof Error?t.message:String(t);this._addMessage({role:i,tool_call_id:n,content:e});continue}let l=await o.function(t,this),u=eT(this,w,"m",O).call(this,l);if(this._addMessage({role:i,tool_call_id:n,content:u}),a)return}}}}w=new WeakSet,z=function(){return eT(this,w,"m",S).call(this).content??null},S=function(){let e=this.messages.length;for(;e-- >0;){let t=this.messages[e];if(ni(t))return{...t,content:t.content??null,refusal:t.refusal??null}}throw new eZ("stream ended without producing a ChatCompletionMessage with role=assistant")},k=function(){for(let e=this.messages.length-1;e>=0;e--){let t=this.messages[e];if(ni(t)&&t?.tool_calls?.length)return t.tool_calls.filter(e=>"function"===e.type).at(-1)?.function}},x=function(){for(let e=this.messages.length-1;e>=0;e--){let t=this.messages[e];if(ns(t)&&null!=t.content&&"string"==typeof t.content&&this.messages.some(e=>"assistant"===e.role&&e.tool_calls?.some(e=>"function"===e.type&&e.id===t.tool_call_id)))return t.content}},$=function(){let e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(let{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},A=function(e){if(null!=e.n&&e.n>1)throw new eZ("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},O=function(e){return"string"==typeof e?e:void 0===e?"undefined":JSON.stringify(e)};class na extends no{static runTools(e,t,n){let i=new na,s={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,t,s)),i}_addMessage(e,t=!0){super._addMessage(e,t),ni(e)&&e.content&&this._emit("content",e.content)}}let nl={STR:1,NUM:2,ARR:4,OBJ:8,NULL:16,BOOL:32,NAN:64,INFINITY:128,MINUS_INFINITY:256,ALL:511};class nu extends Error{}class nc extends Error{}let nh=(e,t)=>{let n=e.length,i=0,s=e=>{throw new nu(`${e} at position ${i}`)},r=e=>{throw new nc(`${e} at position ${i}`)},o=()=>(h(),i>=n&&s("Unexpected end of input"),'"'===e[i])?a():"{"===e[i]?l():"["===e[i]?u():"null"===e.substring(i,i+4)||nl.NULL&t&&n-i<4&&"null".startsWith(e.substring(i))?(i+=4,null):"true"===e.substring(i,i+4)||nl.BOOL&t&&n-i<4&&"true".startsWith(e.substring(i))?(i+=4,!0):"false"===e.substring(i,i+5)||nl.BOOL&t&&n-i<5&&"false".startsWith(e.substring(i))?(i+=5,!1):"Infinity"===e.substring(i,i+8)||nl.INFINITY&t&&n-i<8&&"Infinity".startsWith(e.substring(i))?(i+=8,1/0):"-Infinity"===e.substring(i,i+9)||nl.MINUS_INFINITY&t&&1<n-i&&n-i<9&&"-Infinity".startsWith(e.substring(i))?(i+=9,-1/0):"NaN"===e.substring(i,i+3)||nl.NAN&t&&n-i<3&&"NaN".startsWith(e.substring(i))?(i+=3,NaN):c(),a=()=>{let o=i,a=!1;for(i++;i<n&&('"'!==e[i]||a&&"\\"===e[i-1]);)a="\\"===e[i]&&!a,i++;if('"'==e.charAt(i))try{return JSON.parse(e.substring(o,++i-Number(a)))}catch(e){r(String(e))}else if(nl.STR&t)try{return JSON.parse(e.substring(o,i-Number(a))+'"')}catch(t){return JSON.parse(e.substring(o,e.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},l=()=>{i++,h();let r={};try{for(;"}"!==e[i];){if(h(),i>=n&&nl.OBJ&t)return r;let s=a();h(),i++;try{let e=o();Object.defineProperty(r,s,{value:e,writable:!0,enumerable:!0,configurable:!0})}catch(e){if(nl.OBJ&t)return r;throw e}h(),","===e[i]&&i++}}catch(e){if(nl.OBJ&t)return r;s("Expected '}' at end of object")}return i++,r},u=()=>{i++;let n=[];try{for(;"]"!==e[i];)n.push(o()),h(),","===e[i]&&i++}catch(e){if(nl.ARR&t)return n;s("Expected ']' at end of array")}return i++,n},c=()=>{if(0===i){"-"===e&&nl.NUM&t&&s("Not sure what '-' is");try{return JSON.parse(e)}catch(n){if(nl.NUM&t)try{if("."===e[e.length-1])return JSON.parse(e.substring(0,e.lastIndexOf(".")));return JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch(e){}r(String(n))}}let o=i;for("-"===e[i]&&i++;e[i]&&!",]}".includes(e[i]);)i++;i!=n||nl.NUM&t||s("Unterminated number literal");try{return JSON.parse(e.substring(o,i))}catch(n){"-"===e.substring(o,i)&&nl.NUM&t&&s("Not sure what '-' is");try{return JSON.parse(e.substring(o,e.lastIndexOf("e")))}catch(e){r(String(e))}}},h=()=>{for(;i<n&&" \n\r	".includes(e[i]);)i++};return o()},nd=e=>(function(e,t=nl.ALL){if("string"!=typeof e)throw TypeError(`expecting str, got ${typeof e}`);if(!e.trim())throw Error(`${e} is empty`);return nh(e.trim(),t)})(e,nl.ALL^nl.NUM);class np extends no{constructor(e){super(),I.add(this),T.set(this,void 0),E.set(this,void 0),N.set(this,void 0),eI(this,T,e,"f"),eI(this,E,[],"f")}get currentChatCompletionSnapshot(){return eT(this,N,"f")}static fromReadableStream(e){let t=new np(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,n){let i=new np(t);return i._run(()=>i._runChatCompletion(e,{...t,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,t,n){super._createChatCompletion;let i=n?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),eT(this,I,"m",P).call(this);let s=await e.chat.completions.create({...t,stream:!0},{...n,signal:this.controller.signal});for await(let e of(this._connected(),s))eT(this,I,"m",R).call(this,e);if(s.controller.signal?.aborted)throw new ej;return this._addChatCompletion(eT(this,I,"m",L).call(this))}async _fromReadableStream(e,t){let n;let i=t?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),eT(this,I,"m",P).call(this),this._connected();let s=tA.fromReadableStream(e,this.controller);for await(let e of s)n&&n!==e.id&&this._addChatCompletion(eT(this,I,"m",L).call(this)),eT(this,I,"m",R).call(this,e),n=e.id;if(s.controller.signal?.aborted)throw new ej;return this._addChatCompletion(eT(this,I,"m",L).call(this))}[(T=new WeakMap,E=new WeakMap,N=new WeakMap,I=new WeakSet,P=function(){this.ended||eI(this,N,void 0,"f")},Z=function(e){let t=eT(this,E,"f")[e.index];return t||(t={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},eT(this,E,"f")[e.index]=t),t},R=function(e){if(this.ended)return;let t=eT(this,I,"m",M).call(this,e);for(let n of(this._emit("chunk",e,t),e.choices)){let e=t.choices[n.index];null!=n.delta.content&&e.message?.role==="assistant"&&e.message?.content&&(this._emit("content",n.delta.content,e.message.content),this._emit("content.delta",{delta:n.delta.content,snapshot:e.message.content,parsed:e.message.parsed})),null!=n.delta.refusal&&e.message?.role==="assistant"&&e.message?.refusal&&this._emit("refusal.delta",{delta:n.delta.refusal,snapshot:e.message.refusal}),n.logprobs?.content!=null&&e.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:n.logprobs?.content,snapshot:e.logprobs?.content??[]}),n.logprobs?.refusal!=null&&e.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:n.logprobs?.refusal,snapshot:e.logprobs?.refusal??[]});let i=eT(this,I,"m",Z).call(this,e);for(let t of(e.finish_reason&&(eT(this,I,"m",C).call(this,e),null!=i.current_tool_call_index&&eT(this,I,"m",j).call(this,e,i.current_tool_call_index)),n.delta.tool_calls??[]))i.current_tool_call_index!==t.index&&(eT(this,I,"m",C).call(this,e),null!=i.current_tool_call_index&&eT(this,I,"m",j).call(this,e,i.current_tool_call_index)),i.current_tool_call_index=t.index;for(let t of n.delta.tool_calls??[]){let n=e.message.tool_calls?.[t.index];n?.type&&(n?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:n.function?.name,index:t.index,arguments:n.function.arguments,parsed_arguments:n.function.parsed_arguments,arguments_delta:t.function?.arguments??""}):n?.type)}}},j=function(e,t){if(eT(this,I,"m",Z).call(this,e).done_tool_calls.has(t))return;let n=e.message.tool_calls?.[t];if(!n)throw Error("no tool call snapshot");if(!n.type)throw Error("tool call snapshot missing `type`");if("function"===n.type){let e=eT(this,T,"f")?.tools?.find(e=>t8(e)&&e.function.name===n.function.name);this._emit("tool_calls.function.arguments.done",{name:n.function.name,index:t,arguments:n.function.arguments,parsed_arguments:t7(e)?e.$parseRaw(n.function.arguments):e?.function.strict?JSON.parse(n.function.arguments):null})}else n.type},C=function(e){let t=eT(this,I,"m",Z).call(this,e);if(e.message.content&&!t.content_done){t.content_done=!0;let n=eT(this,I,"m",F).call(this);this._emit("content.done",{content:e.message.content,parsed:n?n.$parseRaw(e.message.content):null})}e.message.refusal&&!t.refusal_done&&(t.refusal_done=!0,this._emit("refusal.done",{refusal:e.message.refusal})),e.logprobs?.content&&!t.logprobs_content_done&&(t.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:e.logprobs.content})),e.logprobs?.refusal&&!t.logprobs_refusal_done&&(t.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:e.logprobs.refusal}))},L=function(){if(this.ended)throw new eZ("stream has ended, this shouldn't happen");let e=eT(this,N,"f");if(!e)throw new eZ("request ended without sending any chunks");return eI(this,N,void 0,"f"),eI(this,E,[],"f"),function(e,t){var n;let{id:i,choices:s,created:r,model:o,system_fingerprint:a,...l}=e;return n={...l,id:i,choices:s.map(({message:t,finish_reason:n,index:i,logprobs:s,...r})=>{if(!n)throw new eZ(`missing finish_reason for choice ${i}`);let{content:o=null,function_call:a,tool_calls:l,...u}=t,c=t.role;if(!c)throw new eZ(`missing role for choice ${i}`);if(a){let{arguments:e,name:l}=a;if(null==e)throw new eZ(`missing function_call.arguments for choice ${i}`);if(!l)throw new eZ(`missing function_call.name for choice ${i}`);return{...r,message:{content:o,function_call:{arguments:e,name:l},role:c,refusal:t.refusal??null},finish_reason:n,index:i,logprobs:s}}return l?{...r,index:i,finish_reason:n,logprobs:s,message:{...u,role:c,content:o,refusal:t.refusal??null,tool_calls:l.map((t,n)=>{let{function:s,type:r,id:o,...a}=t,{arguments:l,name:u,...c}=s||{};if(null==o)throw new eZ(`missing choices[${i}].tool_calls[${n}].id
${nf(e)}`);if(null==r)throw new eZ(`missing choices[${i}].tool_calls[${n}].type
${nf(e)}`);if(null==u)throw new eZ(`missing choices[${i}].tool_calls[${n}].function.name
${nf(e)}`);if(null==l)throw new eZ(`missing choices[${i}].tool_calls[${n}].function.arguments
${nf(e)}`);return{...a,id:o,type:r,function:{...c,name:u,arguments:l}}})}}:{...r,message:{...u,content:o,role:c,refusal:t.refusal??null},finish_reason:n,index:i,logprobs:s}}),created:r,model:o,object:"chat.completion",...a?{system_fingerprint:a}:{}},t&&nt(t)?ne(n,t):{...n,choices:n.choices.map(e=>(nn(e.message.tool_calls),{...e,message:{...e.message,parsed:null,...e.message.tool_calls?{tool_calls:e.message.tool_calls}:void 0}}))}}(e,eT(this,T,"f"))},F=function(){let e=eT(this,T,"f")?.response_format;return t5(e)?e:null},M=function(e){var t,n,i,s;let r=eT(this,N,"f"),{choices:o,...a}=e;for(let{delta:o,finish_reason:l,index:u,logprobs:c=null,...h}of(r?Object.assign(r,a):r=eI(this,N,{...a,choices:[]},"f"),e.choices)){let e=r.choices[u];if(e||(e=r.choices[u]={finish_reason:l,index:u,message:{},logprobs:c,...h}),c){if(e.logprobs){let{content:i,refusal:s,...r}=c;Object.assign(e.logprobs,r),i&&((t=e.logprobs).content??(t.content=[]),e.logprobs.content.push(...i)),s&&((n=e.logprobs).refusal??(n.refusal=[]),e.logprobs.refusal.push(...s))}else e.logprobs=Object.assign({},c)}if(l&&(e.finish_reason=l,eT(this,T,"f")&&nt(eT(this,T,"f")))){if("length"===l)throw new eq;if("content_filter"===l)throw new eX}if(Object.assign(e,h),!o)continue;let{content:a,refusal:d,function_call:p,role:f,tool_calls:m,...g}=o;if(Object.assign(e.message,g),d&&(e.message.refusal=(e.message.refusal||"")+d),f&&(e.message.role=f),p&&(e.message.function_call?(p.name&&(e.message.function_call.name=p.name),p.arguments&&((i=e.message.function_call).arguments??(i.arguments=""),e.message.function_call.arguments+=p.arguments)):e.message.function_call=p),a&&(e.message.content=(e.message.content||"")+a,!e.message.refusal&&eT(this,I,"m",F).call(this)&&(e.message.parsed=nd(e.message.content))),m)for(let{index:t,id:n,type:i,function:r,...o}of(e.message.tool_calls||(e.message.tool_calls=[]),m)){let a=(s=e.message.tool_calls)[t]??(s[t]={});Object.assign(a,o),n&&(a.id=n),i&&(a.type=i),r&&(a.function??(a.function={name:r.name??"",arguments:""})),r?.name&&(a.function.name=r.name),r?.arguments&&(a.function.arguments+=r.arguments,function(e,t){if(!e||!("tools"in e)||!e.tools)return!1;let n=e.tools?.find(e=>t8(e)&&e.function?.name===t.function.name);return t8(n)&&(t7(n)||n?.function.strict||!1)}(eT(this,T,"f"),a)&&(a.function.parsed_arguments=nd(a.function.arguments)))}}return r},Symbol.asyncIterator)](){let e=[],t=[],n=!1;return this.on("chunk",n=>{let i=t.shift();i?i.resolve(n):e.push(n)}),this.on("end",()=>{for(let e of(n=!0,t))e.resolve(void 0);t.length=0}),this.on("abort",e=>{for(let i of(n=!0,t))i.reject(e);t.length=0}),this.on("error",e=>{for(let i of(n=!0,t))i.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new tA(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function nf(e){return JSON.stringify(e)}class nm extends np{static fromReadableStream(e){let t=new nm(null);return t._run(()=>t._fromReadableStream(e)),t}static runTools(e,t,n){let i=new nm(t),s={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,t,s)),i}}class ng extends t2{constructor(){super(...arguments),this.messages=new t3(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(t9`/chat/completions/${e}`,t)}update(e,t,n){return this._client.post(t9`/chat/completions/${e}`,{body:t,...n})}list(e={},t){return this._client.getAPIList("/chat/completions",tC,{query:e,...t})}delete(e,t){return this._client.delete(t9`/chat/completions/${e}`,t)}parse(e,t){return function(e){for(let t of e??[]){if("function"!==t.type)throw new eZ(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(!0!==t.function.strict)throw new eZ(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(t=>ne(t,e))}runTools(e,t){return e.stream?nm.runTools(this._client,e,t):na.runTools(this._client,e,t)}stream(e,t){return np.createChatCompletion(this._client,e,t)}}ng.Messages=t3;class ny extends t2{constructor(){super(...arguments),this.completions=new ng(this._client)}}ny.Completions=ng;let n_=Symbol("brand.privateNullableHeaders"),nv=e=>{let t=new Headers,n=new Set;for(let i of e){let e=new Set;for(let[s,r]of function*(e){let t;if(!e)return;if(n_ in e){let{values:t,nulls:n}=e;for(let e of(yield*t.entries(),n))yield[e,null];return}let n=!1;for(let i of(e instanceof Headers?t=e.entries():eQ(e)?t=e:(n=!0,t=Object.entries(e??{})),t)){let e=i[0];if("string"!=typeof e)throw TypeError("expected header name to be a string");let t=eQ(i[1])?i[1]:[i[1]],s=!1;for(let i of t)void 0!==i&&(n&&!s&&(s=!0,yield[e,null]),yield[e,i])}}(i)){let i=s.toLowerCase();e.has(i)||(t.delete(s),e.add(i)),null===r?(t.delete(s),n.add(i)):(t.append(s,r),n.delete(i))}}return{[n_]:!0,values:t,nulls:n}};class nb extends t2{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:nv([{Accept:"application/octet-stream"},t?.headers]),__binaryResponse:!0})}}class nw extends t2{create(e,t){return this._client.post("/audio/transcriptions",tW({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class nz extends t2{create(e,t){return this._client.post("/audio/translations",tW({body:e,...t,__metadata:{model:e.model}},this._client))}}class nS extends t2{constructor(){super(...arguments),this.transcriptions=new nw(this._client),this.translations=new nz(this._client),this.speech=new nb(this._client)}}nS.Transcriptions=nw,nS.Translations=nz,nS.Speech=nb;class nk extends t2{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(t9`/batches/${e}`,t)}list(e={},t){return this._client.getAPIList("/batches",tC,{query:e,...t})}cancel(e,t){return this._client.post(t9`/batches/${e}/cancel`,t)}}class nx extends t2{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:nv([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}retrieve(e,t){return this._client.get(t9`/assistants/${e}`,{...t,headers:nv([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}update(e,t,n){return this._client.post(t9`/assistants/${e}`,{body:t,...n,headers:nv([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e={},t){return this._client.getAPIList("/assistants",tC,{query:e,...t,headers:nv([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}delete(e,t){return this._client.delete(t9`/assistants/${e}`,{...t,headers:nv([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}}class n$ extends t2{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:nv([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}}class nA extends t2{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:nv([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}}class nO extends t2{constructor(){super(...arguments),this.sessions=new n$(this._client),this.transcriptionSessions=new nA(this._client)}}nO.Sessions=n$,nO.TranscriptionSessions=nA;class nI extends t2{create(e,t){return this._client.post("/chatkit/sessions",{body:e,...t,headers:nv([{"OpenAI-Beta":"chatkit_beta=v1"},t?.headers])})}cancel(e,t){return this._client.post(t9`/chatkit/sessions/${e}/cancel`,{...t,headers:nv([{"OpenAI-Beta":"chatkit_beta=v1"},t?.headers])})}}class nT extends t2{retrieve(e,t){return this._client.get(t9`/chatkit/threads/${e}`,{...t,headers:nv([{"OpenAI-Beta":"chatkit_beta=v1"},t?.headers])})}list(e={},t){return this._client.getAPIList("/chatkit/threads",tL,{query:e,...t,headers:nv([{"OpenAI-Beta":"chatkit_beta=v1"},t?.headers])})}delete(e,t){return this._client.delete(t9`/chatkit/threads/${e}`,{...t,headers:nv([{"OpenAI-Beta":"chatkit_beta=v1"},t?.headers])})}listItems(e,t={},n){return this._client.getAPIList(t9`/chatkit/threads/${e}/items`,tL,{query:t,...n,headers:nv([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}}class nE extends t2{constructor(){super(...arguments),this.sessions=new nI(this._client),this.threads=new nT(this._client)}}nE.Sessions=nI,nE.Threads=nT;class nN extends t2{create(e,t,n){return this._client.post(t9`/threads/${e}/messages`,{body:t,...n,headers:nv([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,t,n){let{thread_id:i}=t;return this._client.get(t9`/threads/${i}/messages/${e}`,{...n,headers:nv([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,t,n){let{thread_id:i,...s}=t;return this._client.post(t9`/threads/${i}/messages/${e}`,{body:s,...n,headers:nv([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e,t={},n){return this._client.getAPIList(t9`/threads/${e}/messages`,tC,{query:t,...n,headers:nv([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,t,n){let{thread_id:i}=t;return this._client.delete(t9`/threads/${i}/messages/${e}`,{...n,headers:nv([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}class nP extends t2{retrieve(e,t,n){let{thread_id:i,run_id:s,...r}=t;return this._client.get(t9`/threads/${i}/runs/${s}/steps/${e}`,{query:r,...n,headers:nv([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e,t,n){let{thread_id:i,...s}=t;return this._client.getAPIList(t9`/threads/${i}/runs/${e}/steps`,tC,{query:s,...n,headers:nv([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let nZ=e=>{if("undefined"!=typeof Buffer){let t=Buffer.from(e,"base64");return Array.from(new Float32Array(t.buffer,t.byteOffset,t.length/Float32Array.BYTES_PER_ELEMENT))}{let t=atob(e),n=t.length,i=new Uint8Array(n);for(let e=0;e<n;e++)i[e]=t.charCodeAt(e);return Array.from(new Float32Array(i.buffer))}},nR=e=>void 0!==globalThis.process?globalThis.process.env?.[e]?.trim()??void 0:void 0!==globalThis.Deno?globalThis.Deno.env?.get?.(e)?.trim():void 0;class nj extends nr{constructor(){super(...arguments),D.add(this),B.set(this,[]),W.set(this,{}),J.set(this,{}),V.set(this,void 0),q.set(this,void 0),X.set(this,void 0),H.set(this,void 0),K.set(this,void 0),G.set(this,void 0),Y.set(this,void 0),Q.set(this,void 0),ee.set(this,void 0)}[(B=new WeakMap,W=new WeakMap,J=new WeakMap,V=new WeakMap,q=new WeakMap,X=new WeakMap,H=new WeakMap,K=new WeakMap,G=new WeakMap,Y=new WeakMap,Q=new WeakMap,ee=new WeakMap,D=new WeakSet,Symbol.asyncIterator)](){let e=[],t=[],n=!1;return this.on("event",n=>{let i=t.shift();i?i.resolve(n):e.push(n)}),this.on("end",()=>{for(let e of(n=!0,t))e.resolve(void 0);t.length=0}),this.on("abort",e=>{for(let i of(n=!0,t))i.reject(e);t.length=0}),this.on("error",e=>{for(let i of(n=!0,t))i.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){let t=new U;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){let n=t?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),this._connected();let i=tA.fromReadableStream(e,this.controller);for await(let e of i)eT(this,D,"m",et).call(this,e);if(i.controller.signal?.aborted)throw new ej;return this._addRun(eT(this,D,"m",en).call(this))}toReadableStream(){return new tA(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,n,i){let s=new U;return s._run(()=>s._runToolAssistantStream(e,t,n,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createToolAssistantStream(e,t,n,i){let s=i?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));let r={...n,stream:!0},o=await e.submitToolOutputs(t,r,{...i,signal:this.controller.signal});for await(let e of(this._connected(),o))eT(this,D,"m",et).call(this,e);if(o.controller.signal?.aborted)throw new ej;return this._addRun(eT(this,D,"m",en).call(this))}static createThreadAssistantStream(e,t,n){let i=new U;return i._run(()=>i._threadAssistantStream(e,t,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,t,n,i){let s=new U;return s._run(()=>s._runAssistantStream(e,t,n,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return eT(this,Y,"f")}currentRun(){return eT(this,Q,"f")}currentMessageSnapshot(){return eT(this,V,"f")}currentRunStepSnapshot(){return eT(this,ee,"f")}async finalRunSteps(){return await this.done(),Object.values(eT(this,W,"f"))}async finalMessages(){return await this.done(),Object.values(eT(this,J,"f"))}async finalRun(){if(await this.done(),!eT(this,q,"f"))throw Error("Final run was not received.");return eT(this,q,"f")}async _createThreadAssistantStream(e,t,n){let i=n?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));let s={...t,stream:!0},r=await e.createAndRun(s,{...n,signal:this.controller.signal});for await(let e of(this._connected(),r))eT(this,D,"m",et).call(this,e);if(r.controller.signal?.aborted)throw new ej;return this._addRun(eT(this,D,"m",en).call(this))}async _createAssistantStream(e,t,n,i){let s=i?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));let r={...n,stream:!0},o=await e.create(t,r,{...i,signal:this.controller.signal});for await(let e of(this._connected(),o))eT(this,D,"m",et).call(this,e);if(o.controller.signal?.aborted)throw new ej;return this._addRun(eT(this,D,"m",en).call(this))}static accumulateDelta(e,t){for(let[n,i]of Object.entries(t)){if(!e.hasOwnProperty(n)){e[n]=i;continue}let t=e[n];if(null==t||"index"===n||"type"===n){e[n]=i;continue}if("string"==typeof t&&"string"==typeof i)t+=i;else if("number"==typeof t&&"number"==typeof i)t+=i;else if(e1(t)&&e1(i))t=this.accumulateDelta(t,i);else if(Array.isArray(t)&&Array.isArray(i)){if(t.every(e=>"string"==typeof e||"number"==typeof e)){t.push(...i);continue}for(let e of i){if(!e1(e))throw Error(`Expected array delta entry to be an object but got: ${e}`);let n=e.index;if(null==n)throw console.error(e),Error("Expected array delta entry to have an `index` property");if("number"!=typeof n)throw Error(`Expected array delta entry \`index\` property to be a number but got ${n}`);let i=t[n];null==i?t.push(e):t[n]=this.accumulateDelta(i,e)}continue}else throw Error(`Unhandled record type: ${n}, deltaValue: ${i}, accValue: ${t}`);e[n]=t}return e}_addRun(e){return e}async _threadAssistantStream(e,t,n){return await this._createThreadAssistantStream(t,e,n)}async _runAssistantStream(e,t,n,i){return await this._createAssistantStream(t,e,n,i)}async _runToolAssistantStream(e,t,n,i){return await this._createToolAssistantStream(t,e,n,i)}}U=nj,et=function(e){if(!this.ended)switch(eI(this,Y,e,"f"),eT(this,D,"m",er).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":eT(this,D,"m",eu).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":eT(this,D,"m",es).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":eT(this,D,"m",ei).call(this,e);break;case"error":throw Error("Encountered an error event in event processing - errors should be processed earlier")}},en=function(){if(this.ended)throw new eZ("stream has ended, this shouldn't happen");if(!eT(this,q,"f"))throw Error("Final run has not been received");return eT(this,q,"f")},ei=function(e){let[t,n]=eT(this,D,"m",ea).call(this,e,eT(this,V,"f"));for(let e of(eI(this,V,t,"f"),eT(this,J,"f")[t.id]=t,n)){let n=t.content[e.index];n?.type=="text"&&this._emit("textCreated",n.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(let n of e.data.delta.content){if("text"==n.type&&n.text){let e=n.text,i=t.content[n.index];if(i&&"text"==i.type)this._emit("textDelta",e,i.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(n.index!=eT(this,X,"f")){if(eT(this,H,"f"))switch(eT(this,H,"f").type){case"text":this._emit("textDone",eT(this,H,"f").text,eT(this,V,"f"));break;case"image_file":this._emit("imageFileDone",eT(this,H,"f").image_file,eT(this,V,"f"))}eI(this,X,n.index,"f")}eI(this,H,t.content[n.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(void 0!==eT(this,X,"f")){let t=e.data.content[eT(this,X,"f")];if(t)switch(t.type){case"image_file":this._emit("imageFileDone",t.image_file,eT(this,V,"f"));break;case"text":this._emit("textDone",t.text,eT(this,V,"f"))}}eT(this,V,"f")&&this._emit("messageDone",e.data),eI(this,V,void 0,"f")}},es=function(e){let t=eT(this,D,"m",eo).call(this,e);switch(eI(this,ee,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":let n=e.data.delta;if(n.step_details&&"tool_calls"==n.step_details.type&&n.step_details.tool_calls&&"tool_calls"==t.step_details.type)for(let e of n.step_details.tool_calls)e.index==eT(this,K,"f")?this._emit("toolCallDelta",e,t.step_details.tool_calls[e.index]):(eT(this,G,"f")&&this._emit("toolCallDone",eT(this,G,"f")),eI(this,K,e.index,"f"),eI(this,G,t.step_details.tool_calls[e.index],"f"),eT(this,G,"f")&&this._emit("toolCallCreated",eT(this,G,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":eI(this,ee,void 0,"f"),"tool_calls"==e.data.step_details.type&&eT(this,G,"f")&&(this._emit("toolCallDone",eT(this,G,"f")),eI(this,G,void 0,"f")),this._emit("runStepDone",e.data,t)}},er=function(e){eT(this,B,"f").push(e),this._emit("event",e)},eo=function(e){switch(e.event){case"thread.run.step.created":return eT(this,W,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=eT(this,W,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let n=e.data;if(n.delta){let i=U.accumulateDelta(t,n.delta);eT(this,W,"f")[e.data.id]=i}return eT(this,W,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":eT(this,W,"f")[e.data.id]=e.data}if(eT(this,W,"f")[e.data.id])return eT(this,W,"f")[e.data.id];throw Error("No snapshot available")},ea=function(e,t){let n=[];switch(e.event){case"thread.message.created":return[e.data,n];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(let e of i.delta.content)if(e.index in t.content){let n=t.content[e.index];t.content[e.index]=eT(this,D,"m",el).call(this,e,n)}else t.content[e.index]=e,n.push(e);return[t,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},el=function(e,t){return U.accumulateDelta(t,e)},eu=function(e){switch(eI(this,Q,e.data,"f"),e.event){case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":eI(this,q,e.data,"f"),eT(this,G,"f")&&(this._emit("toolCallDone",eT(this,G,"f")),eI(this,G,void 0,"f"))}};class nC extends t2{constructor(){super(...arguments),this.steps=new nP(this._client)}create(e,t,n){let{include:i,...s}=t;return this._client.post(t9`/threads/${e}/runs`,{query:{include:i},body:s,...n,headers:nv([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:t.stream??!1})}retrieve(e,t,n){let{thread_id:i}=t;return this._client.get(t9`/threads/${i}/runs/${e}`,{...n,headers:nv([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,t,n){let{thread_id:i,...s}=t;return this._client.post(t9`/threads/${i}/runs/${e}`,{body:s,...n,headers:nv([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e,t={},n){return this._client.getAPIList(t9`/threads/${e}/runs`,tC,{query:t,...n,headers:nv([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}cancel(e,t,n){let{thread_id:i}=t;return this._client.post(t9`/threads/${i}/runs/${e}/cancel`,{...n,headers:nv([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}async createAndPoll(e,t,n){let i=await this.create(e,t,n);return await this.poll(i.id,{thread_id:e},n)}createAndStream(e,t,n){return nj.createAssistantStream(e,this._client.beta.threads.runs,t,n)}async poll(e,t,n){let i=nv([n?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":n?.pollIntervalMs?.toString()??void 0}]);for(;;){let{data:s,response:r}=await this.retrieve(e,t,{...n,headers:{...n?.headers,...i}}).withResponse();switch(s.status){case"queued":case"in_progress":case"cancelling":let o=5e3;if(n?.pollIntervalMs)o=n.pollIntervalMs;else{let e=r.headers.get("openai-poll-after-ms");if(e){let t=parseInt(e);isNaN(t)||(o=t)}}await e6(o);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return s}}}stream(e,t,n){return nj.createAssistantStream(e,this._client.beta.threads.runs,t,n)}submitToolOutputs(e,t,n){let{thread_id:i,...s}=t;return this._client.post(t9`/threads/${i}/runs/${e}/submit_tool_outputs`,{body:s,...n,headers:nv([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:t.stream??!1})}async submitToolOutputsAndPoll(e,t,n){let i=await this.submitToolOutputs(e,t,n);return await this.poll(i.id,t,n)}submitToolOutputsStream(e,t,n){return nj.createToolAssistantStream(e,this._client.beta.threads.runs,t,n)}}nC.Steps=nP;class nL extends t2{constructor(){super(...arguments),this.runs=new nC(this._client),this.messages=new nN(this._client)}create(e={},t){return this._client.post("/threads",{body:e,...t,headers:nv([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}retrieve(e,t){return this._client.get(t9`/threads/${e}`,{...t,headers:nv([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}update(e,t,n){return this._client.post(t9`/threads/${e}`,{body:t,...n,headers:nv([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,t){return this._client.delete(t9`/threads/${e}`,{...t,headers:nv([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:nv([{"OpenAI-Beta":"assistants=v2"},t?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,t){let n=await this.createAndRun(e,t);return await this.runs.poll(n.id,{thread_id:n.thread_id},t)}createAndRunStream(e,t){return nj.createThreadAssistantStream(e,this._client.beta.threads,t)}}nL.Runs=nC,nL.Messages=nN;class nF extends t2{constructor(){super(...arguments),this.realtime=new nO(this._client),this.chatkit=new nE(this._client),this.assistants=new nx(this._client),this.threads=new nL(this._client)}}nF.Realtime=nO,nF.ChatKit=nE,nF.Assistants=nx,nF.Threads=nL;class nM extends t2{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class nD extends t2{retrieve(e,t,n){let{container_id:i}=t;return this._client.get(t9`/containers/${i}/files/${e}/content`,{...n,headers:nv([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}}class nU extends t2{constructor(){super(...arguments),this.content=new nD(this._client)}create(e,t,n){return this._client.post(t9`/containers/${e}/files`,tW({body:t,...n},this._client))}retrieve(e,t,n){let{container_id:i}=t;return this._client.get(t9`/containers/${i}/files/${e}`,n)}list(e,t={},n){return this._client.getAPIList(t9`/containers/${e}/files`,tC,{query:t,...n})}delete(e,t,n){let{container_id:i}=t;return this._client.delete(t9`/containers/${i}/files/${e}`,{...n,headers:nv([{Accept:"*/*"},n?.headers])})}}nU.Content=nD;class nB extends t2{constructor(){super(...arguments),this.files=new nU(this._client)}create(e,t){return this._client.post("/containers",{body:e,...t})}retrieve(e,t){return this._client.get(t9`/containers/${e}`,t)}list(e={},t){return this._client.getAPIList("/containers",tC,{query:e,...t})}delete(e,t){return this._client.delete(t9`/containers/${e}`,{...t,headers:nv([{Accept:"*/*"},t?.headers])})}}nB.Files=nU;class nW extends t2{create(e,t,n){let{include:i,...s}=t;return this._client.post(t9`/conversations/${e}/items`,{query:{include:i},body:s,...n})}retrieve(e,t,n){let{conversation_id:i,...s}=t;return this._client.get(t9`/conversations/${i}/items/${e}`,{query:s,...n})}list(e,t={},n){return this._client.getAPIList(t9`/conversations/${e}/items`,tL,{query:t,...n})}delete(e,t,n){let{conversation_id:i}=t;return this._client.delete(t9`/conversations/${i}/items/${e}`,n)}}class nJ extends t2{constructor(){super(...arguments),this.items=new nW(this._client)}create(e={},t){return this._client.post("/conversations",{body:e,...t})}retrieve(e,t){return this._client.get(t9`/conversations/${e}`,t)}update(e,t,n){return this._client.post(t9`/conversations/${e}`,{body:t,...n})}delete(e,t){return this._client.delete(t9`/conversations/${e}`,t)}}nJ.Items=nW;class nV extends t2{create(e,t){let n=!!e.encoding_format,i=n?e.encoding_format:"base64";n&&tx(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);let s=this._client.post("/embeddings",{body:{...e,encoding_format:i},...t});return n?s:(tx(this._client).debug("embeddings/decoding base64 embeddings from base64"),s._thenUnwrap(e=>(e&&e.data&&e.data.forEach(e=>{let t=e.embedding;e.embedding=nZ(t)}),e)))}}class nq extends t2{retrieve(e,t,n){let{eval_id:i,run_id:s}=t;return this._client.get(t9`/evals/${i}/runs/${s}/output_items/${e}`,n)}list(e,t,n){let{eval_id:i,...s}=t;return this._client.getAPIList(t9`/evals/${i}/runs/${e}/output_items`,tC,{query:s,...n})}}class nX extends t2{constructor(){super(...arguments),this.outputItems=new nq(this._client)}create(e,t,n){return this._client.post(t9`/evals/${e}/runs`,{body:t,...n})}retrieve(e,t,n){let{eval_id:i}=t;return this._client.get(t9`/evals/${i}/runs/${e}`,n)}list(e,t={},n){return this._client.getAPIList(t9`/evals/${e}/runs`,tC,{query:t,...n})}delete(e,t,n){let{eval_id:i}=t;return this._client.delete(t9`/evals/${i}/runs/${e}`,n)}cancel(e,t,n){let{eval_id:i}=t;return this._client.post(t9`/evals/${i}/runs/${e}`,n)}}nX.OutputItems=nq;class nH extends t2{constructor(){super(...arguments),this.runs=new nX(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(t9`/evals/${e}`,t)}update(e,t,n){return this._client.post(t9`/evals/${e}`,{body:t,...n})}list(e={},t){return this._client.getAPIList("/evals",tC,{query:e,...t})}delete(e,t){return this._client.delete(t9`/evals/${e}`,t)}}nH.Runs=nX;class nK extends t2{create(e,t){return this._client.post("/files",tW({body:e,...t},this._client))}retrieve(e,t){return this._client.get(t9`/files/${e}`,t)}list(e={},t){return this._client.getAPIList("/files",tC,{query:e,...t})}delete(e,t){return this._client.delete(t9`/files/${e}`,t)}content(e,t){return this._client.get(t9`/files/${e}/content`,{...t,headers:nv([{Accept:"application/binary"},t?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:n=18e5}={}){let i=new Set(["processed","error","deleted"]),s=Date.now(),r=await this.retrieve(e);for(;!r.status||!i.has(r.status);)if(await e6(t),r=await this.retrieve(e),Date.now()-s>n)throw new eL({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return r}}class nG extends t2{}class nY extends t2{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}}class nQ extends t2{constructor(){super(...arguments),this.graders=new nY(this._client)}}nQ.Graders=nY;class n0 extends t2{create(e,t,n){return this._client.getAPIList(t9`/fine_tuning/checkpoints/${e}/permissions`,tj,{body:t,method:"post",...n})}retrieve(e,t={},n){return this._client.get(t9`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...n})}delete(e,t,n){let{fine_tuned_model_checkpoint:i}=t;return this._client.delete(t9`/fine_tuning/checkpoints/${i}/permissions/${e}`,n)}}class n1 extends t2{constructor(){super(...arguments),this.permissions=new n0(this._client)}}n1.Permissions=n0;class n2 extends t2{list(e,t={},n){return this._client.getAPIList(t9`/fine_tuning/jobs/${e}/checkpoints`,tC,{query:t,...n})}}class n4 extends t2{constructor(){super(...arguments),this.checkpoints=new n2(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(t9`/fine_tuning/jobs/${e}`,t)}list(e={},t){return this._client.getAPIList("/fine_tuning/jobs",tC,{query:e,...t})}cancel(e,t){return this._client.post(t9`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},n){return this._client.getAPIList(t9`/fine_tuning/jobs/${e}/events`,tC,{query:t,...n})}pause(e,t){return this._client.post(t9`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(t9`/fine_tuning/jobs/${e}/resume`,t)}}n4.Checkpoints=n2;class n6 extends t2{constructor(){super(...arguments),this.methods=new nG(this._client),this.jobs=new n4(this._client),this.checkpoints=new n1(this._client),this.alpha=new nQ(this._client)}}n6.Methods=nG,n6.Jobs=n4,n6.Checkpoints=n1,n6.Alpha=nQ;class n9 extends t2{}class n3 extends t2{constructor(){super(...arguments),this.graderModels=new n9(this._client)}}n3.GraderModels=n9;class n8 extends t2{createVariation(e,t){return this._client.post("/images/variations",tW({body:e,...t},this._client))}edit(e,t){return this._client.post("/images/edits",tW({body:e,...t,stream:e.stream??!1},this._client))}generate(e,t){return this._client.post("/images/generations",{body:e,...t,stream:e.stream??!1})}}class n5 extends t2{retrieve(e,t){return this._client.get(t9`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",tj,e)}delete(e,t){return this._client.delete(t9`/models/${e}`,t)}}class n7 extends t2{create(e,t){return this._client.post("/moderations",{body:e,...t})}}class ie extends t2{accept(e,t,n){return this._client.post(t9`/realtime/calls/${e}/accept`,{body:t,...n,headers:nv([{Accept:"*/*"},n?.headers])})}hangup(e,t){return this._client.post(t9`/realtime/calls/${e}/hangup`,{...t,headers:nv([{Accept:"*/*"},t?.headers])})}refer(e,t,n){return this._client.post(t9`/realtime/calls/${e}/refer`,{body:t,...n,headers:nv([{Accept:"*/*"},n?.headers])})}reject(e,t={},n){return this._client.post(t9`/realtime/calls/${e}/reject`,{body:t,...n,headers:nv([{Accept:"*/*"},n?.headers])})}}class it extends t2{create(e,t){return this._client.post("/realtime/client_secrets",{body:e,...t})}}class ii extends t2{constructor(){super(...arguments),this.clientSecrets=new it(this._client),this.calls=new ie(this._client)}}function is(e,t){let n=e.output.map(e=>{if("function_call"===e.type)return{...e,parsed_arguments:function(e,t){var n,i,s;let r=(n=e.tools??[],i=t.name,n.find(e=>"function"===e.type&&e.name===i));return{...t,...t,parsed_arguments:(s=r,s?.$brand==="auto-parseable-tool")?r.$parseRaw(t.arguments):r?.strict?JSON.parse(t.arguments):null}}(t,e)};if("message"===e.type){let n=e.content.map(e=>{var n;return"output_text"===e.type?{...e,parsed:(n=e.text,t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(n):JSON.parse(n))}:e});return{...e,content:n}}return e}),i=Object.assign({},e,{output:n});return Object.getOwnPropertyDescriptor(e,"output_text")||ir(i),Object.defineProperty(i,"output_parsed",{enumerable:!0,get(){for(let e of i.output)if("message"===e.type){for(let t of e.content)if("output_text"===t.type&&null!==t.parsed)return t.parsed}return null}}),i}function ir(e){let t=[];for(let n of e.output)if("message"===n.type)for(let e of n.content)"output_text"===e.type&&t.push(e.text);e.output_text=t.join("")}ii.ClientSecrets=it,ii.Calls=ie;class io extends nr{constructor(e){super(),ec.add(this),eh.set(this,void 0),ed.set(this,void 0),ep.set(this,void 0),eI(this,eh,e,"f")}static createResponse(e,t,n){let i=new io(t);return i._run(()=>i._createOrRetrieveResponse(e,t,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(e,t,n){let i;let s=n?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),eT(this,ec,"m",ef).call(this);let r=null;for await(let s of("response_id"in t?(i=await e.responses.retrieve(t.response_id,{stream:!0},{...n,signal:this.controller.signal,stream:!0}),r=t.starting_after??null):i=await e.responses.create({...t,stream:!0},{...n,signal:this.controller.signal}),this._connected(),i))eT(this,ec,"m",em).call(this,s,r);if(i.controller.signal?.aborted)throw new ej;return eT(this,ec,"m",eg).call(this)}[(eh=new WeakMap,ed=new WeakMap,ep=new WeakMap,ec=new WeakSet,ef=function(){this.ended||eI(this,ed,void 0,"f")},em=function(e,t){if(this.ended)return;let n=(e,n)=>{(null==t||n.sequence_number>t)&&this._emit(e,n)},i=eT(this,ec,"m",ey).call(this,e);switch(n("event",e),e.type){case"response.output_text.delta":{let t=i.output[e.output_index];if(!t)throw new eZ(`missing output at index ${e.output_index}`);if("message"===t.type){let i=t.content[e.content_index];if(!i)throw new eZ(`missing content at index ${e.content_index}`);if("output_text"!==i.type)throw new eZ(`expected content to be 'output_text', got ${i.type}`);n("response.output_text.delta",{...e,snapshot:i.text})}break}case"response.function_call_arguments.delta":{let t=i.output[e.output_index];if(!t)throw new eZ(`missing output at index ${e.output_index}`);"function_call"===t.type&&n("response.function_call_arguments.delta",{...e,snapshot:t.arguments});break}default:n(e.type,e)}},eg=function(){if(this.ended)throw new eZ("stream has ended, this shouldn't happen");let e=eT(this,ed,"f");if(!e)throw new eZ("request ended without sending any events");eI(this,ed,void 0,"f");let t=function(e,t){return t&&t5(t.text?.format)?is(e,t):{...e,output_parsed:null,output:e.output.map(e=>"function_call"===e.type?{...e,parsed_arguments:null}:"message"===e.type?{...e,content:e.content.map(e=>({...e,parsed:null}))}:e)}}(e,eT(this,eh,"f"));return eI(this,ep,t,"f"),t},ey=function(e){let t=eT(this,ed,"f");if(!t){if("response.created"!==e.type)throw new eZ(`When snapshot hasn't been set yet, expected 'response.created' event, got ${e.type}`);return eI(this,ed,e.response,"f")}switch(e.type){case"response.output_item.added":t.output.push(e.item);break;case"response.content_part.added":{let n=t.output[e.output_index];if(!n)throw new eZ(`missing output at index ${e.output_index}`);let i=n.type,s=e.part;"message"===i&&"reasoning_text"!==s.type?n.content.push(s):"reasoning"===i&&"reasoning_text"===s.type&&(n.content||(n.content=[]),n.content.push(s));break}case"response.output_text.delta":{let n=t.output[e.output_index];if(!n)throw new eZ(`missing output at index ${e.output_index}`);if("message"===n.type){let t=n.content[e.content_index];if(!t)throw new eZ(`missing content at index ${e.content_index}`);if("output_text"!==t.type)throw new eZ(`expected content to be 'output_text', got ${t.type}`);t.text+=e.delta}break}case"response.function_call_arguments.delta":{let n=t.output[e.output_index];if(!n)throw new eZ(`missing output at index ${e.output_index}`);"function_call"===n.type&&(n.arguments+=e.delta);break}case"response.reasoning_text.delta":{let n=t.output[e.output_index];if(!n)throw new eZ(`missing output at index ${e.output_index}`);if("reasoning"===n.type){let t=n.content?.[e.content_index];if(!t)throw new eZ(`missing content at index ${e.content_index}`);if("reasoning_text"!==t.type)throw new eZ(`expected content to be 'reasoning_text', got ${t.type}`);t.text+=e.delta}break}case"response.completed":eI(this,ed,e.response,"f")}return t},Symbol.asyncIterator)](){let e=[],t=[],n=!1;return this.on("event",n=>{let i=t.shift();i?i.resolve(n):e.push(n)}),this.on("end",()=>{for(let e of(n=!0,t))e.resolve(void 0);t.length=0}),this.on("abort",e=>{for(let i of(n=!0,t))i.reject(e);t.length=0}),this.on("error",e=>{for(let i of(n=!0,t))i.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();let e=eT(this,ep,"f");if(!e)throw new eZ("stream ended without producing a ChatCompletion");return e}}class ia extends t2{list(e,t={},n){return this._client.getAPIList(t9`/responses/${e}/input_items`,tC,{query:t,...n})}}class il extends t2{count(e={},t){return this._client.post("/responses/input_tokens",{body:e,...t})}}class iu extends t2{constructor(){super(...arguments),this.inputItems=new ia(this._client),this.inputTokens=new il(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(e=>("object"in e&&"response"===e.object&&ir(e),e))}retrieve(e,t={},n){return this._client.get(t9`/responses/${e}`,{query:t,...n,stream:t?.stream??!1})._thenUnwrap(e=>("object"in e&&"response"===e.object&&ir(e),e))}delete(e,t){return this._client.delete(t9`/responses/${e}`,{...t,headers:nv([{Accept:"*/*"},t?.headers])})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(t=>is(t,e))}stream(e,t){return io.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(t9`/responses/${e}/cancel`,t)}compact(e,t){return this._client.post("/responses/compact",{body:e,...t})}}iu.InputItems=ia,iu.InputTokens=il;class ic extends t2{create(e,t,n){return this._client.post(t9`/uploads/${e}/parts`,tW({body:t,...n},this._client))}}class ih extends t2{constructor(){super(...arguments),this.parts=new ic(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(t9`/uploads/${e}/cancel`,t)}complete(e,t,n){return this._client.post(t9`/uploads/${e}/complete`,{body:t,...n})}}ih.Parts=ic;let id=async e=>{let t=await Promise.allSettled(e),n=t.filter(e=>"rejected"===e.status);if(n.length){for(let e of n)console.error(e.reason);throw Error(`${n.length} promise(s) failed - see the above errors`)}let i=[];for(let e of t)"fulfilled"===e.status&&i.push(e.value);return i};class ip extends t2{create(e,t,n){return this._client.post(t9`/vector_stores/${e}/file_batches`,{body:t,...n,headers:nv([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,t,n){let{vector_store_id:i}=t;return this._client.get(t9`/vector_stores/${i}/file_batches/${e}`,{...n,headers:nv([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}cancel(e,t,n){let{vector_store_id:i}=t;return this._client.post(t9`/vector_stores/${i}/file_batches/${e}/cancel`,{...n,headers:nv([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}async createAndPoll(e,t,n){let i=await this.create(e,t);return await this.poll(e,i.id,n)}listFiles(e,t,n){let{vector_store_id:i,...s}=t;return this._client.getAPIList(t9`/vector_stores/${i}/file_batches/${e}/files`,tC,{query:s,...n,headers:nv([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}async poll(e,t,n){let i=nv([n?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":n?.pollIntervalMs?.toString()??void 0}]);for(;;){let{data:s,response:r}=await this.retrieve(t,{vector_store_id:e},{...n,headers:i}).withResponse();switch(s.status){case"in_progress":let o=5e3;if(n?.pollIntervalMs)o=n.pollIntervalMs;else{let e=r.headers.get("openai-poll-after-ms");if(e){let t=parseInt(e);isNaN(t)||(o=t)}}await e6(o);break;case"failed":case"cancelled":case"completed":return s}}}async uploadAndPoll(e,{files:t,fileIds:n=[]},i){if(null==t||0==t.length)throw Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");let s=Math.min(i?.maxConcurrency??5,t.length),r=this._client,o=t.values(),a=[...n];async function l(e){for(let t of e){let e=await r.files.create({file:t,purpose:"assistants"},i);a.push(e.id)}}let u=Array(s).fill(o).map(l);return await id(u),await this.createAndPoll(e,{file_ids:a})}}class im extends t2{create(e,t,n){return this._client.post(t9`/vector_stores/${e}/files`,{body:t,...n,headers:nv([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,t,n){let{vector_store_id:i}=t;return this._client.get(t9`/vector_stores/${i}/files/${e}`,{...n,headers:nv([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,t,n){let{vector_store_id:i,...s}=t;return this._client.post(t9`/vector_stores/${i}/files/${e}`,{body:s,...n,headers:nv([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e,t={},n){return this._client.getAPIList(t9`/vector_stores/${e}/files`,tC,{query:t,...n,headers:nv([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,t,n){let{vector_store_id:i}=t;return this._client.delete(t9`/vector_stores/${i}/files/${e}`,{...n,headers:nv([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}async createAndPoll(e,t,n){let i=await this.create(e,t,n);return await this.poll(e,i.id,n)}async poll(e,t,n){let i=nv([n?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":n?.pollIntervalMs?.toString()??void 0}]);for(;;){let s=await this.retrieve(t,{vector_store_id:e},{...n,headers:i}).withResponse(),r=s.data;switch(r.status){case"in_progress":let o=5e3;if(n?.pollIntervalMs)o=n.pollIntervalMs;else{let e=s.response.headers.get("openai-poll-after-ms");if(e){let t=parseInt(e);isNaN(t)||(o=t)}}await e6(o);break;case"failed":case"completed":return r}}}async upload(e,t,n){let i=await this._client.files.create({file:t,purpose:"assistants"},n);return this.create(e,{file_id:i.id},n)}async uploadAndPoll(e,t,n){let i=await this.upload(e,t,n);return await this.poll(e,i.id,n)}content(e,t,n){let{vector_store_id:i}=t;return this._client.getAPIList(t9`/vector_stores/${i}/files/${e}/content`,tj,{...n,headers:nv([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}class ig extends t2{constructor(){super(...arguments),this.files=new im(this._client),this.fileBatches=new ip(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:nv([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}retrieve(e,t){return this._client.get(t9`/vector_stores/${e}`,{...t,headers:nv([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}update(e,t,n){return this._client.post(t9`/vector_stores/${e}`,{body:t,...n,headers:nv([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e={},t){return this._client.getAPIList("/vector_stores",tC,{query:e,...t,headers:nv([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}delete(e,t){return this._client.delete(t9`/vector_stores/${e}`,{...t,headers:nv([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}search(e,t,n){return this._client.getAPIList(t9`/vector_stores/${e}/search`,tj,{body:t,method:"post",...n,headers:nv([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}ig.Files=im,ig.FileBatches=ip;class iy extends t2{create(e,t){return this._client.post("/videos",tB({body:e,...t},this._client))}retrieve(e,t){return this._client.get(t9`/videos/${e}`,t)}list(e={},t){return this._client.getAPIList("/videos",tL,{query:e,...t})}delete(e,t){return this._client.delete(t9`/videos/${e}`,t)}downloadContent(e,t={},n){return this._client.get(t9`/videos/${e}/content`,{query:t,...n,headers:nv([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}remix(e,t,n){return this._client.post(t9`/videos/${e}/remix`,tB({body:t,...n},this._client))}}class i_ extends t2{constructor(){super(...arguments),e_.add(this)}async unwrap(e,t,n=this._client.webhookSecret,i=300){return await this.verifySignature(e,t,n,i),JSON.parse(e)}async verifySignature(e,t,n=this._client.webhookSecret,i=300){if("undefined"==typeof crypto||"function"!=typeof crypto.subtle.importKey||"function"!=typeof crypto.subtle.verify)throw Error("Webhook signature verification is only supported when the `crypto` global is defined");eT(this,e_,"m",ev).call(this,n);let s=nv([t]).values,r=eT(this,e_,"m",eb).call(this,s,"webhook-signature"),o=eT(this,e_,"m",eb).call(this,s,"webhook-timestamp"),a=eT(this,e_,"m",eb).call(this,s,"webhook-id"),l=parseInt(o,10);if(isNaN(l))throw new eH("Invalid webhook timestamp format");let u=Math.floor(Date.now()/1e3);if(u-l>i)throw new eH("Webhook timestamp is too old");if(l>u+i)throw new eH("Webhook timestamp is too new");let c=r.split(" ").map(e=>e.startsWith("v1,")?e.substring(3):e),h=n.startsWith("whsec_")?Buffer.from(n.replace("whsec_",""),"base64"):Buffer.from(n,"utf-8"),d=a?`${a}.${o}.${e}`:`${o}.${e}`,p=await crypto.subtle.importKey("raw",h,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(let e of c)try{let t=Buffer.from(e,"base64");if(await crypto.subtle.verify("HMAC",p,t,new TextEncoder().encode(d)))return}catch{continue}throw new eH("The given webhook signature does not match the expected signature")}}e_=new WeakSet,ev=function(e){if("string"!=typeof e||0===e.length)throw Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},eb=function(e,t){if(!e)throw Error("Headers are required");let n=e.get(t);if(null==n)throw Error(`Missing required header: ${t}`);return n};class iv{constructor({baseURL:e=nR("OPENAI_BASE_URL"),apiKey:t=nR("OPENAI_API_KEY"),organization:n=nR("OPENAI_ORG_ID")??null,project:i=nR("OPENAI_PROJECT_ID")??null,webhookSecret:s=nR("OPENAI_WEBHOOK_SECRET")??null,...r}={}){if(ew.add(this),eS.set(this,void 0),this.completions=new nM(this),this.chat=new ny(this),this.embeddings=new nV(this),this.files=new nK(this),this.images=new n8(this),this.audio=new nS(this),this.moderations=new n7(this),this.models=new n5(this),this.fineTuning=new n6(this),this.graders=new n3(this),this.vectorStores=new ig(this),this.webhooks=new i_(this),this.beta=new nF(this),this.batches=new nk(this),this.uploads=new ih(this),this.responses=new iu(this),this.realtime=new ii(this),this.conversations=new nJ(this),this.evals=new nH(this),this.containers=new nB(this),this.videos=new iy(this),void 0===t)throw new eZ("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");let o={apiKey:t,organization:n,project:i,webhookSecret:s,...r,baseURL:e||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&e3())throw new eZ("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");this.baseURL=o.baseURL,this.timeout=o.timeout??ez.DEFAULT_TIMEOUT,this.logger=o.logger??console;let a="warn";this.logLevel=a,this.logLevel=tb(o.logLevel,"ClientOptions.logLevel",this)??tb(nR("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??a,this.fetchOptions=o.fetchOptions,this.maxRetries=o.maxRetries??2,this.fetch=o.fetch??function(){if("undefined"!=typeof fetch)return fetch;throw Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}(),eI(this,eS,tr,"f"),this._options=o,this.apiKey="string"==typeof t?t:"Missing Key",this.organization=n,this.project=i,this.webhookSecret=s}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){}async authHeaders(e){return nv([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return function(e,t={}){let n,i=e,s=function(e=tf){let t;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw TypeError("Encoder has to be a function.");let n=e.charset||tf.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let i=to;if(void 0!==e.format){if(!tu(tl,e.format))throw TypeError("Unknown format option provided.");i=e.format}let s=tl[i],r=tf.filter;if(("function"==typeof e.filter||eY(e.filter))&&(r=e.filter),t=e.arrayFormat&&e.arrayFormat in td?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":tf.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw TypeError("`commaRoundTrip` must be a boolean, or absent");let o=void 0===e.allowDots?!0==!!e.encodeDotInKeys||tf.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:tf.addQueryPrefix,allowDots:o,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:tf.allowEmptyArrays,arrayFormat:t,charset:n,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:tf.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:void 0===e.delimiter?tf.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:tf.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:tf.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:tf.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:tf.encodeValuesOnly,filter:r,format:i,formatter:s,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:tf.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:tf.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:tf.strictNullHandling}}(t);"function"==typeof s.filter?i=(0,s.filter)("",i):eY(s.filter)&&(n=s.filter);let r=[];if("object"!=typeof i||null===i)return"";let o=td[s.arrayFormat],a="comma"===o&&s.commaRoundTrip;n||(n=Object.keys(i)),s.sort&&n.sort(s.sort);let l=new WeakMap;for(let e=0;e<n.length;++e){let t=n[e];s.skipNulls&&null===i[t]||tp(r,function e(t,n,i,s,r,o,a,l,u,c,h,d,p,f,m,g,y,_){var v,b;let w,z=t,S=_,k=0,x=!1;for(;void 0!==(S=S.get(tm))&&!x;){let e=S.get(t);if(k+=1,void 0!==e){if(e===k)throw RangeError("Cyclic object value");x=!0}void 0===S.get(tm)&&(k=0)}if("function"==typeof c?z=c(n,z):z instanceof Date?z=p?.(z):"comma"===i&&eY(z)&&(z=th(z,function(e){return e instanceof Date?p?.(e):e})),null===z){if(o)return u&&!g?u(n,tf.encoder,y,"key",f):n;z=""}if("string"==typeof(v=z)||"number"==typeof v||"boolean"==typeof v||"symbol"==typeof v||"bigint"==typeof v||(b=z)&&"object"==typeof b&&b.constructor&&b.constructor.isBuffer&&b.constructor.isBuffer(b)){if(u){let e=g?n:u(n,tf.encoder,y,"key",f);return[m?.(e)+"="+m?.(u(z,tf.encoder,y,"value",f))]}return[m?.(n)+"="+m?.(String(z))]}let $=[];if(void 0===z)return $;if("comma"===i&&eY(z))g&&u&&(z=th(z,u)),w=[{value:z.length>0?z.join(",")||null:void 0}];else if(eY(c))w=c;else{let e=Object.keys(z);w=h?e.sort(h):e}let A=l?String(n).replace(/\./g,"%2E"):String(n),O=s&&eY(z)&&1===z.length?A+"[]":A;if(r&&eY(z)&&0===z.length)return O+"[]";for(let n=0;n<w.length;++n){let v=w[n],b="object"==typeof v&&void 0!==v.value?v.value:z[v];if(a&&null===b)continue;let S=d&&l?v.replace(/\./g,"%2E"):v,x=eY(z)?"function"==typeof i?i(O,S):O:O+(d?"."+S:"["+S+"]");_.set(t,k);let A=new WeakMap;A.set(tm,_),tp($,e(b,x,i,s,r,o,a,l,"comma"===i&&g&&eY(z)?null:u,c,h,d,p,f,m,g,y,A))}return $}(i[t],t,o,a,s.allowEmptyArrays,s.strictNullHandling,s.skipNulls,s.encodeDotInKeys,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,l))}let u=r.join(s.delimiter),c=!0===s.addQueryPrefix?"?":"";return s.charsetSentinel&&("iso-8859-1"===s.charset?c+="utf8=%26%2310003%3B&":c+="utf8=%E2%9C%93&"),u.length>0?c+u:""}(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${e9}`}defaultIdempotencyKey(){return`stainless-node-retry-${eE()}`}makeStatusError(e,t,n,i){return eR.generate(e,t,n,i)}async _callApiKey(){let e;let t=this._options.apiKey;if("function"!=typeof t)return!1;try{e=await t()}catch(e){if(e instanceof eZ)throw e;throw new eZ(`Failed to get token from 'apiKey' function: ${e.message}`,{cause:e})}if("string"!=typeof e||!e)throw new eZ(`Expected 'apiKey' function argument to return a string but it returned ${e}`);return this.apiKey=e,!0}buildURL(e,t,n){let i=!eT(this,ew,"m",ek).call(this)&&n||this.baseURL,s=new URL(eG(e)?e:i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),r=this.defaultQuery();return!function(e){if(!e)return!0;for(let t in e)return!1;return!0}(r)&&(t={...r,...t}),"object"==typeof t&&t&&!Array.isArray(t)&&(s.search=this.stringifyQuery(t)),s.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:t,options:n}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then(n=>({method:e,path:t,...n})))}request(e,t=null){return new tP(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,n){let i=await e,s=i.maxRetries??this.maxRetries;null==t&&(t=s),await this.prepareOptions(i);let{req:r,url:o,timeout:a}=await this.buildRequest(i,{retryCount:s-t});await this.prepareRequest(r,{url:o,options:i});let l="log_"+(16777216*Math.random()|0).toString(16).padStart(6,"0"),u=void 0===n?"":`, retryOf: ${n}`,c=Date.now();if(tx(this).debug(`[${l}] sending request`,t$({retryOfRequestLogID:n,method:i.method,url:o,options:i,headers:r.headers})),i.signal?.aborted)throw new ej;let h=new AbortController,d=await this.fetchWithTimeout(o,r,a,h).catch(eP),p=Date.now();if(d instanceof globalThis.Error){let e=`retrying, ${t} attempts remaining`;if(i.signal?.aborted)throw new ej;let s=eN(d)||/timed? ?out/i.test(String(d)+("cause"in d?String(d.cause):""));if(t)return tx(this).info(`[${l}] connection ${s?"timed out":"failed"} - ${e}`),tx(this).debug(`[${l}] connection ${s?"timed out":"failed"} (${e})`,t$({retryOfRequestLogID:n,url:o,durationMs:p-c,message:d.message})),this.retryRequest(i,t,n??l);if(tx(this).info(`[${l}] connection ${s?"timed out":"failed"} - error; no more retries left`),tx(this).debug(`[${l}] connection ${s?"timed out":"failed"} (error; no more retries left)`,t$({retryOfRequestLogID:n,url:o,durationMs:p-c,message:d.message})),s)throw new eL;throw new eC({cause:d})}let f=[...d.headers.entries()].filter(([e])=>"x-request-id"===e).map(([e,t])=>", "+e+": "+JSON.stringify(t)).join(""),m=`[${l}${u}${f}] ${r.method} ${o} ${d.ok?"succeeded":"failed"} with status ${d.status} in ${p-c}ms`;if(!d.ok){let e=await this.shouldRetry(d);if(t&&e){let e=`retrying, ${t} attempts remaining`;return await ts(d.body),tx(this).info(`${m} - ${e}`),tx(this).debug(`[${l}] response error (${e})`,t$({retryOfRequestLogID:n,url:d.url,status:d.status,headers:d.headers,durationMs:p-c})),this.retryRequest(i,t,n??l,d.headers)}let s=e?"error; no more retries left":"error; not retryable";tx(this).info(`${m} - ${s}`);let r=await d.text().catch(e=>eP(e).message),o=e4(r),a=o?void 0:r;throw tx(this).debug(`[${l}] response error (${s})`,t$({retryOfRequestLogID:n,url:d.url,status:d.status,headers:d.headers,message:a,durationMs:Date.now()-c})),this.makeStatusError(d.status,o,a,d.headers)}return tx(this).info(m),tx(this).debug(`[${l}] response start`,t$({retryOfRequestLogID:n,url:d.url,status:d.status,headers:d.headers,durationMs:p-c})),{response:d,options:i,controller:h,requestLogID:l,retryOfRequestLogID:n,startTime:c}}getAPIList(e,t,n){return this.requestAPIList(t,{method:"get",path:e,...n})}requestAPIList(e,t){return new tR(this,this.makeRequest(t,null,void 0),e)}async fetchWithTimeout(e,t,n,i){let{signal:s,method:r,...o}=t||{};s&&s.addEventListener("abort",()=>i.abort());let a=setTimeout(()=>i.abort(),n),l=globalThis.ReadableStream&&o.body instanceof globalThis.ReadableStream||"object"==typeof o.body&&null!==o.body&&Symbol.asyncIterator in o.body,u={signal:i.signal,...l?{duplex:"half"}:{},method:"GET",...o};r&&(u.method=r.toUpperCase());try{return await this.fetch.call(void 0,e,u)}finally{clearTimeout(a)}}async shouldRetry(e){let t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||409===e.status||429===e.status||e.status>=500)}async retryRequest(e,t,n,i){let s;let r=i?.get("retry-after-ms");if(r){let e=parseFloat(r);Number.isNaN(e)||(s=e)}let o=i?.get("retry-after");if(o&&!s){let e=parseFloat(o);s=Number.isNaN(e)?Date.parse(o)-Date.now():1e3*e}if(!(s&&0<=s&&s<6e4)){let n=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(t,n)}return await e6(s),this.makeRequest(e,t-1,n)}calculateDefaultRetryTimeoutMillis(e,t){return Math.min(.5*Math.pow(2,t-e),8)*(1-.25*Math.random())*1e3}async buildRequest(e,{retryCount:t=0}={}){let n={...e},{method:i,path:s,query:r,defaultBaseURL:o}=n,a=this.buildURL(s,r,o);"timeout"in n&&e2("timeout",n.timeout),n.timeout=n.timeout??this.timeout;let{bodyHeaders:l,body:u}=this.buildBody({options:n}),c=await this.buildHeaders({options:e,method:i,bodyHeaders:l,retryCount:t});return{req:{method:i,headers:c,...n.signal&&{signal:n.signal},...globalThis.ReadableStream&&u instanceof globalThis.ReadableStream&&{duplex:"half"},...u&&{body:u},...this.fetchOptions??{},...n.fetchOptions??{}},url:a,timeout:n.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:n,retryCount:i}){let s={};this.idempotencyHeader&&"get"!==t&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);let r=nv([s,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...te(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,n,e.headers]);return this.validateHeaders(r),r.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};let n=nv([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||"string"==typeof e&&n.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:"object"==typeof e&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&"function"==typeof e.next)?{bodyHeaders:void 0,body:tn(e)}:eT(this,eS,"f").call(this,{body:e,headers:n})}}ez=iv,eS=new WeakMap,ew=new WeakSet,ek=function(){return"https://api.openai.com/v1"!==this.baseURL},iv.OpenAI=ez,iv.DEFAULT_TIMEOUT=6e5,iv.OpenAIError=eZ,iv.APIError=eR,iv.APIConnectionError=eC,iv.APIConnectionTimeoutError=eL,iv.APIUserAbortError=ej,iv.NotFoundError=eU,iv.ConflictError=eB,iv.RateLimitError=eJ,iv.BadRequestError=eF,iv.AuthenticationError=eM,iv.InternalServerError=eV,iv.PermissionDeniedError=eD,iv.UnprocessableEntityError=eW,iv.InvalidWebhookSignatureError=eH,iv.toFile=t0,iv.Completions=nM,iv.Chat=ny,iv.Embeddings=nV,iv.Files=nK,iv.Images=n8,iv.Audio=nS,iv.Moderations=n7,iv.Models=n5,iv.FineTuning=n6,iv.Graders=n3,iv.VectorStores=ig,iv.Webhooks=i_,iv.Beta=nF,iv.Batches=nk,iv.Uploads=ih,iv.Responses=iu,iv.Realtime=ii,iv.Conversations=nJ,iv.Evals=nH,iv.Containers=nB,iv.Videos=iy;class ib extends iv{constructor({baseURL:e=nR("OPENAI_BASE_URL"),apiKey:t=nR("AZURE_OPENAI_API_KEY"),apiVersion:n=nR("OPENAI_API_VERSION"),endpoint:i,deployment:s,azureADTokenProvider:r,dangerouslyAllowBrowser:o,...a}={}){if(!n)throw new eZ("The OPENAI_API_VERSION environment variable is missing or empty; either provide it, or instantiate the AzureOpenAI client with an apiVersion option, like new AzureOpenAI({ apiVersion: 'My API Version' }).");if("function"==typeof r&&(o=!0),!r&&!t)throw new eZ("Missing credentials. Please pass one of `apiKey` and `azureADTokenProvider`, or set the `AZURE_OPENAI_API_KEY` environment variable.");if(r&&t)throw new eZ("The `apiKey` and `azureADTokenProvider` arguments are mutually exclusive; only one can be passed at a time.");if(a.defaultQuery={...a.defaultQuery,"api-version":n},e){if(i)throw new eZ("baseURL and endpoint are mutually exclusive")}else{if(i||(i=process.env.AZURE_OPENAI_ENDPOINT),!i)throw new eZ("Must provide one of the `baseURL` or `endpoint` arguments, or the `AZURE_OPENAI_ENDPOINT` environment variable");e=`${i}/openai`}super({apiKey:r??t,baseURL:e,...a,...void 0!==o?{dangerouslyAllowBrowser:o}:{}}),this.apiVersion="",this.apiVersion=n,this.deploymentName=s}async buildRequest(e,t={}){if(iw.has(e.path)&&"post"===e.method&&void 0!==e.body){if(!e1(e.body))throw Error("Expected request body to be an object");let t=this.deploymentName||e.body.model||e.__metadata?.model;void 0===t||this.baseURL.includes("/deployments")||(e.path=`/deployments/${t}${e.path}`)}return super.buildRequest(e,t)}async authHeaders(e){return"string"==typeof this._options.apiKey?nv([{"api-key":this.apiKey}]):super.authHeaders(e)}}let iw=new Set(["/completions","/chat/completions","/embeddings","/audio/transcriptions","/audio/translations","/audio/speech","/images/generations","/batches","/images/edits"])},6543:(e,t,n)=>{n.d(t,{IXX:()=>ol,KmV:()=>oP,Rxh:()=>rD,Ryn:()=>oh,Z_8:()=>sQ});var i,s,r={};n.r(r),n.d(r,{base64:()=>eA,base64url:()=>eO,bigint:()=>eL,boolean:()=>eD,browserEmail:()=>eb,cidrv4:()=>ex,cidrv6:()=>e$,cuid:()=>en,cuid2:()=>ei,date:()=>eP,datetime:()=>ej,domain:()=>eT,duration:()=>el,e164:()=>eE,email:()=>em,emoji:()=>ew,extendedDuration:()=>eu,guid:()=>ec,hex:()=>eV,hostname:()=>eI,html5Email:()=>eg,idnEmail:()=>ev,integer:()=>eF,ipv4:()=>ez,ipv6:()=>eS,ksuid:()=>eo,lowercase:()=>eW,mac:()=>ek,md5_base64:()=>eK,md5_base64url:()=>eG,md5_hex:()=>eH,nanoid:()=>ea,null:()=>eU,number:()=>eM,rfc5322Email:()=>ey,sha1_base64:()=>eQ,sha1_base64url:()=>e0,sha1_hex:()=>eY,sha256_base64:()=>e2,sha256_base64url:()=>e4,sha256_hex:()=>e1,sha384_base64:()=>e9,sha384_base64url:()=>e3,sha384_hex:()=>e6,sha512_base64:()=>e5,sha512_base64url:()=>e7,sha512_hex:()=>e8,string:()=>eC,time:()=>eR,ulid:()=>es,undefined:()=>eB,unicodeEmail:()=>e_,uppercase:()=>eJ,uuid:()=>eh,uuid4:()=>ed,uuid6:()=>ep,uuid7:()=>ef,xid:()=>er});var o={};n.r(o),n.d(o,{endsWith:()=>ij,gt:()=>i_,gte:()=>iv,includes:()=>iZ,length:()=>iT,lowercase:()=>iN,lt:()=>ig,lte:()=>iy,maxLength:()=>iO,maxSize:()=>ix,mime:()=>iL,minLength:()=>iI,minSize:()=>i$,multipleOf:()=>ik,negative:()=>iw,nonnegative:()=>iS,nonpositive:()=>iz,normalize:()=>iM,overwrite:()=>iF,positive:()=>ib,property:()=>iC,regex:()=>iE,size:()=>iA,slugify:()=>iW,startsWith:()=>iR,toLowerCase:()=>iU,toUpperCase:()=>iB,trim:()=>iD,uppercase:()=>iP});var a={};n.r(a),n.d(a,{ZodISODate:()=>sT,ZodISODateTime:()=>sO,ZodISODuration:()=>sZ,ZodISOTime:()=>sN,date:()=>sE,datetime:()=>sI,duration:()=>sR,time:()=>sP});var l={};function u(e,t,n){function i(n,i){if(n._zod||Object.defineProperty(n,"_zod",{value:{def:i,constr:o,traits:new Set},enumerable:!1}),n._zod.traits.has(e))return;n._zod.traits.add(e),t(n,i);let s=o.prototype,r=Object.keys(s);for(let e=0;e<r.length;e++){let t=r[e];t in n||(n[t]=s[t].bind(n))}}let s=n?.Parent??Object;class r extends s{}function o(e){var t;let s=n?.Parent?new r:this;for(let n of(i(s,e),(t=s._zod).deferred??(t.deferred=[]),s._zod.deferred))n();return s}return Object.defineProperty(r,"name",{value:e}),Object.defineProperty(o,"init",{value:i}),Object.defineProperty(o,Symbol.hasInstance,{value:t=>!!n?.Parent&&t instanceof n.Parent||t?._zod?.traits?.has(e)}),Object.defineProperty(o,"name",{value:e}),o}n.r(l),n.d(l,{ZodAny:()=>r8,ZodArray:()=>oa,ZodBase64:()=>rA,ZodBase64URL:()=>rI,ZodBigInt:()=>rK,ZodBigIntFormat:()=>rY,ZodBoolean:()=>rX,ZodCIDRv4:()=>rS,ZodCIDRv6:()=>rx,ZodCUID:()=>ra,ZodCUID2:()=>ru,ZodCatch:()=>o2,ZodCodec:()=>o5,ZodCustom:()=>ac,ZodCustomStringFormat:()=>rR,ZodDate:()=>or,ZodDefault:()=>oX,ZodDiscriminatedUnion:()=>o_,ZodE164:()=>rE,ZodEmail:()=>s1,ZodEmoji:()=>ri,ZodEnum:()=>oN,ZodExactOptional:()=>oB,ZodFile:()=>oC,ZodFunction:()=>al,ZodGUID:()=>s4,ZodIPv4:()=>ry,ZodIPv6:()=>rw,ZodIntersection:()=>ob,ZodJWT:()=>rP,ZodKSUID:()=>rm,ZodLazy:()=>as,ZodLiteral:()=>oR,ZodMAC:()=>rv,ZodMap:()=>oO,ZodNaN:()=>o6,ZodNanoID:()=>rr,ZodNever:()=>ot,ZodNonOptional:()=>oY,ZodNull:()=>r9,ZodNullable:()=>oJ,ZodNumber:()=>rM,ZodNumberFormat:()=>rU,ZodObject:()=>oc,ZodOptional:()=>oD,ZodPipe:()=>o3,ZodPrefault:()=>oK,ZodPromise:()=>ao,ZodReadonly:()=>ae,ZodRecord:()=>ok,ZodSet:()=>oT,ZodString:()=>sY,ZodStringFormat:()=>s0,ZodSuccess:()=>o0,ZodSymbol:()=>r1,ZodTemplateLiteral:()=>an,ZodTransform:()=>oF,ZodTuple:()=>oz,ZodType:()=>sK,ZodULID:()=>rh,ZodURL:()=>re,ZodUUID:()=>s9,ZodUndefined:()=>r4,ZodUnion:()=>of,ZodUnknown:()=>r7,ZodVoid:()=>oi,ZodXID:()=>rp,ZodXor:()=>og,_ZodString:()=>sG,_default:()=>oH,_function:()=>au,any:()=>r5,array:()=>ol,base64:()=>rO,base64url:()=>rT,bigint:()=>rG,boolean:()=>rH,catch:()=>o4,check:()=>ah,cidrv4:()=>rk,cidrv6:()=>r$,codec:()=>o7,cuid:()=>rl,cuid2:()=>rc,custom:()=>ad,date:()=>oo,describe:()=>am,discriminatedUnion:()=>ov,e164:()=>rN,email:()=>s2,emoji:()=>rs,enum:()=>oP,exactOptional:()=>oW,file:()=>oL,float32:()=>rW,float64:()=>rJ,function:()=>au,guid:()=>s6,hash:()=>rF,hex:()=>rL,hostname:()=>rC,httpUrl:()=>rn,instanceof:()=>ay,int:()=>rB,int32:()=>rV,int64:()=>rQ,intersection:()=>ow,ipv4:()=>r_,ipv6:()=>rz,json:()=>av,jwt:()=>rZ,keyof:()=>ou,ksuid:()=>rg,lazy:()=>ar,literal:()=>oj,looseObject:()=>op,looseRecord:()=>oA,mac:()=>rb,map:()=>oI,meta:()=>ag,nan:()=>o9,nanoid:()=>ro,nativeEnum:()=>oZ,never:()=>on,nonoptional:()=>oQ,null:()=>r3,nullable:()=>oV,nullish:()=>oq,number:()=>rD,object:()=>oh,optional:()=>oU,partialRecord:()=>o$,pipe:()=>o8,prefault:()=>oG,preprocess:()=>ab,promise:()=>aa,readonly:()=>at,record:()=>ox,refine:()=>ap,set:()=>oE,strictObject:()=>od,string:()=>sQ,stringFormat:()=>rj,stringbool:()=>a_,success:()=>o1,superRefine:()=>af,symbol:()=>r2,templateLiteral:()=>ai,transform:()=>oM,tuple:()=>oS,uint32:()=>rq,uint64:()=>r0,ulid:()=>rd,undefined:()=>r6,union:()=>om,unknown:()=>oe,url:()=>rt,uuid:()=>s3,uuidv4:()=>s8,uuidv6:()=>s5,uuidv7:()=>s7,void:()=>os,xid:()=>rf,xor:()=>oy}),Object.freeze({status:"aborted"}),Symbol("zod_brand");class c extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class h extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}let d={};function p(e){return e&&Object.assign(d,e),d}function f(e){let t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,n])=>-1===t.indexOf(+e)).map(([e,t])=>t)}function m(e,t="|"){return e.map(e=>R(e)).join(t)}function g(e,t){return"bigint"==typeof t?t.toString():t}function y(e){return{get value(){{let t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function _(e){return null==e}function v(e){let t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}let b=Symbol("evaluating");function w(e,t,n){let i;Object.defineProperty(e,t,{get(){if(i!==b)return void 0===i&&(i=b,i=n()),i},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function z(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function S(...e){let t={};for(let n of e)Object.assign(t,Object.getOwnPropertyDescriptors(n));return Object.defineProperties({},t)}function k(e){return JSON.stringify(e)}let x="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function $(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}let A=y(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch(e){return!1}});function O(e){if(!1===$(e))return!1;let t=e.constructor;if(void 0===t||"function"!=typeof t)return!0;let n=t.prototype;return!1!==$(n)&&!1!==Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")}function I(e){return O(e)?{...e}:Array.isArray(e)?[...e]:e}let T=new Set(["string","number","symbol"]),E=new Set(["string","number","bigint","boolean","symbol","undefined"]);function N(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function P(e,t,n){let i=new e._zod.constr(t??e._zod.def);return(!t||n?.parent)&&(i._zod.parent=e),i}function Z(e){if(!e)return{};if("string"==typeof e)return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");e.error=e.message}return(delete e.message,"string"==typeof e.error)?{...e,error:()=>e.error}:e}function R(e){return"bigint"==typeof e?e.toString()+"n":"string"==typeof e?`"${e}"`:`${e}`}let j={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},C={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function L(e,t=0){if(!0===e.aborted)return!0;for(let n=t;n<e.issues.length;n++)if(e.issues[n]?.continue!==!0)return!0;return!1}function F(e,t){return t.map(t=>(t.path??(t.path=[]),t.path.unshift(e),t))}function M(e){return"string"==typeof e?e:e?.message}function D(e,t,n){let i={...e,path:e.path??[]};if(!e.message){let s=M(e.inst?._zod.def?.error?.(e))??M(t?.error?.(e))??M(n.customError?.(e))??M(n.localeError?.(e))??"Invalid input";i.message=s}return delete i.inst,delete i.continue,t?.reportInput||delete i.input,i}function U(e){return e instanceof Set?"set":e instanceof Map?"map":e instanceof File?"file":"unknown"}function B(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}function W(...e){let[t,n,i]=e;return"string"==typeof t?{message:t,code:"custom",input:n,inst:i}:{...t}}let J=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,g,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},V=u("$ZodError",J),q=u("$ZodError",J,{Parent:Error}),X=e=>(t,n,i,s)=>{let r=i?Object.assign(i,{async:!1}):{async:!1},o=t._zod.run({value:n,issues:[]},r);if(o instanceof Promise)throw new c;if(o.issues.length){let t=new(s?.Err??e)(o.issues.map(e=>D(e,r,p())));throw x(t,s?.callee),t}return o.value},H=X(q),K=e=>async(t,n,i,s)=>{let r=i?Object.assign(i,{async:!0}):{async:!0},o=t._zod.run({value:n,issues:[]},r);if(o instanceof Promise&&(o=await o),o.issues.length){let t=new(s?.Err??e)(o.issues.map(e=>D(e,r,p())));throw x(t,s?.callee),t}return o.value},G=K(q),Y=e=>(t,n,i)=>{let s=i?{...i,async:!1}:{async:!1},r=t._zod.run({value:n,issues:[]},s);if(r instanceof Promise)throw new c;return r.issues.length?{success:!1,error:new(e??V)(r.issues.map(e=>D(e,s,p())))}:{success:!0,data:r.value}},Q=Y(q),ee=e=>async(t,n,i)=>{let s=i?Object.assign(i,{async:!0}):{async:!0},r=t._zod.run({value:n,issues:[]},s);return r instanceof Promise&&(r=await r),r.issues.length?{success:!1,error:new e(r.issues.map(e=>D(e,s,p())))}:{success:!0,data:r.value}},et=ee(q),en=/^[cC][^\s-]{8,}$/,ei=/^[0-9a-z]+$/,es=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,er=/^[0-9a-vA-V]{20}$/,eo=/^[A-Za-z0-9]{27}$/,ea=/^[a-zA-Z0-9_-]{21}$/,el=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,eu=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ec=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,eh=e=>e?RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,ed=eh(4),ep=eh(6),ef=eh(7),em=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,eg=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,ey=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,e_=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,ev=e_,eb=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function ew(){return RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")}let ez=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,eS=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,ek=e=>{let t=N(e??":");return RegExp(`^(?:[0-9A-F]{2}${t}){5}[0-9A-F]{2}$|^(?:[0-9a-f]{2}${t}){5}[0-9a-f]{2}$`)},ex=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,e$=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,eA=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,eO=/^[A-Za-z0-9_-]*$/,eI=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,eT=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,eE=/^\+[1-9]\d{6,14}$/,eN="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",eP=RegExp(`^${eN}$`);function eZ(e){let t="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof e.precision?-1===e.precision?`${t}`:0===e.precision?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function eR(e){return RegExp(`^${eZ(e)}$`)}function ej(e){let t=eZ({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let i=`${t}(?:${n.join("|")})`;return RegExp(`^${eN}T(?:${i})$`)}let eC=e=>{let t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return RegExp(`^${t}$`)},eL=/^-?\d+n?$/,eF=/^-?\d+$/,eM=/^-?\d+(?:\.\d+)?$/,eD=/^(?:true|false)$/i,eU=/^null$/i,eB=/^undefined$/i,eW=/^[^A-Z]*$/,eJ=/^[^a-z]*$/,eV=/^[0-9a-fA-F]*$/;function eq(e,t){return RegExp(`^[A-Za-z0-9+/]{${e}}${t}$`)}function eX(e){return RegExp(`^[A-Za-z0-9_-]{${e}}$`)}let eH=/^[0-9a-fA-F]{32}$/,eK=eq(22,"=="),eG=eX(22),eY=/^[0-9a-fA-F]{40}$/,eQ=eq(27,"="),e0=eX(27),e1=/^[0-9a-fA-F]{64}$/,e2=eq(43,"="),e4=eX(43),e6=/^[0-9a-fA-F]{96}$/,e9=eq(64,""),e3=eX(64),e8=/^[0-9a-fA-F]{128}$/,e5=eq(86,"=="),e7=eX(86),te=u("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),tt={number:"number",bigint:"bigint",object:"date"},tn=u("$ZodCheckLessThan",(e,t)=>{te.init(e,t);let n=tt[typeof t.value];e._zod.onattach.push(e=>{let n=e._zod.bag,i=(t.inclusive?n.maximum:n.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<i&&(t.inclusive?n.maximum=t.value:n.exclusiveMaximum=t.value)}),e._zod.check=i=>{(t.inclusive?i.value<=t.value:i.value<t.value)||i.issues.push({origin:n,code:"too_big",maximum:"object"==typeof t.value?t.value.getTime():t.value,input:i.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),ti=u("$ZodCheckGreaterThan",(e,t)=>{te.init(e,t);let n=tt[typeof t.value];e._zod.onattach.push(e=>{let n=e._zod.bag,i=(t.inclusive?n.minimum:n.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>i&&(t.inclusive?n.minimum=t.value:n.exclusiveMinimum=t.value)}),e._zod.check=i=>{(t.inclusive?i.value>=t.value:i.value>t.value)||i.issues.push({origin:n,code:"too_small",minimum:"object"==typeof t.value?t.value.getTime():t.value,input:i.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),ts=u("$ZodCheckMultipleOf",(e,t)=>{te.init(e,t),e._zod.onattach.push(e=>{var n;(n=e._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof n.value?n.value%t.value===BigInt(0):0===function(e,t){let n=(e.toString().split(".")[1]||"").length,i=t.toString(),s=(i.split(".")[1]||"").length;if(0===s&&/\d?e-\d?/.test(i)){let e=i.match(/\d?e-(\d?)/);e?.[1]&&(s=Number.parseInt(e[1]))}let r=n>s?n:s;return Number.parseInt(e.toFixed(r).replace(".",""))%Number.parseInt(t.toFixed(r).replace(".",""))/10**r}(n.value,t.value))||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),tr=u("$ZodCheckNumberFormat",(e,t)=>{te.init(e,t),t.format=t.format||"float64";let n=t.format?.includes("int"),i=n?"int":"number",[s,r]=j[t.format];e._zod.onattach.push(e=>{let i=e._zod.bag;i.format=t.format,i.minimum=s,i.maximum=r,n&&(i.pattern=eF)}),e._zod.check=o=>{let a=o.value;if(n){if(!Number.isInteger(a)){o.issues.push({expected:i,format:t.format,code:"invalid_type",continue:!1,input:a,inst:e});return}if(!Number.isSafeInteger(a)){a>0?o.issues.push({input:a,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:i,inclusive:!0,continue:!t.abort}):o.issues.push({input:a,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:i,inclusive:!0,continue:!t.abort});return}}a<s&&o.issues.push({origin:"number",input:a,code:"too_small",minimum:s,inclusive:!0,inst:e,continue:!t.abort}),a>r&&o.issues.push({origin:"number",input:a,code:"too_big",maximum:r,inclusive:!0,inst:e,continue:!t.abort})}}),to=u("$ZodCheckBigIntFormat",(e,t)=>{te.init(e,t);let[n,i]=C[t.format];e._zod.onattach.push(e=>{let s=e._zod.bag;s.format=t.format,s.minimum=n,s.maximum=i}),e._zod.check=s=>{let r=s.value;r<n&&s.issues.push({origin:"bigint",input:r,code:"too_small",minimum:n,inclusive:!0,inst:e,continue:!t.abort}),r>i&&s.issues.push({origin:"bigint",input:r,code:"too_big",maximum:i,inclusive:!0,inst:e,continue:!t.abort})}}),ta=u("$ZodCheckMaxSize",(e,t)=>{var n;te.init(e,t),(n=e._zod.def).when??(n.when=e=>{let t=e.value;return!_(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{let n=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<n&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{let i=n.value;i.size<=t.maximum||n.issues.push({origin:U(i),code:"too_big",maximum:t.maximum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),tl=u("$ZodCheckMinSize",(e,t)=>{var n;te.init(e,t),(n=e._zod.def).when??(n.when=e=>{let t=e.value;return!_(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{let n=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>n&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{let i=n.value;i.size>=t.minimum||n.issues.push({origin:U(i),code:"too_small",minimum:t.minimum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),tu=u("$ZodCheckSizeEquals",(e,t)=>{var n;te.init(e,t),(n=e._zod.def).when??(n.when=e=>{let t=e.value;return!_(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{let n=e._zod.bag;n.minimum=t.size,n.maximum=t.size,n.size=t.size}),e._zod.check=n=>{let i=n.value,s=i.size;if(s===t.size)return;let r=s>t.size;n.issues.push({origin:U(i),...r?{code:"too_big",maximum:t.size}:{code:"too_small",minimum:t.size},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),tc=u("$ZodCheckMaxLength",(e,t)=>{var n;te.init(e,t),(n=e._zod.def).when??(n.when=e=>{let t=e.value;return!_(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let n=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<n&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{let i=n.value;if(i.length<=t.maximum)return;let s=B(i);n.issues.push({origin:s,code:"too_big",maximum:t.maximum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),th=u("$ZodCheckMinLength",(e,t)=>{var n;te.init(e,t),(n=e._zod.def).when??(n.when=e=>{let t=e.value;return!_(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let n=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>n&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{let i=n.value;if(i.length>=t.minimum)return;let s=B(i);n.issues.push({origin:s,code:"too_small",minimum:t.minimum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),td=u("$ZodCheckLengthEquals",(e,t)=>{var n;te.init(e,t),(n=e._zod.def).when??(n.when=e=>{let t=e.value;return!_(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let n=e._zod.bag;n.minimum=t.length,n.maximum=t.length,n.length=t.length}),e._zod.check=n=>{let i=n.value,s=i.length;if(s===t.length)return;let r=B(i),o=s>t.length;n.issues.push({origin:r,...o?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),tp=u("$ZodCheckStringFormat",(e,t)=>{var n,i;te.init(e,t),e._zod.onattach.push(e=>{let n=e._zod.bag;n.format=t.format,t.pattern&&(n.patterns??(n.patterns=new Set),n.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=n=>{t.pattern.lastIndex=0,t.pattern.test(n.value)||n.issues.push({origin:"string",code:"invalid_format",format:t.format,input:n.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(i=e._zod).check??(i.check=()=>{})}),tf=u("$ZodCheckRegex",(e,t)=>{tp.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,t.pattern.test(n.value)||n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),tm=u("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=eW),tp.init(e,t)}),tg=u("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=eJ),tp.init(e,t)}),ty=u("$ZodCheckIncludes",(e,t)=>{te.init(e,t);let n=N(t.includes),i=new RegExp("number"==typeof t.position?`^.{${t.position}}${n}`:n);t.pattern=i,e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(i)}),e._zod.check=n=>{n.value.includes(t.includes,t.position)||n.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:n.value,inst:e,continue:!t.abort})}}),t_=u("$ZodCheckStartsWith",(e,t)=>{te.init(e,t);let n=RegExp(`^${N(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),tv=u("$ZodCheckEndsWith",(e,t)=>{te.init(e,t);let n=RegExp(`.*${N(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}});function tb(e,t,n){e.issues.length&&t.issues.push(...F(n,e.issues))}let tw=u("$ZodCheckProperty",(e,t)=>{te.init(e,t),e._zod.check=e=>{let n=t.schema._zod.run({value:e.value[t.property],issues:[]},{});if(n instanceof Promise)return n.then(n=>tb(n,e,t.property));tb(n,e,t.property)}}),tz=u("$ZodCheckMimeType",(e,t)=>{te.init(e,t);let n=new Set(t.mime);e._zod.onattach.push(e=>{e._zod.bag.mime=t.mime}),e._zod.check=i=>{n.has(i.value.type)||i.issues.push({code:"invalid_value",values:t.mime,input:i.value.type,inst:e,continue:!t.abort})}}),tS=u("$ZodCheckOverwrite",(e,t)=>{te.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}});class tk{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e){e(this,{execution:"sync"}),e(this,{execution:"async"});return}let t=e.split("\n").filter(e=>e),n=Math.min(...t.map(e=>e.length-e.trimStart().length));for(let e of t.map(e=>e.slice(n)).map(e=>" ".repeat(2*this.indent)+e))this.content.push(e)}compile(){return Function(...this?.args,[...(this?.content??[""]).map(e=>`  ${e}`)].join("\n"))}}let tx={major:4,minor:3,patch:4},t$=u("$ZodType",(e,t)=>{var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=tx;let i=[...e._zod.def.checks??[]];for(let t of(e._zod.traits.has("$ZodCheck")&&i.unshift(e),i))for(let n of t._zod.onattach)n(e);if(0===i.length)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{let t=(e,t,n)=>{let i,s=L(e);for(let r of t){if(r._zod.def.when){if(!r._zod.def.when(e))continue}else if(s)continue;let t=e.issues.length,o=r._zod.check(e);if(o instanceof Promise&&n?.async===!1)throw new c;if(i||o instanceof Promise)i=(i??Promise.resolve()).then(async()=>{await o,e.issues.length===t||s||(s=L(e,t))});else{if(e.issues.length===t)continue;s||(s=L(e,t))}}return i?i.then(()=>e):e},n=(n,s,r)=>{if(L(n))return n.aborted=!0,n;let o=t(s,i,r);if(o instanceof Promise){if(!1===r.async)throw new c;return o.then(t=>e._zod.parse(t,r))}return e._zod.parse(o,r)};e._zod.run=(s,r)=>{if(r.skipChecks)return e._zod.parse(s,r);if("backward"===r.direction){let t=e._zod.parse({value:s.value,issues:[]},{...r,skipChecks:!0});return t instanceof Promise?t.then(e=>n(e,s,r)):n(t,s,r)}let o=e._zod.parse(s,r);if(o instanceof Promise){if(!1===r.async)throw new c;return o.then(e=>t(e,i,r))}return t(o,i,r)}}w(e,"~standard",()=>({validate:t=>{try{let n=Q(e,t);return n.success?{value:n.data}:{issues:n.error?.issues}}catch(n){return et(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}))}),tA=u("$ZodString",(e,t)=>{t$.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??eC(e._zod.bag),e._zod.parse=(n,i)=>{if(t.coerce)try{n.value=String(n.value)}catch(e){}return"string"==typeof n.value||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),tO=u("$ZodStringFormat",(e,t)=>{tp.init(e,t),tA.init(e,t)}),tI=u("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=ec),tO.init(e,t)}),tT=u("$ZodUUID",(e,t)=>{if(t.version){let e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=eh(e))}else t.pattern??(t.pattern=eh());tO.init(e,t)}),tE=u("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=em),tO.init(e,t)}),tN=u("$ZodURL",(e,t)=>{tO.init(e,t),e._zod.check=n=>{try{let i=n.value.trim(),s=new URL(i);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),t.normalize?n.value=s.href:n.value=i;return}catch(i){n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),tP=u("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=ew()),tO.init(e,t)}),tZ=u("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=ea),tO.init(e,t)}),tR=u("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=en),tO.init(e,t)}),tj=u("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=ei),tO.init(e,t)}),tC=u("$ZodULID",(e,t)=>{t.pattern??(t.pattern=es),tO.init(e,t)}),tL=u("$ZodXID",(e,t)=>{t.pattern??(t.pattern=er),tO.init(e,t)}),tF=u("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=eo),tO.init(e,t)}),tM=u("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=ej(t)),tO.init(e,t)}),tD=u("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=eP),tO.init(e,t)}),tU=u("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=eR(t)),tO.init(e,t)}),tB=u("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=el),tO.init(e,t)}),tW=u("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=ez),tO.init(e,t),e._zod.bag.format="ipv4"}),tJ=u("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=eS),tO.init(e,t),e._zod.bag.format="ipv6",e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),tV=u("$ZodMAC",(e,t)=>{t.pattern??(t.pattern=ek(t.delimiter)),tO.init(e,t),e._zod.bag.format="mac"}),tq=u("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=ex),tO.init(e,t)}),tX=u("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=e$),tO.init(e,t),e._zod.check=n=>{let i=n.value.split("/");try{if(2!==i.length)throw Error();let[e,t]=i;if(!t)throw Error();let n=Number(t);if(`${n}`!==t||n<0||n>128)throw Error();new URL(`http://[${e}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function tH(e){if(""===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}let tK=u("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=eA),tO.init(e,t),e._zod.bag.contentEncoding="base64",e._zod.check=n=>{tH(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}}),tG=u("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=eO),tO.init(e,t),e._zod.bag.contentEncoding="base64url",e._zod.check=n=>{!function(e){if(!eO.test(e))return!1;let t=e.replace(/[-_]/g,e=>"-"===e?"+":"/");return tH(t.padEnd(4*Math.ceil(t.length/4),"="))}(n.value)&&n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),tY=u("$ZodE164",(e,t)=>{t.pattern??(t.pattern=eE),tO.init(e,t)}),tQ=u("$ZodJWT",(e,t)=>{tO.init(e,t),e._zod.check=n=>{!function(e,t=null){try{let n=e.split(".");if(3!==n.length)return!1;let[i]=n;if(!i)return!1;let s=JSON.parse(atob(i));if("typ"in s&&s?.typ!=="JWT"||!s.alg||t&&(!("alg"in s)||s.alg!==t))return!1;return!0}catch{return!1}}(n.value,t.alg)&&n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),t0=u("$ZodCustomStringFormat",(e,t)=>{tO.init(e,t),e._zod.check=n=>{t.fn(n.value)||n.issues.push({code:"invalid_format",format:t.format,input:n.value,inst:e,continue:!t.abort})}}),t1=u("$ZodNumber",(e,t)=>{t$.init(e,t),e._zod.pattern=e._zod.bag.pattern??eM,e._zod.parse=(n,i)=>{if(t.coerce)try{n.value=Number(n.value)}catch(e){}let s=n.value;if("number"==typeof s&&!Number.isNaN(s)&&Number.isFinite(s))return n;let r="number"==typeof s?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:s,inst:e,...r?{received:r}:{}}),n}}),t2=u("$ZodNumberFormat",(e,t)=>{tr.init(e,t),t1.init(e,t)}),t4=u("$ZodBoolean",(e,t)=>{t$.init(e,t),e._zod.pattern=eD,e._zod.parse=(n,i)=>{if(t.coerce)try{n.value=!!n.value}catch(e){}let s=n.value;return"boolean"==typeof s||n.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:e}),n}}),t6=u("$ZodBigInt",(e,t)=>{t$.init(e,t),e._zod.pattern=eL,e._zod.parse=(n,i)=>{if(t.coerce)try{n.value=BigInt(n.value)}catch(e){}return"bigint"==typeof n.value||n.issues.push({expected:"bigint",code:"invalid_type",input:n.value,inst:e}),n}}),t9=u("$ZodBigIntFormat",(e,t)=>{to.init(e,t),t6.init(e,t)}),t3=u("$ZodSymbol",(e,t)=>{t$.init(e,t),e._zod.parse=(t,n)=>{let i=t.value;return"symbol"==typeof i||t.issues.push({expected:"symbol",code:"invalid_type",input:i,inst:e}),t}}),t8=u("$ZodUndefined",(e,t)=>{t$.init(e,t),e._zod.pattern=eB,e._zod.values=new Set([void 0]),e._zod.optin="optional",e._zod.optout="optional",e._zod.parse=(t,n)=>{let i=t.value;return void 0===i||t.issues.push({expected:"undefined",code:"invalid_type",input:i,inst:e}),t}}),t5=u("$ZodNull",(e,t)=>{t$.init(e,t),e._zod.pattern=eU,e._zod.values=new Set([null]),e._zod.parse=(t,n)=>{let i=t.value;return null===i||t.issues.push({expected:"null",code:"invalid_type",input:i,inst:e}),t}}),t7=u("$ZodAny",(e,t)=>{t$.init(e,t),e._zod.parse=e=>e}),ne=u("$ZodUnknown",(e,t)=>{t$.init(e,t),e._zod.parse=e=>e}),nt=u("$ZodNever",(e,t)=>{t$.init(e,t),e._zod.parse=(t,n)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)}),nn=u("$ZodVoid",(e,t)=>{t$.init(e,t),e._zod.parse=(t,n)=>{let i=t.value;return void 0===i||t.issues.push({expected:"void",code:"invalid_type",input:i,inst:e}),t}}),ni=u("$ZodDate",(e,t)=>{t$.init(e,t),e._zod.parse=(n,i)=>{if(t.coerce)try{n.value=new Date(n.value)}catch(e){}let s=n.value,r=s instanceof Date;return r&&!Number.isNaN(s.getTime())||n.issues.push({expected:"date",code:"invalid_type",input:s,...r?{received:"Invalid Date"}:{},inst:e}),n}});function ns(e,t,n){e.issues.length&&t.issues.push(...F(n,e.issues)),t.value[n]=e.value}let nr=u("$ZodArray",(e,t)=>{t$.init(e,t),e._zod.parse=(n,i)=>{let s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:e}),n;n.value=Array(s.length);let r=[];for(let e=0;e<s.length;e++){let o=s[e],a=t.element._zod.run({value:o,issues:[]},i);a instanceof Promise?r.push(a.then(t=>ns(t,n,e))):ns(a,n,e)}return r.length?Promise.all(r).then(()=>n):n}});function no(e,t,n,i,s){if(e.issues.length){if(s&&!(n in i))return;t.issues.push(...F(n,e.issues))}void 0===e.value?n in i&&(t.value[n]=void 0):t.value[n]=e.value}function na(e){var t;let n=Object.keys(e.shape);for(let t of n)if(!e.shape?.[t]?._zod?.traits?.has("$ZodType"))throw Error(`Invalid element at key "${t}": expected a Zod schema`);let i=Object.keys(t=e.shape).filter(e=>"optional"===t[e]._zod.optin&&"optional"===t[e]._zod.optout);return{...e,keys:n,keySet:new Set(n),numKeys:n.length,optionalKeys:new Set(i)}}function nl(e,t,n,i,s,r){let o=[],a=s.keySet,l=s.catchall._zod,u=l.def.type,c="optional"===l.optout;for(let s in t){if(a.has(s))continue;if("never"===u){o.push(s);continue}let r=l.run({value:t[s],issues:[]},i);r instanceof Promise?e.push(r.then(e=>no(e,n,s,t,c))):no(r,n,s,t,c)}return(o.length&&n.issues.push({code:"unrecognized_keys",keys:o,input:t,inst:r}),e.length)?Promise.all(e).then(()=>n):n}let nu=u("$ZodObject",(e,t)=>{let n;t$.init(e,t);let i=Object.getOwnPropertyDescriptor(t,"shape");if(!i?.get){let e=t.shape;Object.defineProperty(t,"shape",{get:()=>{let n={...e};return Object.defineProperty(t,"shape",{value:n}),n}})}let s=y(()=>na(t));w(e._zod,"propValues",()=>{let e=t.shape,n={};for(let t in e){let i=e[t]._zod;if(i.values)for(let e of(n[t]??(n[t]=new Set),i.values))n[t].add(e)}return n});let r=t.catchall;e._zod.parse=(t,i)=>{n??(n=s.value);let o=t.value;if(!$(o))return t.issues.push({expected:"object",code:"invalid_type",input:o,inst:e}),t;t.value={};let a=[],l=n.shape;for(let e of n.keys){let n=l[e],s="optional"===n._zod.optout,r=n._zod.run({value:o[e],issues:[]},i);r instanceof Promise?a.push(r.then(n=>no(n,t,e,o,s))):no(r,t,e,o,s)}return r?nl(a,o,t,i,s.value,e):a.length?Promise.all(a).then(()=>t):t}}),nc=u("$ZodObjectJIT",(e,t)=>{let n,i;nu.init(e,t);let s=e._zod.parse,r=y(()=>na(t)),o=e=>{let t=new tk(["shape","payload","ctx"]),n=r.value,i=e=>{let t=k(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");let s=Object.create(null),o=0;for(let e of n.keys)s[e]=`key_${o++}`;for(let r of(t.write("const newResult = {};"),n.keys)){let n=s[r],o=k(r),a=e[r],l=a?._zod?.optout==="optional";t.write(`const ${n} = ${i(r)};`),l?t.write(`
        if (${n}.issues.length) {
          if (${o} in input) {
            payload.issues = payload.issues.concat(${n}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${o}, ...iss.path] : [${o}]
            })));
          }
        }
        
        if (${n}.value === undefined) {
          if (${o} in input) {
            newResult[${o}] = undefined;
          }
        } else {
          newResult[${o}] = ${n}.value;
        }
        
      `):t.write(`
        if (${n}.issues.length) {
          payload.issues = payload.issues.concat(${n}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${o}, ...iss.path] : [${o}]
          })));
        }
        
        if (${n}.value === undefined) {
          if (${o} in input) {
            newResult[${o}] = undefined;
          }
        } else {
          newResult[${o}] = ${n}.value;
        }
        
      `)}t.write("payload.value = newResult;"),t.write("return payload;");let a=t.compile();return(t,n)=>a(e,t,n)},a=!d.jitless,l=a&&A.value,u=t.catchall;e._zod.parse=(c,h)=>{i??(i=r.value);let d=c.value;return $(d)?a&&l&&h?.async===!1&&!0!==h.jitless?(n||(n=o(t.shape)),c=n(c,h),u)?nl([],d,c,h,i,e):c:s(c,h):(c.issues.push({expected:"object",code:"invalid_type",input:d,inst:e}),c)}});function nh(e,t,n,i){for(let n of e)if(0===n.issues.length)return t.value=n.value,t;let s=e.filter(e=>!L(e));return 1===s.length?(t.value=s[0].value,s[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(e=>e.issues.map(e=>D(e,i,p())))}),t)}let nd=u("$ZodUnion",(e,t)=>{t$.init(e,t),w(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),w(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),w(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),w(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){let e=t.options.map(e=>e._zod.pattern);return RegExp(`^(${e.map(e=>v(e.source)).join("|")})$`)}});let n=1===t.options.length,i=t.options[0]._zod.run;e._zod.parse=(s,r)=>{if(n)return i(s,r);let o=!1,a=[];for(let e of t.options){let t=e._zod.run({value:s.value,issues:[]},r);if(t instanceof Promise)a.push(t),o=!0;else{if(0===t.issues.length)return t;a.push(t)}}return o?Promise.all(a).then(t=>nh(t,s,e,r)):nh(a,s,e,r)}});function np(e,t,n,i){let s=e.filter(e=>0===e.issues.length);return 1===s.length?t.value=s[0].value:0===s.length?t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(e=>e.issues.map(e=>D(e,i,p())))}):t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:[],inclusive:!1}),t}let nf=u("$ZodXor",(e,t)=>{nd.init(e,t),t.inclusive=!1;let n=1===t.options.length,i=t.options[0]._zod.run;e._zod.parse=(s,r)=>{if(n)return i(s,r);let o=!1,a=[];for(let e of t.options){let t=e._zod.run({value:s.value,issues:[]},r);t instanceof Promise?(a.push(t),o=!0):a.push(t)}return o?Promise.all(a).then(t=>np(t,s,e,r)):np(a,s,e,r)}}),nm=u("$ZodDiscriminatedUnion",(e,t)=>{t.inclusive=!1,nd.init(e,t);let n=e._zod.parse;w(e._zod,"propValues",()=>{let e={};for(let n of t.options){let i=n._zod.propValues;if(!i||0===Object.keys(i).length)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(n)}"`);for(let[t,n]of Object.entries(i))for(let i of(e[t]||(e[t]=new Set),n))e[t].add(i)}return e});let i=y(()=>{let e=t.options,n=new Map;for(let i of e){let e=i._zod.propValues?.[t.discriminator];if(!e||0===e.size)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(i)}"`);for(let t of e){if(n.has(t))throw Error(`Duplicate discriminator value "${String(t)}"`);n.set(t,i)}}return n});e._zod.parse=(s,r)=>{let o=s.value;if(!$(o))return s.issues.push({code:"invalid_type",expected:"object",input:o,inst:e}),s;let a=i.value.get(o?.[t.discriminator]);return a?a._zod.run(s,r):t.unionFallback?n(s,r):(s.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:t.discriminator,input:o,path:[t.discriminator],inst:e}),s)}}),ng=u("$ZodIntersection",(e,t)=>{t$.init(e,t),e._zod.parse=(e,n)=>{let i=e.value,s=t.left._zod.run({value:i,issues:[]},n),r=t.right._zod.run({value:i,issues:[]},n);return s instanceof Promise||r instanceof Promise?Promise.all([s,r]).then(([t,n])=>ny(e,t,n)):ny(e,s,r)}});function ny(e,t,n){let i;let s=new Map;for(let n of t.issues)if("unrecognized_keys"===n.code)for(let e of(i??(i=n),n.keys))s.has(e)||s.set(e,{}),s.get(e).l=!0;else e.issues.push(n);for(let t of n.issues)if("unrecognized_keys"===t.code)for(let e of t.keys)s.has(e)||s.set(e,{}),s.get(e).r=!0;else e.issues.push(t);let r=[...s].filter(([,e])=>e.l&&e.r).map(([e])=>e);if(r.length&&i&&e.issues.push({...i,keys:r}),L(e))return e;let o=function e(t,n){if(t===n||t instanceof Date&&n instanceof Date&&+t==+n)return{valid:!0,data:t};if(O(t)&&O(n)){let i=Object.keys(n),s=Object.keys(t).filter(e=>-1!==i.indexOf(e)),r={...t,...n};for(let i of s){let s=e(t[i],n[i]);if(!s.valid)return{valid:!1,mergeErrorPath:[i,...s.mergeErrorPath]};r[i]=s.data}return{valid:!0,data:r}}if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return{valid:!1,mergeErrorPath:[]};let i=[];for(let s=0;s<t.length;s++){let r=e(t[s],n[s]);if(!r.valid)return{valid:!1,mergeErrorPath:[s,...r.mergeErrorPath]};i.push(r.data)}return{valid:!0,data:i}}return{valid:!1,mergeErrorPath:[]}}(t.value,n.value);if(!o.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(o.mergeErrorPath)}`);return e.value=o.data,e}let n_=u("$ZodTuple",(e,t)=>{t$.init(e,t);let n=t.items;e._zod.parse=(i,s)=>{let r=i.value;if(!Array.isArray(r))return i.issues.push({input:r,inst:e,expected:"tuple",code:"invalid_type"}),i;i.value=[];let o=[],a=[...n].reverse().findIndex(e=>"optional"!==e._zod.optin),l=-1===a?0:n.length-a;if(!t.rest){let t=r.length>n.length,s=r.length<l-1;if(t||s)return i.issues.push({...t?{code:"too_big",maximum:n.length,inclusive:!0}:{code:"too_small",minimum:n.length},input:r,inst:e,origin:"array"}),i}let u=-1;for(let e of n){if(++u>=r.length&&u>=l)continue;let t=e._zod.run({value:r[u],issues:[]},s);t instanceof Promise?o.push(t.then(e=>nv(e,i,u))):nv(t,i,u)}if(t.rest)for(let e of r.slice(n.length)){u++;let n=t.rest._zod.run({value:e,issues:[]},s);n instanceof Promise?o.push(n.then(e=>nv(e,i,u))):nv(n,i,u)}return o.length?Promise.all(o).then(()=>i):i}});function nv(e,t,n){e.issues.length&&t.issues.push(...F(n,e.issues)),t.value[n]=e.value}let nb=u("$ZodRecord",(e,t)=>{t$.init(e,t),e._zod.parse=(n,i)=>{let s=n.value;if(!O(s))return n.issues.push({expected:"record",code:"invalid_type",input:s,inst:e}),n;let r=[],o=t.keyType._zod.values;if(o){let a;n.value={};let l=new Set;for(let e of o)if("string"==typeof e||"number"==typeof e||"symbol"==typeof e){l.add("number"==typeof e?e.toString():e);let o=t.valueType._zod.run({value:s[e],issues:[]},i);o instanceof Promise?r.push(o.then(t=>{t.issues.length&&n.issues.push(...F(e,t.issues)),n.value[e]=t.value})):(o.issues.length&&n.issues.push(...F(e,o.issues)),n.value[e]=o.value)}for(let e in s)l.has(e)||(a=a??[]).push(e);a&&a.length>0&&n.issues.push({code:"unrecognized_keys",input:s,inst:e,keys:a})}else for(let o of(n.value={},Reflect.ownKeys(s))){if("__proto__"===o)continue;let a=t.keyType._zod.run({value:o,issues:[]},i);if(a instanceof Promise)throw Error("Async schemas not supported in object keys currently");if("string"==typeof o&&eM.test(o)&&a.issues.length&&a.issues.some(e=>"invalid_type"===e.code&&"number"===e.expected)){let e=t.keyType._zod.run({value:Number(o),issues:[]},i);if(e instanceof Promise)throw Error("Async schemas not supported in object keys currently");0===e.issues.length&&(a=e)}if(a.issues.length){"loose"===t.mode?n.value[o]=s[o]:n.issues.push({code:"invalid_key",origin:"record",issues:a.issues.map(e=>D(e,i,p())),input:o,path:[o],inst:e});continue}let l=t.valueType._zod.run({value:s[o],issues:[]},i);l instanceof Promise?r.push(l.then(e=>{e.issues.length&&n.issues.push(...F(o,e.issues)),n.value[a.value]=e.value})):(l.issues.length&&n.issues.push(...F(o,l.issues)),n.value[a.value]=l.value)}return r.length?Promise.all(r).then(()=>n):n}}),nw=u("$ZodMap",(e,t)=>{t$.init(e,t),e._zod.parse=(n,i)=>{let s=n.value;if(!(s instanceof Map))return n.issues.push({expected:"map",code:"invalid_type",input:s,inst:e}),n;let r=[];for(let[o,a]of(n.value=new Map,s)){let l=t.keyType._zod.run({value:o,issues:[]},i),u=t.valueType._zod.run({value:a,issues:[]},i);l instanceof Promise||u instanceof Promise?r.push(Promise.all([l,u]).then(([t,r])=>{nz(t,r,n,o,s,e,i)})):nz(l,u,n,o,s,e,i)}return r.length?Promise.all(r).then(()=>n):n}});function nz(e,t,n,i,s,r,o){e.issues.length&&(T.has(typeof i)?n.issues.push(...F(i,e.issues)):n.issues.push({code:"invalid_key",origin:"map",input:s,inst:r,issues:e.issues.map(e=>D(e,o,p()))})),t.issues.length&&(T.has(typeof i)?n.issues.push(...F(i,t.issues)):n.issues.push({origin:"map",code:"invalid_element",input:s,inst:r,key:i,issues:t.issues.map(e=>D(e,o,p()))})),n.value.set(e.value,t.value)}let nS=u("$ZodSet",(e,t)=>{t$.init(e,t),e._zod.parse=(n,i)=>{let s=n.value;if(!(s instanceof Set))return n.issues.push({input:s,inst:e,expected:"set",code:"invalid_type"}),n;let r=[];for(let e of(n.value=new Set,s)){let s=t.valueType._zod.run({value:e,issues:[]},i);s instanceof Promise?r.push(s.then(e=>nk(e,n))):nk(s,n)}return r.length?Promise.all(r).then(()=>n):n}});function nk(e,t){e.issues.length&&t.issues.push(...e.issues),t.value.add(e.value)}let nx=u("$ZodEnum",(e,t)=>{t$.init(e,t);let n=f(t.entries),i=new Set(n);e._zod.values=i,e._zod.pattern=RegExp(`^(${n.filter(e=>T.has(typeof e)).map(e=>"string"==typeof e?N(e):e.toString()).join("|")})$`),e._zod.parse=(t,s)=>{let r=t.value;return i.has(r)||t.issues.push({code:"invalid_value",values:n,input:r,inst:e}),t}}),n$=u("$ZodLiteral",(e,t)=>{if(t$.init(e,t),0===t.values.length)throw Error("Cannot create literal schema with no valid values");let n=new Set(t.values);e._zod.values=n,e._zod.pattern=RegExp(`^(${t.values.map(e=>"string"==typeof e?N(e):e?N(e.toString()):String(e)).join("|")})$`),e._zod.parse=(i,s)=>{let r=i.value;return n.has(r)||i.issues.push({code:"invalid_value",values:t.values,input:r,inst:e}),i}}),nA=u("$ZodFile",(e,t)=>{t$.init(e,t),e._zod.parse=(t,n)=>{let i=t.value;return i instanceof File||t.issues.push({expected:"file",code:"invalid_type",input:i,inst:e}),t}}),nO=u("$ZodTransform",(e,t)=>{t$.init(e,t),e._zod.parse=(n,i)=>{if("backward"===i.direction)throw new h(e.constructor.name);let s=t.transform(n.value,n);if(i.async)return(s instanceof Promise?s:Promise.resolve(s)).then(e=>(n.value=e,n));if(s instanceof Promise)throw new c;return n.value=s,n}});function nI(e,t){return e.issues.length&&void 0===t?{issues:[],value:void 0}:e}let nT=u("$ZodOptional",(e,t)=>{t$.init(e,t),e._zod.optin="optional",e._zod.optout="optional",w(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),w(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${v(e.source)})?$`):void 0}),e._zod.parse=(e,n)=>{if("optional"===t.innerType._zod.optin){let i=t.innerType._zod.run(e,n);return i instanceof Promise?i.then(t=>nI(t,e.value)):nI(i,e.value)}return void 0===e.value?e:t.innerType._zod.run(e,n)}}),nE=u("$ZodExactOptional",(e,t)=>{nT.init(e,t),w(e._zod,"values",()=>t.innerType._zod.values),w(e._zod,"pattern",()=>t.innerType._zod.pattern),e._zod.parse=(e,n)=>t.innerType._zod.run(e,n)}),nN=u("$ZodNullable",(e,t)=>{t$.init(e,t),w(e._zod,"optin",()=>t.innerType._zod.optin),w(e._zod,"optout",()=>t.innerType._zod.optout),w(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${v(e.source)}|null)$`):void 0}),w(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,n)=>null===e.value?e:t.innerType._zod.run(e,n)}),nP=u("$ZodDefault",(e,t)=>{t$.init(e,t),e._zod.optin="optional",w(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>{if("backward"===n.direction)return t.innerType._zod.run(e,n);if(void 0===e.value)return e.value=t.defaultValue,e;let i=t.innerType._zod.run(e,n);return i instanceof Promise?i.then(e=>nZ(e,t)):nZ(i,t)}});function nZ(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}let nR=u("$ZodPrefault",(e,t)=>{t$.init(e,t),e._zod.optin="optional",w(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>("backward"===n.direction||void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,n))}),nj=u("$ZodNonOptional",(e,t)=>{t$.init(e,t),w(e._zod,"values",()=>{let e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(n,i)=>{let s=t.innerType._zod.run(n,i);return s instanceof Promise?s.then(t=>nC(t,e)):nC(s,e)}});function nC(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}let nL=u("$ZodSuccess",(e,t)=>{t$.init(e,t),e._zod.parse=(e,n)=>{if("backward"===n.direction)throw new h("ZodSuccess");let i=t.innerType._zod.run(e,n);return i instanceof Promise?i.then(t=>(e.value=0===t.issues.length,e)):(e.value=0===i.issues.length,e)}}),nF=u("$ZodCatch",(e,t)=>{t$.init(e,t),w(e._zod,"optin",()=>t.innerType._zod.optin),w(e._zod,"optout",()=>t.innerType._zod.optout),w(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>{if("backward"===n.direction)return t.innerType._zod.run(e,n);let i=t.innerType._zod.run(e,n);return i instanceof Promise?i.then(i=>(e.value=i.value,i.issues.length&&(e.value=t.catchValue({...e,error:{issues:i.issues.map(e=>D(e,n,p()))},input:e.value}),e.issues=[]),e)):(e.value=i.value,i.issues.length&&(e.value=t.catchValue({...e,error:{issues:i.issues.map(e=>D(e,n,p()))},input:e.value}),e.issues=[]),e)}}),nM=u("$ZodNaN",(e,t)=>{t$.init(e,t),e._zod.parse=(t,n)=>("number"==typeof t.value&&Number.isNaN(t.value)||t.issues.push({input:t.value,inst:e,expected:"nan",code:"invalid_type"}),t)}),nD=u("$ZodPipe",(e,t)=>{t$.init(e,t),w(e._zod,"values",()=>t.in._zod.values),w(e._zod,"optin",()=>t.in._zod.optin),w(e._zod,"optout",()=>t.out._zod.optout),w(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,n)=>{if("backward"===n.direction){let i=t.out._zod.run(e,n);return i instanceof Promise?i.then(e=>nU(e,t.in,n)):nU(i,t.in,n)}let i=t.in._zod.run(e,n);return i instanceof Promise?i.then(e=>nU(e,t.out,n)):nU(i,t.out,n)}});function nU(e,t,n){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},n)}let nB=u("$ZodCodec",(e,t)=>{t$.init(e,t),w(e._zod,"values",()=>t.in._zod.values),w(e._zod,"optin",()=>t.in._zod.optin),w(e._zod,"optout",()=>t.out._zod.optout),w(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,n)=>{if("forward"===(n.direction||"forward")){let i=t.in._zod.run(e,n);return i instanceof Promise?i.then(e=>nW(e,t,n)):nW(i,t,n)}{let i=t.out._zod.run(e,n);return i instanceof Promise?i.then(e=>nW(e,t,n)):nW(i,t,n)}}});function nW(e,t,n){if(e.issues.length)return e.aborted=!0,e;if("forward"===(n.direction||"forward")){let i=t.transform(e.value,e);return i instanceof Promise?i.then(i=>nJ(e,i,t.out,n)):nJ(e,i,t.out,n)}{let i=t.reverseTransform(e.value,e);return i instanceof Promise?i.then(i=>nJ(e,i,t.in,n)):nJ(e,i,t.in,n)}}function nJ(e,t,n,i){return e.issues.length?(e.aborted=!0,e):n._zod.run({value:t,issues:e.issues},i)}let nV=u("$ZodReadonly",(e,t)=>{t$.init(e,t),w(e._zod,"propValues",()=>t.innerType._zod.propValues),w(e._zod,"values",()=>t.innerType._zod.values),w(e._zod,"optin",()=>t.innerType?._zod?.optin),w(e._zod,"optout",()=>t.innerType?._zod?.optout),e._zod.parse=(e,n)=>{if("backward"===n.direction)return t.innerType._zod.run(e,n);let i=t.innerType._zod.run(e,n);return i instanceof Promise?i.then(nq):nq(i)}});function nq(e){return e.value=Object.freeze(e.value),e}let nX=u("$ZodTemplateLiteral",(e,t)=>{t$.init(e,t);let n=[];for(let e of t.parts)if("object"==typeof e&&null!==e){if(!e._zod.pattern)throw Error(`Invalid template literal part, no pattern found: ${[...e._zod.traits].shift()}`);let t=e._zod.pattern instanceof RegExp?e._zod.pattern.source:e._zod.pattern;if(!t)throw Error(`Invalid template literal part: ${e._zod.traits}`);let i=t.startsWith("^")?1:0,s=t.endsWith("$")?t.length-1:t.length;n.push(t.slice(i,s))}else if(null===e||E.has(typeof e))n.push(N(`${e}`));else throw Error(`Invalid template literal part: ${e}`);e._zod.pattern=RegExp(`^${n.join("")}$`),e._zod.parse=(n,i)=>("string"!=typeof n.value?n.issues.push({input:n.value,inst:e,expected:"string",code:"invalid_type"}):(e._zod.pattern.lastIndex=0,e._zod.pattern.test(n.value)||n.issues.push({input:n.value,inst:e,code:"invalid_format",format:t.format??"template_literal",pattern:e._zod.pattern.source})),n)}),nH=u("$ZodFunction",(e,t)=>(t$.init(e,t),e._def=t,e._zod.def=t,e.implement=t=>{if("function"!=typeof t)throw Error("implement() must be called with a function");return function(...n){let i=Reflect.apply(t,this,e._def.input?H(e._def.input,n):n);return e._def.output?H(e._def.output,i):i}},e.implementAsync=t=>{if("function"!=typeof t)throw Error("implementAsync() must be called with a function");return async function(...n){let i=e._def.input?await G(e._def.input,n):n,s=await Reflect.apply(t,this,i);return e._def.output?await G(e._def.output,s):s}},e._zod.parse=(t,n)=>("function"!=typeof t.value?t.issues.push({code:"invalid_type",expected:"function",input:t.value,inst:e}):e._def.output&&"promise"===e._def.output._zod.def.type?t.value=e.implementAsync(t.value):t.value=e.implement(t.value),t),e.input=(...t)=>new e.constructor(Array.isArray(t[0])?{type:"function",input:new n_({type:"tuple",items:t[0],rest:t[1]}),output:e._def.output}:{type:"function",input:t[0],output:e._def.output}),e.output=t=>new e.constructor({type:"function",input:e._def.input,output:t}),e)),nK=u("$ZodPromise",(e,t)=>{t$.init(e,t),e._zod.parse=(e,n)=>Promise.resolve(e.value).then(e=>t.innerType._zod.run({value:e,issues:[]},n))}),nG=u("$ZodLazy",(e,t)=>{t$.init(e,t),w(e._zod,"innerType",()=>t.getter()),w(e._zod,"pattern",()=>e._zod.innerType?._zod?.pattern),w(e._zod,"propValues",()=>e._zod.innerType?._zod?.propValues),w(e._zod,"optin",()=>e._zod.innerType?._zod?.optin??void 0),w(e._zod,"optout",()=>e._zod.innerType?._zod?.optout??void 0),e._zod.parse=(t,n)=>e._zod.innerType._zod.run(t,n)}),nY=u("$ZodCustom",(e,t)=>{te.init(e,t),t$.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=n=>{let i=n.value,s=t.fn(i);if(s instanceof Promise)return s.then(t=>nQ(t,n,i,e));nQ(s,n,i,e)}});function nQ(e,t,n,i){if(!e){let e={code:"custom",input:n,inst:i,path:[...i._zod.def.path??[]],continue:!i._zod.def.abort};i._zod.def.params&&(e.params=i._zod.def.params),t.issues.push(W(e))}}Symbol("ZodOutput"),Symbol("ZodInput");class n0{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...t){let n=t[0];return this._map.set(e,n),n&&"object"==typeof n&&"id"in n&&this._idmap.set(n.id,e),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){let t=this._map.get(e);return t&&"object"==typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){let t=e._zod.parent;if(t){let n={...this.get(t)??{}};delete n.id;let i={...n,...this._map.get(e)};return Object.keys(i).length?i:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}(i=globalThis).__zod_globalRegistry??(i.__zod_globalRegistry=new n0);let n1=globalThis.__zod_globalRegistry;function n2(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...Z(t)})}function n4(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...Z(t)})}function n6(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...Z(t)})}function n9(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Z(t)})}function n3(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Z(t)})}function n8(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Z(t)})}function n5(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...Z(t)})}function n7(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...Z(t)})}function ie(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...Z(t)})}function it(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...Z(t)})}function ii(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...Z(t)})}function is(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...Z(t)})}function ir(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...Z(t)})}function io(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...Z(t)})}function ia(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...Z(t)})}function il(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...Z(t)})}function iu(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Z(t)})}function ic(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Z(t)})}function ih(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...Z(t)})}function id(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...Z(t)})}function ip(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...Z(t)})}function im(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...Z(t)})}function ig(e,t){return new tn({check:"less_than",...Z(t),value:e,inclusive:!1})}function iy(e,t){return new tn({check:"less_than",...Z(t),value:e,inclusive:!0})}function i_(e,t){return new ti({check:"greater_than",...Z(t),value:e,inclusive:!1})}function iv(e,t){return new ti({check:"greater_than",...Z(t),value:e,inclusive:!0})}function ib(e){return i_(0,e)}function iw(e){return ig(0,e)}function iz(e){return iy(0,e)}function iS(e){return iv(0,e)}function ik(e,t){return new ts({check:"multiple_of",...Z(t),value:e})}function ix(e,t){return new ta({check:"max_size",...Z(t),maximum:e})}function i$(e,t){return new tl({check:"min_size",...Z(t),minimum:e})}function iA(e,t){return new tu({check:"size_equals",...Z(t),size:e})}function iO(e,t){return new tc({check:"max_length",...Z(t),maximum:e})}function iI(e,t){return new th({check:"min_length",...Z(t),minimum:e})}function iT(e,t){return new td({check:"length_equals",...Z(t),length:e})}function iE(e,t){return new tf({check:"string_format",format:"regex",...Z(t),pattern:e})}function iN(e){return new tm({check:"string_format",format:"lowercase",...Z(e)})}function iP(e){return new tg({check:"string_format",format:"uppercase",...Z(e)})}function iZ(e,t){return new ty({check:"string_format",format:"includes",...Z(t),includes:e})}function iR(e,t){return new t_({check:"string_format",format:"starts_with",...Z(t),prefix:e})}function ij(e,t){return new tv({check:"string_format",format:"ends_with",...Z(t),suffix:e})}function iC(e,t,n){return new tw({check:"property",property:e,schema:t,...Z(n)})}function iL(e,t){return new tz({check:"mime_type",mime:e,...Z(t)})}function iF(e){return new tS({check:"overwrite",tx:e})}function iM(e){return iF(t=>t.normalize(e))}function iD(){return iF(e=>e.trim())}function iU(){return iF(e=>e.toLowerCase())}function iB(){return iF(e=>e.toUpperCase())}function iW(){return iF(e=>e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,""))}function iJ(e,t,n,i={}){let s=Z(i),r={...Z(i),check:"string_format",type:"string",format:t,fn:"function"==typeof n?n:e=>n.test(e),...s};return n instanceof RegExp&&(r.pattern=n),new e(r)}function iV(e){let t=e?.target??"draft-2020-12";return"draft-4"===t&&(t="draft-04"),"draft-7"===t&&(t="draft-07"),{processors:e.processors??{},metadataRegistry:e?.metadata??n1,target:t,unrepresentable:e?.unrepresentable??"throw",override:e?.override??(()=>{}),io:e?.io??"output",counter:0,seen:new Map,cycles:e?.cycles??"ref",reused:e?.reused??"inline",external:e?.external??void 0}}function iq(e,t,n={path:[],schemaPath:[]}){var i;let s=e._zod.def,r=t.seen.get(e);if(r)return r.count++,n.schemaPath.includes(e)&&(r.cycle=n.path),r.schema;let o={schema:{},count:1,cycle:void 0,path:n.path};t.seen.set(e,o);let a=e._zod.toJSONSchema?.();if(a)o.schema=a;else{let i={...n,schemaPath:[...n.schemaPath,e],path:n.path};if(e._zod.processJSONSchema)e._zod.processJSONSchema(t,o.schema,i);else{let n=o.schema,r=t.processors[s.type];if(!r)throw Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);r(e,t,n,i)}let r=e._zod.parent;r&&(o.ref||(o.ref=r),iq(r,t,i),t.seen.get(r).isParent=!0)}let l=t.metadataRegistry.get(e);return l&&Object.assign(o.schema,l),"input"===t.io&&function e(t,n){let i=n??{seen:new Set};if(i.seen.has(t))return!1;i.seen.add(t);let s=t._zod.def;if("transform"===s.type)return!0;if("array"===s.type)return e(s.element,i);if("set"===s.type)return e(s.valueType,i);if("lazy"===s.type)return e(s.getter(),i);if("promise"===s.type||"optional"===s.type||"nonoptional"===s.type||"nullable"===s.type||"readonly"===s.type||"default"===s.type||"prefault"===s.type)return e(s.innerType,i);if("intersection"===s.type)return e(s.left,i)||e(s.right,i);if("record"===s.type||"map"===s.type)return e(s.keyType,i)||e(s.valueType,i);if("pipe"===s.type)return e(s.in,i)||e(s.out,i);if("object"===s.type){for(let t in s.shape)if(e(s.shape[t],i))return!0;return!1}if("union"===s.type){for(let t of s.options)if(e(t,i))return!0;return!1}if("tuple"===s.type){for(let t of s.items)if(e(t,i))return!0;if(s.rest&&e(s.rest,i))return!0}return!1}(e)&&(delete o.schema.examples,delete o.schema.default),"input"===t.io&&o.schema._prefault&&((i=o.schema).default??(i.default=o.schema._prefault)),delete o.schema._prefault,t.seen.get(e).schema}function iX(e,t){let n=e.seen.get(t);if(!n)throw Error("Unprocessed schema. This is a bug in Zod.");let i=new Map;for(let t of e.seen.entries()){let n=e.metadataRegistry.get(t[0])?.id;if(n){let e=i.get(n);if(e&&e!==t[0])throw Error(`Duplicate schema id "${n}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);i.set(n,t[0])}}let s=t=>{let i="draft-2020-12"===e.target?"$defs":"definitions";if(e.external){let n=e.external.registry.get(t[0])?.id,s=e.external.uri??(e=>e);if(n)return{ref:s(n)};let r=t[1].defId??t[1].schema.id??`schema${e.counter++}`;return t[1].defId=r,{defId:r,ref:`${s("__shared")}#/${i}/${r}`}}if(t[1]===n)return{ref:"#"};let s=`#/${i}/`,r=t[1].schema.id??`__schema${e.counter++}`;return{defId:r,ref:s+r}},r=e=>{if(e[1].schema.$ref)return;let t=e[1],{ref:n,defId:i}=s(e);t.def={...t.schema},i&&(t.defId=i);let r=t.schema;for(let e in r)delete r[e];r.$ref=n};if("throw"===e.cycles)for(let t of e.seen.entries()){let e=t[1];if(e.cycle)throw Error(`Cycle detected: #/${e.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let n of e.seen.entries()){let i=n[1];if(t===n[0]){r(n);continue}if(e.external){let i=e.external.registry.get(n[0])?.id;if(t!==n[0]&&i){r(n);continue}}if(e.metadataRegistry.get(n[0])?.id||i.cycle||i.count>1&&"ref"===e.reused){r(n);continue}}}function iH(e,t){let n=e.seen.get(t);if(!n)throw Error("Unprocessed schema. This is a bug in Zod.");let i=t=>{let n=e.seen.get(t);if(null===n.ref)return;let s=n.def??n.schema,r={...s},o=n.ref;if(n.ref=null,o){i(o);let n=e.seen.get(o),a=n.schema;if(a.$ref&&("draft-07"===e.target||"draft-04"===e.target||"openapi-3.0"===e.target)?(s.allOf=s.allOf??[],s.allOf.push(a)):Object.assign(s,a),Object.assign(s,r),t._zod.parent===o)for(let e in s)"$ref"===e||"allOf"===e||e in r||delete s[e];if(a.$ref)for(let e in s)"$ref"!==e&&"allOf"!==e&&e in n.def&&JSON.stringify(s[e])===JSON.stringify(n.def[e])&&delete s[e]}let a=t._zod.parent;if(a&&a!==o){i(a);let t=e.seen.get(a);if(t?.schema.$ref&&(s.$ref=t.schema.$ref,t.def))for(let e in s)"$ref"!==e&&"allOf"!==e&&e in t.def&&JSON.stringify(s[e])===JSON.stringify(t.def[e])&&delete s[e]}e.override({zodSchema:t,jsonSchema:s,path:n.path??[]})};for(let t of[...e.seen.entries()].reverse())i(t[0]);let s={};if("draft-2020-12"===e.target?s.$schema="https://json-schema.org/draft/2020-12/schema":"draft-07"===e.target?s.$schema="http://json-schema.org/draft-07/schema#":"draft-04"===e.target?s.$schema="http://json-schema.org/draft-04/schema#":e.target,e.external?.uri){let n=e.external.registry.get(t)?.id;if(!n)throw Error("Schema is missing an `id` property");s.$id=e.external.uri(n)}Object.assign(s,n.def??n.schema);let r=e.external?.defs??{};for(let t of e.seen.entries()){let e=t[1];e.def&&e.defId&&(r[e.defId]=e.def)}e.external||Object.keys(r).length>0&&("draft-2020-12"===e.target?s.$defs=r:s.definitions=r);try{let n=JSON.parse(JSON.stringify(s));return Object.defineProperty(n,"~standard",{value:{...t["~standard"],jsonSchema:{input:iG(t,"input",e.processors),output:iG(t,"output",e.processors)}},enumerable:!1,writable:!1}),n}catch(e){throw Error("Error converting schema to JSON.")}}let iK=(e,t={})=>n=>{let i=iV({...n,processors:t});return iq(e,i),iX(i,e),iH(i,e)},iG=(e,t,n={})=>i=>{let{libraryOptions:s,target:r}=i??{},o=iV({...s??{},target:r,io:t,processors:n});return iq(e,o),iX(o,e),iH(o,e)},iY={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},iQ=(e,t,n,i)=>{n.type="string";let{minimum:s,maximum:r,format:o,patterns:a,contentEncoding:l}=e._zod.bag;if("number"==typeof s&&(n.minLength=s),"number"==typeof r&&(n.maxLength=r),o&&(n.format=iY[o]??o,""===n.format&&delete n.format,"time"===o&&delete n.format),l&&(n.contentEncoding=l),a&&a.size>0){let e=[...a];1===e.length?n.pattern=e[0].source:e.length>1&&(n.allOf=[...e.map(e=>({..."draft-07"===t.target||"draft-04"===t.target||"openapi-3.0"===t.target?{type:"string"}:{},pattern:e.source}))])}},i0=(e,t,n,i)=>{let{minimum:s,maximum:r,format:o,multipleOf:a,exclusiveMaximum:l,exclusiveMinimum:u}=e._zod.bag;"string"==typeof o&&o.includes("int")?n.type="integer":n.type="number","number"==typeof u&&("draft-04"===t.target||"openapi-3.0"===t.target?(n.minimum=u,n.exclusiveMinimum=!0):n.exclusiveMinimum=u),"number"==typeof s&&(n.minimum=s,"number"==typeof u&&"draft-04"!==t.target&&(u>=s?delete n.minimum:delete n.exclusiveMinimum)),"number"==typeof l&&("draft-04"===t.target||"openapi-3.0"===t.target?(n.maximum=l,n.exclusiveMaximum=!0):n.exclusiveMaximum=l),"number"==typeof r&&(n.maximum=r,"number"==typeof l&&"draft-04"!==t.target&&(l<=r?delete n.maximum:delete n.exclusiveMaximum)),"number"==typeof a&&(n.multipleOf=a)},i1=(e,t,n,i)=>{n.type="boolean"},i2=(e,t,n,i)=>{if("throw"===t.unrepresentable)throw Error("BigInt cannot be represented in JSON Schema")},i4=(e,t,n,i)=>{if("throw"===t.unrepresentable)throw Error("Symbols cannot be represented in JSON Schema")},i6=(e,t,n,i)=>{"openapi-3.0"===t.target?(n.type="string",n.nullable=!0,n.enum=[null]):n.type="null"},i9=(e,t,n,i)=>{if("throw"===t.unrepresentable)throw Error("Undefined cannot be represented in JSON Schema")},i3=(e,t,n,i)=>{if("throw"===t.unrepresentable)throw Error("Void cannot be represented in JSON Schema")},i8=(e,t,n,i)=>{n.not={}},i5=(e,t,n,i)=>{},i7=(e,t,n,i)=>{},se=(e,t,n,i)=>{if("throw"===t.unrepresentable)throw Error("Date cannot be represented in JSON Schema")},st=(e,t,n,i)=>{let s=f(e._zod.def.entries);s.every(e=>"number"==typeof e)&&(n.type="number"),s.every(e=>"string"==typeof e)&&(n.type="string"),n.enum=s},sn=(e,t,n,i)=>{let s=e._zod.def,r=[];for(let e of s.values)if(void 0===e){if("throw"===t.unrepresentable)throw Error("Literal `undefined` cannot be represented in JSON Schema")}else if("bigint"==typeof e){if("throw"===t.unrepresentable)throw Error("BigInt literals cannot be represented in JSON Schema");r.push(Number(e))}else r.push(e);if(0===r.length);else if(1===r.length){let e=r[0];n.type=null===e?"null":typeof e,"draft-04"===t.target||"openapi-3.0"===t.target?n.enum=[e]:n.const=e}else r.every(e=>"number"==typeof e)&&(n.type="number"),r.every(e=>"string"==typeof e)&&(n.type="string"),r.every(e=>"boolean"==typeof e)&&(n.type="boolean"),r.every(e=>null===e)&&(n.type="null"),n.enum=r},si=(e,t,n,i)=>{if("throw"===t.unrepresentable)throw Error("NaN cannot be represented in JSON Schema")},ss=(e,t,n,i)=>{let s=e._zod.pattern;if(!s)throw Error("Pattern not found in template literal");n.type="string",n.pattern=s.source},sr=(e,t,n,i)=>{let s={type:"string",format:"binary",contentEncoding:"binary"},{minimum:r,maximum:o,mime:a}=e._zod.bag;void 0!==r&&(s.minLength=r),void 0!==o&&(s.maxLength=o),a?1===a.length?(s.contentMediaType=a[0],Object.assign(n,s)):(Object.assign(n,s),n.anyOf=a.map(e=>({contentMediaType:e}))):Object.assign(n,s)},so=(e,t,n,i)=>{n.type="boolean"},sa=(e,t,n,i)=>{if("throw"===t.unrepresentable)throw Error("Custom types cannot be represented in JSON Schema")},sl=(e,t,n,i)=>{if("throw"===t.unrepresentable)throw Error("Function types cannot be represented in JSON Schema")},su=(e,t,n,i)=>{if("throw"===t.unrepresentable)throw Error("Transforms cannot be represented in JSON Schema")},sc=(e,t,n,i)=>{if("throw"===t.unrepresentable)throw Error("Map cannot be represented in JSON Schema")},sh=(e,t,n,i)=>{if("throw"===t.unrepresentable)throw Error("Set cannot be represented in JSON Schema")},sd=(e,t,n,i)=>{let s=e._zod.def,{minimum:r,maximum:o}=e._zod.bag;"number"==typeof r&&(n.minItems=r),"number"==typeof o&&(n.maxItems=o),n.type="array",n.items=iq(s.element,t,{...i,path:[...i.path,"items"]})},sp=(e,t,n,i)=>{let s=e._zod.def;n.type="object",n.properties={};let r=s.shape;for(let e in r)n.properties[e]=iq(r[e],t,{...i,path:[...i.path,"properties",e]});let o=new Set([...new Set(Object.keys(r))].filter(e=>{let n=s.shape[e]._zod;return"input"===t.io?void 0===n.optin:void 0===n.optout}));o.size>0&&(n.required=Array.from(o)),s.catchall?._zod.def.type==="never"?n.additionalProperties=!1:s.catchall?s.catchall&&(n.additionalProperties=iq(s.catchall,t,{...i,path:[...i.path,"additionalProperties"]})):"output"===t.io&&(n.additionalProperties=!1)},sf=(e,t,n,i)=>{let s=e._zod.def,r=!1===s.inclusive,o=s.options.map((e,n)=>iq(e,t,{...i,path:[...i.path,r?"oneOf":"anyOf",n]}));r?n.oneOf=o:n.anyOf=o},sm=(e,t,n,i)=>{let s=e._zod.def,r=iq(s.left,t,{...i,path:[...i.path,"allOf",0]}),o=iq(s.right,t,{...i,path:[...i.path,"allOf",1]}),a=[..."allOf"in r&&1===Object.keys(r).length?r.allOf:[r],..."allOf"in o&&1===Object.keys(o).length?o.allOf:[o]];n.allOf=a},sg=(e,t,n,i)=>{let s=e._zod.def;n.type="array";let r="draft-2020-12"===t.target?"prefixItems":"items",o="draft-2020-12"===t.target?"items":"openapi-3.0"===t.target?"items":"additionalItems",a=s.items.map((e,n)=>iq(e,t,{...i,path:[...i.path,r,n]})),l=s.rest?iq(s.rest,t,{...i,path:[...i.path,o,..."openapi-3.0"===t.target?[s.items.length]:[]]}):null;"draft-2020-12"===t.target?(n.prefixItems=a,l&&(n.items=l)):"openapi-3.0"===t.target?(n.items={anyOf:a},l&&n.items.anyOf.push(l),n.minItems=a.length,l||(n.maxItems=a.length)):(n.items=a,l&&(n.additionalItems=l));let{minimum:u,maximum:c}=e._zod.bag;"number"==typeof u&&(n.minItems=u),"number"==typeof c&&(n.maxItems=c)},sy=(e,t,n,i)=>{let s=e._zod.def;n.type="object";let r=s.keyType,o=r._zod.bag,a=o?.patterns;if("loose"===s.mode&&a&&a.size>0){let e=iq(s.valueType,t,{...i,path:[...i.path,"patternProperties","*"]});for(let t of(n.patternProperties={},a))n.patternProperties[t.source]=e}else("draft-07"===t.target||"draft-2020-12"===t.target)&&(n.propertyNames=iq(s.keyType,t,{...i,path:[...i.path,"propertyNames"]})),n.additionalProperties=iq(s.valueType,t,{...i,path:[...i.path,"additionalProperties"]});let l=r._zod.values;if(l){let e=[...l].filter(e=>"string"==typeof e||"number"==typeof e);e.length>0&&(n.required=e)}},s_=(e,t,n,i)=>{let s=e._zod.def,r=iq(s.innerType,t,i),o=t.seen.get(e);"openapi-3.0"===t.target?(o.ref=s.innerType,n.nullable=!0):n.anyOf=[r,{type:"null"}]},sv=(e,t,n,i)=>{let s=e._zod.def;iq(s.innerType,t,i),t.seen.get(e).ref=s.innerType},sb=(e,t,n,i)=>{let s=e._zod.def;iq(s.innerType,t,i),t.seen.get(e).ref=s.innerType,n.default=JSON.parse(JSON.stringify(s.defaultValue))},sw=(e,t,n,i)=>{let s=e._zod.def;iq(s.innerType,t,i),t.seen.get(e).ref=s.innerType,"input"===t.io&&(n._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},sz=(e,t,n,i)=>{let s;let r=e._zod.def;iq(r.innerType,t,i),t.seen.get(e).ref=r.innerType;try{s=r.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}n.default=s},sS=(e,t,n,i)=>{let s=e._zod.def,r="input"===t.io?"transform"===s.in._zod.def.type?s.out:s.in:s.out;iq(r,t,i),t.seen.get(e).ref=r},sk=(e,t,n,i)=>{let s=e._zod.def;iq(s.innerType,t,i),t.seen.get(e).ref=s.innerType,n.readOnly=!0},sx=(e,t,n,i)=>{let s=e._zod.def;iq(s.innerType,t,i),t.seen.get(e).ref=s.innerType},s$=(e,t,n,i)=>{let s=e._zod.def;iq(s.innerType,t,i),t.seen.get(e).ref=s.innerType},sA=(e,t,n,i)=>{let s=e._zod.innerType;iq(s,t,i),t.seen.get(e).ref=s},sO=u("ZodISODateTime",(e,t)=>{tM.init(e,t),s0.init(e,t)});function sI(e){return new sO({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Z(e)})}let sT=u("ZodISODate",(e,t)=>{tD.init(e,t),s0.init(e,t)});function sE(e){return new sT({type:"string",format:"date",check:"string_format",...Z(e)})}let sN=u("ZodISOTime",(e,t)=>{tU.init(e,t),s0.init(e,t)});function sP(e){return new sN({type:"string",format:"time",check:"string_format",precision:null,...Z(e)})}let sZ=u("ZodISODuration",(e,t)=>{tB.init(e,t),s0.init(e,t)});function sR(e){return new sZ({type:"string",format:"duration",check:"string_format",...Z(e)})}let sj=(e,t)=>{V.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>(function(e,t=e=>e.message){let n={_errors:[]},i=e=>{for(let s of e.issues)if("invalid_union"===s.code&&s.errors.length)s.errors.map(e=>i({issues:e}));else if("invalid_key"===s.code)i({issues:s.issues});else if("invalid_element"===s.code)i({issues:s.issues});else if(0===s.path.length)n._errors.push(t(s));else{let e=n,i=0;for(;i<s.path.length;){let n=s.path[i];i===s.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(s))):e[n]=e[n]||{_errors:[]},e=e[n],i++}}};return i(e),n})(e,t)},flatten:{value:t=>(function(e,t=e=>e.message){let n={},i=[];for(let s of e.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(t(s))):i.push(t(s));return{formErrors:i,fieldErrors:n}})(e,t)},addIssue:{value:t=>{e.issues.push(t),e.message=JSON.stringify(e.issues,g,2)}},addIssues:{value:t=>{e.issues.push(...t),e.message=JSON.stringify(e.issues,g,2)}},isEmpty:{get:()=>0===e.issues.length}})};u("ZodError",sj);let sC=u("ZodError",sj,{Parent:Error}),sL=X(sC),sF=K(sC),sM=Y(sC),sD=ee(sC),sU=(e,t,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return X(sC)(e,t,i)},sB=(e,t,n)=>X(sC)(e,t,n),sW=async(e,t,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return K(sC)(e,t,i)},sJ=async(e,t,n)=>K(sC)(e,t,n),sV=(e,t,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Y(sC)(e,t,i)},sq=(e,t,n)=>Y(sC)(e,t,n),sX=async(e,t,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return ee(sC)(e,t,i)},sH=async(e,t,n)=>ee(sC)(e,t,n),sK=u("ZodType",(e,t)=>(t$.init(e,t),Object.assign(e["~standard"],{jsonSchema:{input:iG(e,"input"),output:iG(e,"output")}}),e.toJSONSchema=iK(e,{}),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone(S(t,{checks:[...t.checks??[],...n.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]}),{parent:!0}),e.with=e.check,e.clone=(t,n)=>P(e,t,n),e.brand=()=>e,e.register=(t,n)=>(t.add(e,n),e),e.parse=(t,n)=>sL(e,t,n,{callee:e.parse}),e.safeParse=(t,n)=>sM(e,t,n),e.parseAsync=async(t,n)=>sF(e,t,n,{callee:e.parseAsync}),e.safeParseAsync=async(t,n)=>sD(e,t,n),e.spa=e.safeParseAsync,e.encode=(t,n)=>sU(e,t,n),e.decode=(t,n)=>sB(e,t,n),e.encodeAsync=async(t,n)=>sW(e,t,n),e.decodeAsync=async(t,n)=>sJ(e,t,n),e.safeEncode=(t,n)=>sV(e,t,n),e.safeDecode=(t,n)=>sq(e,t,n),e.safeEncodeAsync=async(t,n)=>sX(e,t,n),e.safeDecodeAsync=async(t,n)=>sH(e,t,n),e.refine=(t,n)=>e.check(ap(t,n)),e.superRefine=t=>e.check(af(t)),e.overwrite=t=>e.check(iF(t)),e.optional=()=>oU(e),e.exactOptional=()=>oW(e),e.nullable=()=>oV(e),e.nullish=()=>oU(oV(e)),e.nonoptional=t=>oQ(e,t),e.array=()=>ol(e),e.or=t=>om([e,t]),e.and=t=>ow(e,t),e.transform=t=>o8(e,oM(t)),e.default=t=>oH(e,t),e.prefault=t=>oG(e,t),e.catch=t=>o4(e,t),e.pipe=t=>o8(e,t),e.readonly=()=>at(e),e.describe=t=>{let n=e.clone();return n1.add(n,{description:t}),n},Object.defineProperty(e,"description",{get:()=>n1.get(e)?.description,configurable:!0}),e.meta=(...t)=>{if(0===t.length)return n1.get(e);let n=e.clone();return n1.add(n,t[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e.apply=t=>t(e),e)),sG=u("_ZodString",(e,t)=>{tA.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>iQ(e,t,n,i);let n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...t)=>e.check(iE(...t)),e.includes=(...t)=>e.check(iZ(...t)),e.startsWith=(...t)=>e.check(iR(...t)),e.endsWith=(...t)=>e.check(ij(...t)),e.min=(...t)=>e.check(iI(...t)),e.max=(...t)=>e.check(iO(...t)),e.length=(...t)=>e.check(iT(...t)),e.nonempty=(...t)=>e.check(iI(1,...t)),e.lowercase=t=>e.check(iN(t)),e.uppercase=t=>e.check(iP(t)),e.trim=()=>e.check(iD()),e.normalize=(...t)=>e.check(iM(...t)),e.toLowerCase=()=>e.check(iU()),e.toUpperCase=()=>e.check(iB()),e.slugify=()=>e.check(iW())}),sY=u("ZodString",(e,t)=>{tA.init(e,t),sG.init(e,t),e.email=t=>e.check(n2(s1,t)),e.url=t=>e.check(n5(re,t)),e.jwt=t=>e.check(im(rP,t)),e.emoji=t=>e.check(n7(ri,t)),e.guid=t=>e.check(n4(s4,t)),e.uuid=t=>e.check(n6(s9,t)),e.uuidv4=t=>e.check(n9(s9,t)),e.uuidv6=t=>e.check(n3(s9,t)),e.uuidv7=t=>e.check(n8(s9,t)),e.nanoid=t=>e.check(ie(rr,t)),e.guid=t=>e.check(n4(s4,t)),e.cuid=t=>e.check(it(ra,t)),e.cuid2=t=>e.check(ii(ru,t)),e.ulid=t=>e.check(is(rh,t)),e.base64=t=>e.check(ih(rA,t)),e.base64url=t=>e.check(id(rI,t)),e.xid=t=>e.check(ir(rp,t)),e.ksuid=t=>e.check(io(rm,t)),e.ipv4=t=>e.check(ia(ry,t)),e.ipv6=t=>e.check(il(rw,t)),e.cidrv4=t=>e.check(iu(rS,t)),e.cidrv6=t=>e.check(ic(rx,t)),e.e164=t=>e.check(ip(rE,t)),e.datetime=t=>e.check(sI(t)),e.date=t=>e.check(sE(t)),e.time=t=>e.check(sP(t)),e.duration=t=>e.check(sR(t))});function sQ(e){return new sY({type:"string",...Z(e)})}let s0=u("ZodStringFormat",(e,t)=>{tO.init(e,t),sG.init(e,t)}),s1=u("ZodEmail",(e,t)=>{tE.init(e,t),s0.init(e,t)});function s2(e){return n2(s1,e)}let s4=u("ZodGUID",(e,t)=>{tI.init(e,t),s0.init(e,t)});function s6(e){return n4(s4,e)}let s9=u("ZodUUID",(e,t)=>{tT.init(e,t),s0.init(e,t)});function s3(e){return n6(s9,e)}function s8(e){return n9(s9,e)}function s5(e){return n3(s9,e)}function s7(e){return n8(s9,e)}let re=u("ZodURL",(e,t)=>{tN.init(e,t),s0.init(e,t)});function rt(e){return n5(re,e)}function rn(e){return n5(re,{protocol:/^https?$/,hostname:eT,...Z(e)})}let ri=u("ZodEmoji",(e,t)=>{tP.init(e,t),s0.init(e,t)});function rs(e){return n7(ri,e)}let rr=u("ZodNanoID",(e,t)=>{tZ.init(e,t),s0.init(e,t)});function ro(e){return ie(rr,e)}let ra=u("ZodCUID",(e,t)=>{tR.init(e,t),s0.init(e,t)});function rl(e){return it(ra,e)}let ru=u("ZodCUID2",(e,t)=>{tj.init(e,t),s0.init(e,t)});function rc(e){return ii(ru,e)}let rh=u("ZodULID",(e,t)=>{tC.init(e,t),s0.init(e,t)});function rd(e){return is(rh,e)}let rp=u("ZodXID",(e,t)=>{tL.init(e,t),s0.init(e,t)});function rf(e){return ir(rp,e)}let rm=u("ZodKSUID",(e,t)=>{tF.init(e,t),s0.init(e,t)});function rg(e){return io(rm,e)}let ry=u("ZodIPv4",(e,t)=>{tW.init(e,t),s0.init(e,t)});function r_(e){return ia(ry,e)}let rv=u("ZodMAC",(e,t)=>{tV.init(e,t),s0.init(e,t)});function rb(e){return new rv({type:"string",format:"mac",check:"string_format",abort:!1,...Z(e)})}let rw=u("ZodIPv6",(e,t)=>{tJ.init(e,t),s0.init(e,t)});function rz(e){return il(rw,e)}let rS=u("ZodCIDRv4",(e,t)=>{tq.init(e,t),s0.init(e,t)});function rk(e){return iu(rS,e)}let rx=u("ZodCIDRv6",(e,t)=>{tX.init(e,t),s0.init(e,t)});function r$(e){return ic(rx,e)}let rA=u("ZodBase64",(e,t)=>{tK.init(e,t),s0.init(e,t)});function rO(e){return ih(rA,e)}let rI=u("ZodBase64URL",(e,t)=>{tG.init(e,t),s0.init(e,t)});function rT(e){return id(rI,e)}let rE=u("ZodE164",(e,t)=>{tY.init(e,t),s0.init(e,t)});function rN(e){return ip(rE,e)}let rP=u("ZodJWT",(e,t)=>{tQ.init(e,t),s0.init(e,t)});function rZ(e){return im(rP,e)}let rR=u("ZodCustomStringFormat",(e,t)=>{t0.init(e,t),s0.init(e,t)});function rj(e,t,n={}){return iJ(rR,e,t,n)}function rC(e){return iJ(rR,"hostname",eI,e)}function rL(e){return iJ(rR,"hex",eV,e)}function rF(e,t){let n=t?.enc??"hex",i=`${e}_${n}`,s=r[i];if(!s)throw Error(`Unrecognized hash format: ${i}`);return iJ(rR,i,s,t)}let rM=u("ZodNumber",(e,t)=>{t1.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>i0(e,t,n,i),e.gt=(t,n)=>e.check(i_(t,n)),e.gte=(t,n)=>e.check(iv(t,n)),e.min=(t,n)=>e.check(iv(t,n)),e.lt=(t,n)=>e.check(ig(t,n)),e.lte=(t,n)=>e.check(iy(t,n)),e.max=(t,n)=>e.check(iy(t,n)),e.int=t=>e.check(rB(t)),e.safe=t=>e.check(rB(t)),e.positive=t=>e.check(i_(0,t)),e.nonnegative=t=>e.check(iv(0,t)),e.negative=t=>e.check(ig(0,t)),e.nonpositive=t=>e.check(iy(0,t)),e.multipleOf=(t,n)=>e.check(ik(t,n)),e.step=(t,n)=>e.check(ik(t,n)),e.finite=()=>e;let n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function rD(e){return new rM({type:"number",checks:[],...Z(e)})}let rU=u("ZodNumberFormat",(e,t)=>{t2.init(e,t),rM.init(e,t)});function rB(e){return new rU({type:"number",check:"number_format",abort:!1,format:"safeint",...Z(e)})}function rW(e){return new rU({type:"number",check:"number_format",abort:!1,format:"float32",...Z(e)})}function rJ(e){return new rU({type:"number",check:"number_format",abort:!1,format:"float64",...Z(e)})}function rV(e){return new rU({type:"number",check:"number_format",abort:!1,format:"int32",...Z(e)})}function rq(e){return new rU({type:"number",check:"number_format",abort:!1,format:"uint32",...Z(e)})}let rX=u("ZodBoolean",(e,t)=>{t4.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>i1(e,t,n,i)});function rH(e){return new rX({type:"boolean",...Z(e)})}let rK=u("ZodBigInt",(e,t)=>{t6.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>i2(e,t,n,i),e.gte=(t,n)=>e.check(iv(t,n)),e.min=(t,n)=>e.check(iv(t,n)),e.gt=(t,n)=>e.check(i_(t,n)),e.gte=(t,n)=>e.check(iv(t,n)),e.min=(t,n)=>e.check(iv(t,n)),e.lt=(t,n)=>e.check(ig(t,n)),e.lte=(t,n)=>e.check(iy(t,n)),e.max=(t,n)=>e.check(iy(t,n)),e.positive=t=>e.check(i_(BigInt(0),t)),e.negative=t=>e.check(ig(BigInt(0),t)),e.nonpositive=t=>e.check(iy(BigInt(0),t)),e.nonnegative=t=>e.check(iv(BigInt(0),t)),e.multipleOf=(t,n)=>e.check(ik(t,n));let n=e._zod.bag;e.minValue=n.minimum??null,e.maxValue=n.maximum??null,e.format=n.format??null});function rG(e){return new rK({type:"bigint",...Z(e)})}let rY=u("ZodBigIntFormat",(e,t)=>{t9.init(e,t),rK.init(e,t)});function rQ(e){return new rY({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...Z(e)})}function r0(e){return new rY({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...Z(e)})}let r1=u("ZodSymbol",(e,t)=>{t3.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>i4(e,t,n,i)});function r2(e){return new r1({type:"symbol",...Z(e)})}let r4=u("ZodUndefined",(e,t)=>{t8.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>i9(e,t,n,i)});function r6(e){return new r4({type:"undefined",...Z(e)})}let r9=u("ZodNull",(e,t)=>{t5.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>i6(e,t,n,i)});function r3(e){return new r9({type:"null",...Z(e)})}let r8=u("ZodAny",(e,t)=>{t7.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>i5(e,t,n,i)});function r5(){return new r8({type:"any"})}let r7=u("ZodUnknown",(e,t)=>{ne.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>i7(e,t,n,i)});function oe(){return new r7({type:"unknown"})}let ot=u("ZodNever",(e,t)=>{nt.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>i8(e,t,n,i)});function on(e){return new ot({type:"never",...Z(e)})}let oi=u("ZodVoid",(e,t)=>{nn.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>i3(e,t,n,i)});function os(e){return new oi({type:"void",...Z(e)})}let or=u("ZodDate",(e,t)=>{ni.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>se(e,t,n,i),e.min=(t,n)=>e.check(iv(t,n)),e.max=(t,n)=>e.check(iy(t,n));let n=e._zod.bag;e.minDate=n.minimum?new Date(n.minimum):null,e.maxDate=n.maximum?new Date(n.maximum):null});function oo(e){return new or({type:"date",...Z(e)})}let oa=u("ZodArray",(e,t)=>{nr.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>sd(e,t,n,i),e.element=t.element,e.min=(t,n)=>e.check(iI(t,n)),e.nonempty=t=>e.check(iI(1,t)),e.max=(t,n)=>e.check(iO(t,n)),e.length=(t,n)=>e.check(iT(t,n)),e.unwrap=()=>e.element});function ol(e,t){return new oa({type:"array",element:e,...Z(t)})}function ou(e){return oP(Object.keys(e._zod.def.shape))}let oc=u("ZodObject",(e,t)=>{nc.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>sp(e,t,n,i),w(e,"shape",()=>t.shape),e.keyof=()=>oP(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:oe()}),e.loose=()=>e.clone({...e._zod.def,catchall:oe()}),e.strict=()=>e.clone({...e._zod.def,catchall:on()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>(function(e,t){if(!O(t))throw Error("Invalid input to extend: expected a plain object");let n=e._zod.def.checks;if(n&&n.length>0){let n=e._zod.def.shape;for(let e in t)if(void 0!==Object.getOwnPropertyDescriptor(n,e))throw Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}let i=S(e._zod.def,{get shape(){let n={...e._zod.def.shape,...t};return z(this,"shape",n),n}});return P(e,i)})(e,t),e.safeExtend=t=>(function(e,t){if(!O(t))throw Error("Invalid input to safeExtend: expected a plain object");let n=S(e._zod.def,{get shape(){let n={...e._zod.def.shape,...t};return z(this,"shape",n),n}});return P(e,n)})(e,t),e.merge=t=>(function(e,t){let n=S(e._zod.def,{get shape(){let n={...e._zod.def.shape,...t._zod.def.shape};return z(this,"shape",n),n},get catchall(){return t._zod.def.catchall},checks:[]});return P(e,n)})(e,t),e.pick=t=>(function(e,t){let n=e._zod.def,i=n.checks;if(i&&i.length>0)throw Error(".pick() cannot be used on object schemas containing refinements");let s=S(e._zod.def,{get shape(){let e={};for(let i in t){if(!(i in n.shape))throw Error(`Unrecognized key: "${i}"`);t[i]&&(e[i]=n.shape[i])}return z(this,"shape",e),e},checks:[]});return P(e,s)})(e,t),e.omit=t=>(function(e,t){let n=e._zod.def,i=n.checks;if(i&&i.length>0)throw Error(".omit() cannot be used on object schemas containing refinements");let s=S(e._zod.def,{get shape(){let i={...e._zod.def.shape};for(let e in t){if(!(e in n.shape))throw Error(`Unrecognized key: "${e}"`);t[e]&&delete i[e]}return z(this,"shape",i),i},checks:[]});return P(e,s)})(e,t),e.partial=(...t)=>(function(e,t,n){let i=t._zod.def.checks;if(i&&i.length>0)throw Error(".partial() cannot be used on object schemas containing refinements");let s=S(t._zod.def,{get shape(){let i=t._zod.def.shape,s={...i};if(n)for(let t in n){if(!(t in i))throw Error(`Unrecognized key: "${t}"`);n[t]&&(s[t]=e?new e({type:"optional",innerType:i[t]}):i[t])}else for(let t in i)s[t]=e?new e({type:"optional",innerType:i[t]}):i[t];return z(this,"shape",s),s},checks:[]});return P(t,s)})(oD,e,t[0]),e.required=(...t)=>(function(e,t,n){let i=S(t._zod.def,{get shape(){let i=t._zod.def.shape,s={...i};if(n)for(let t in n){if(!(t in s))throw Error(`Unrecognized key: "${t}"`);n[t]&&(s[t]=new e({type:"nonoptional",innerType:i[t]}))}else for(let t in i)s[t]=new e({type:"nonoptional",innerType:i[t]});return z(this,"shape",s),s}});return P(t,i)})(oY,e,t[0])});function oh(e,t){return new oc({type:"object",shape:e??{},...Z(t)})}function od(e,t){return new oc({type:"object",shape:e,catchall:on(),...Z(t)})}function op(e,t){return new oc({type:"object",shape:e,catchall:oe(),...Z(t)})}let of=u("ZodUnion",(e,t)=>{nd.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>sf(e,t,n,i),e.options=t.options});function om(e,t){return new of({type:"union",options:e,...Z(t)})}let og=u("ZodXor",(e,t)=>{of.init(e,t),nf.init(e,t),e._zod.processJSONSchema=(t,n,i)=>sf(e,t,n,i),e.options=t.options});function oy(e,t){return new og({type:"union",options:e,inclusive:!1,...Z(t)})}let o_=u("ZodDiscriminatedUnion",(e,t)=>{of.init(e,t),nm.init(e,t)});function ov(e,t,n){return new o_({type:"union",options:t,discriminator:e,...Z(n)})}let ob=u("ZodIntersection",(e,t)=>{ng.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>sm(e,t,n,i)});function ow(e,t){return new ob({type:"intersection",left:e,right:t})}let oz=u("ZodTuple",(e,t)=>{n_.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>sg(e,t,n,i),e.rest=t=>e.clone({...e._zod.def,rest:t})});function oS(e,t,n){let i=t instanceof t$,s=i?n:t;return new oz({type:"tuple",items:e,rest:i?t:null,...Z(s)})}let ok=u("ZodRecord",(e,t)=>{nb.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>sy(e,t,n,i),e.keyType=t.keyType,e.valueType=t.valueType});function ox(e,t,n){return new ok({type:"record",keyType:e,valueType:t,...Z(n)})}function o$(e,t,n){let i=P(e);return i._zod.values=void 0,new ok({type:"record",keyType:i,valueType:t,...Z(n)})}function oA(e,t,n){return new ok({type:"record",keyType:e,valueType:t,mode:"loose",...Z(n)})}let oO=u("ZodMap",(e,t)=>{nw.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>sc(e,t,n,i),e.keyType=t.keyType,e.valueType=t.valueType,e.min=(...t)=>e.check(i$(...t)),e.nonempty=t=>e.check(i$(1,t)),e.max=(...t)=>e.check(ix(...t)),e.size=(...t)=>e.check(iA(...t))});function oI(e,t,n){return new oO({type:"map",keyType:e,valueType:t,...Z(n)})}let oT=u("ZodSet",(e,t)=>{nS.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>sh(e,t,n,i),e.min=(...t)=>e.check(i$(...t)),e.nonempty=t=>e.check(i$(1,t)),e.max=(...t)=>e.check(ix(...t)),e.size=(...t)=>e.check(iA(...t))});function oE(e,t){return new oT({type:"set",valueType:e,...Z(t)})}let oN=u("ZodEnum",(e,t)=>{nx.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>st(e,t,n,i),e.enum=t.entries,e.options=Object.values(t.entries);let n=new Set(Object.keys(t.entries));e.extract=(e,i)=>{let s={};for(let i of e)if(n.has(i))s[i]=t.entries[i];else throw Error(`Key ${i} not found in enum`);return new oN({...t,checks:[],...Z(i),entries:s})},e.exclude=(e,i)=>{let s={...t.entries};for(let t of e)if(n.has(t))delete s[t];else throw Error(`Key ${t} not found in enum`);return new oN({...t,checks:[],...Z(i),entries:s})}});function oP(e,t){return new oN({type:"enum",entries:Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e,...Z(t)})}function oZ(e,t){return new oN({type:"enum",entries:e,...Z(t)})}let oR=u("ZodLiteral",(e,t)=>{n$.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>sn(e,t,n,i),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function oj(e,t){return new oR({type:"literal",values:Array.isArray(e)?e:[e],...Z(t)})}let oC=u("ZodFile",(e,t)=>{nA.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>sr(e,t,n,i),e.min=(t,n)=>e.check(i$(t,n)),e.max=(t,n)=>e.check(ix(t,n)),e.mime=(t,n)=>e.check(iL(Array.isArray(t)?t:[t],n))});function oL(e){return new oC({type:"file",...Z(e)})}let oF=u("ZodTransform",(e,t)=>{nO.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>su(e,t,n,i),e._zod.parse=(n,i)=>{if("backward"===i.direction)throw new h(e.constructor.name);n.addIssue=i=>{"string"==typeof i?n.issues.push(W(i,n.value,t)):(i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=n.value),i.inst??(i.inst=e),n.issues.push(W(i)))};let s=t.transform(n.value,n);return s instanceof Promise?s.then(e=>(n.value=e,n)):(n.value=s,n)}});function oM(e){return new oF({type:"transform",transform:e})}let oD=u("ZodOptional",(e,t)=>{nT.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>s$(e,t,n,i),e.unwrap=()=>e._zod.def.innerType});function oU(e){return new oD({type:"optional",innerType:e})}let oB=u("ZodExactOptional",(e,t)=>{nE.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>s$(e,t,n,i),e.unwrap=()=>e._zod.def.innerType});function oW(e){return new oB({type:"optional",innerType:e})}let oJ=u("ZodNullable",(e,t)=>{nN.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>s_(e,t,n,i),e.unwrap=()=>e._zod.def.innerType});function oV(e){return new oJ({type:"nullable",innerType:e})}function oq(e){return oU(oV(e))}let oX=u("ZodDefault",(e,t)=>{nP.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>sb(e,t,n,i),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function oH(e,t){return new oX({type:"default",innerType:e,get defaultValue(){return"function"==typeof t?t():I(t)}})}let oK=u("ZodPrefault",(e,t)=>{nR.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>sw(e,t,n,i),e.unwrap=()=>e._zod.def.innerType});function oG(e,t){return new oK({type:"prefault",innerType:e,get defaultValue(){return"function"==typeof t?t():I(t)}})}let oY=u("ZodNonOptional",(e,t)=>{nj.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>sv(e,t,n,i),e.unwrap=()=>e._zod.def.innerType});function oQ(e,t){return new oY({type:"nonoptional",innerType:e,...Z(t)})}let o0=u("ZodSuccess",(e,t)=>{nL.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>so(e,t,n,i),e.unwrap=()=>e._zod.def.innerType});function o1(e){return new o0({type:"success",innerType:e})}let o2=u("ZodCatch",(e,t)=>{nF.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>sz(e,t,n,i),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function o4(e,t){return new o2({type:"catch",innerType:e,catchValue:"function"==typeof t?t:()=>t})}let o6=u("ZodNaN",(e,t)=>{nM.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>si(e,t,n,i)});function o9(e){return new o6({type:"nan",...Z(e)})}let o3=u("ZodPipe",(e,t)=>{nD.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>sS(e,t,n,i),e.in=t.in,e.out=t.out});function o8(e,t){return new o3({type:"pipe",in:e,out:t})}let o5=u("ZodCodec",(e,t)=>{o3.init(e,t),nB.init(e,t)});function o7(e,t,n){return new o5({type:"pipe",in:e,out:t,transform:n.decode,reverseTransform:n.encode})}let ae=u("ZodReadonly",(e,t)=>{nV.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>sk(e,t,n,i),e.unwrap=()=>e._zod.def.innerType});function at(e){return new ae({type:"readonly",innerType:e})}let an=u("ZodTemplateLiteral",(e,t)=>{nX.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>ss(e,t,n,i)});function ai(e,t){return new an({type:"template_literal",parts:e,...Z(t)})}let as=u("ZodLazy",(e,t)=>{nG.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>sA(e,t,n,i),e.unwrap=()=>e._zod.def.getter()});function ar(e){return new as({type:"lazy",getter:e})}let ao=u("ZodPromise",(e,t)=>{nK.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>sx(e,t,n,i),e.unwrap=()=>e._zod.def.innerType});function aa(e){return new ao({type:"promise",innerType:e})}let al=u("ZodFunction",(e,t)=>{nH.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>sl(e,t,n,i)});function au(e){return new al({type:"function",input:Array.isArray(e?.input)?oS(e?.input):e?.input??ol(oe()),output:e?.output??oe()})}let ac=u("ZodCustom",(e,t)=>{nY.init(e,t),sK.init(e,t),e._zod.processJSONSchema=(t,n,i)=>sa(e,t,n,i)});function ah(e){let t=new te({check:"custom"});return t._zod.check=e,t}function ad(e,t){return function(e,t,n){let i=Z(n);return i.abort??(i.abort=!0),new e({type:"custom",check:"custom",fn:t,...i})}(ac,e??(()=>!0),t)}function ap(e,t={}){return new ac({type:"custom",check:"custom",fn:e,...Z(t)})}function af(e){return function(e){let t=function(e,t){let n=new te({check:"custom",...Z(void 0)});return n._zod.check=e,n}(n=>(n.addIssue=e=>{"string"==typeof e?n.issues.push(W(e,n.value,t._zod.def)):(e.fatal&&(e.continue=!1),e.code??(e.code="custom"),e.input??(e.input=n.value),e.inst??(e.inst=t),e.continue??(e.continue=!t._zod.def.abort),n.issues.push(W(e)))},e(n.value,n)));return t}(e)}let am=function(e){let t=new te({check:"describe"});return t._zod.onattach=[t=>{let n=n1.get(t)??{};n1.add(t,{...n,description:e})}],t._zod.check=()=>{},t},ag=function(e){let t=new te({check:"meta"});return t._zod.onattach=[t=>{let n=n1.get(t)??{};n1.add(t,{...n,...e})}],t._zod.check=()=>{},t};function ay(e,t={}){let n=new ac({type:"custom",check:"custom",fn:t=>t instanceof e,abort:!0,...Z(t)});return n._zod.bag.Class=e,n._zod.check=t=>{t.value instanceof e||t.issues.push({code:"invalid_type",expected:e.name,input:t.value,inst:n,path:[...n._zod.def.path??[]]})},n}let a_=(...e)=>(function(e,t){let n=Z(t),i=n.truthy??["true","1","yes","on","y","enabled"],s=n.falsy??["false","0","no","off","n","disabled"];"sensitive"!==n.case&&(i=i.map(e=>"string"==typeof e?e.toLowerCase():e),s=s.map(e=>"string"==typeof e?e.toLowerCase():e));let r=new Set(i),o=new Set(s),a=e.Codec??nB,l=e.Boolean??t4,u=new a({type:"pipe",in:new(e.String??tA)({type:"string",error:n.error}),out:new l({type:"boolean",error:n.error}),transform:(e,t)=>{let i=e;return"sensitive"!==n.case&&(i=i.toLowerCase()),!!r.has(i)||!o.has(i)&&(t.issues.push({code:"invalid_value",expected:"stringbool",values:[...r,...o],input:t.value,inst:u,continue:!1}),{})},reverseTransform:(e,t)=>!0===e?i[0]||"true":s[0]||"false",error:n.error});return u})({Codec:o5,Boolean:rX,String:sY},...e);function av(e){let t=ar(()=>om([sQ(e),rD(),rH(),r3(),ol(t),ox(sQ(),t)]));return t}function ab(e,t){return o8(oM(e),t)}s||(s={}),p({localeError:(()=>{let e={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"},map:{unit:"entries",verb:"to have"}},t={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},n={nan:"NaN"};return i=>{switch(i.code){case"invalid_type":{let e=n[i.expected]??i.expected,t=function(e){let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"nan":"number";case"object":if(null===e)return"null";if(Array.isArray(e))return"array";if(e&&Object.getPrototypeOf(e)!==Object.prototype&&"constructor"in e&&e.constructor)return e.constructor.name}return t}(i.input),s=n[t]??t;return`Invalid input: expected ${e}, received ${s}`}case"invalid_value":if(1===i.values.length)return`Invalid input: expected ${R(i.values[0])}`;return`Invalid option: expected one of ${m(i.values,"|")}`;case"too_big":{let t=i.inclusive?"<=":"<",n=e[i.origin]??null;if(n)return`Too big: expected ${i.origin??"value"} to have ${t}${i.maximum.toString()} ${n.unit??"elements"}`;return`Too big: expected ${i.origin??"value"} to be ${t}${i.maximum.toString()}`}case"too_small":{let t=i.inclusive?">=":">",n=e[i.origin]??null;if(n)return`Too small: expected ${i.origin} to have ${t}${i.minimum.toString()} ${n.unit}`;return`Too small: expected ${i.origin} to be ${t}${i.minimum.toString()}`}case"invalid_format":if("starts_with"===i.format)return`Invalid string: must start with "${i.prefix}"`;if("ends_with"===i.format)return`Invalid string: must end with "${i.suffix}"`;if("includes"===i.format)return`Invalid string: must include "${i.includes}"`;if("regex"===i.format)return`Invalid string: must match pattern ${i.pattern}`;return`Invalid ${t[i.format]??i.format}`;case"not_multiple_of":return`Invalid number: must be a multiple of ${i.divisor}`;case"unrecognized_keys":return`Unrecognized key${i.keys.length>1?"s":""}: ${m(i.keys,", ")}`;case"invalid_key":return`Invalid key in ${i.origin}`;case"invalid_union":default:return"Invalid input";case"invalid_element":return`Invalid value in ${i.origin}`}}})()})}};